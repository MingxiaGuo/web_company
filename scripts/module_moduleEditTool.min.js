Site.addModuleContextMenu=function(e){if(Fai.top._contextMenu&&Fai.top._designAuth&&"contextMenu"in $){if("[object object]"!=Object.prototype.toString.call(e).toLowerCase())throw new Error("Site.addModuleContextMenu 参数错误");var t;$.contextMenu({selector:"#module"+e.id,className:"fk-moduleContextMenu fk-moduleContextMenu"+e.id,classNames:{icon:"f-icon"},build:function(t,a){var o,c,m,p,g,h,v={},b={},_={},S={},k={},M={},F=[M,b,_,{},S,k],T=e.id,C=Fai.top.$("#module"+T),J=l(C),I=e.moduleOperateList||{},x=e.moduleStateList||{},y=e.moduleDirectionList||{},E=e.moduleOtherList||{},P=(x.length,I.length),w=y.length,L=(E.length,Site.checkModuleInZone(C)),D=Site.checkNestModule(C),B=0,A=Site.hasPopupModuleOpen();if(D.inPopupZone&&A&&!A.editing)return!1;if("lock"!=C.data("lockedit")){for(h=0;h<P;h++)c=(o=I[h]).iconClass||"oper"+h,m=o.text,p=o.statusScript||1,g=o.evalScript,-1!=Fai.fkEval(p)&&(!0,!0,b[c]={},b[c].name=m,b[c].usehtml=!0,b[c].html="<div class='f-tip'></div><div>"+m+"</div>",b[c].icon=c,b[c].callback=Z(g));for(h=0;h<w;h++)c=(o=y[h]).iconClass||"edit"+h,m=o.text,p=o.statusScript||1,g=o.evalScript,-1!=Fai.fkEval(p)&&(!0,!0,_[c]={},_[c].name=m,_[c].usehtml=!0,_[c].html="<div class='f-tip'></div><div>"+m+"</div>",_[c].icon=c,_[c].callback=Z(g));var H=C.attr("_side"),z=C.attr("_flutterSwitch");2==H&&Fai.top._canDesign&&(g="Site.flutterStopSwitch('module"+T+"')","true"==z?(c="flutterStart",m="开始飘动"):(c="flutterStop",m="停止飘动"),!0,!0,_[c]={},_[c].name=m,_[c].usehtml=!0,_[c].html="<div class='f-tip'></div><div>"+m+"</div>",_[c].icon=c,_[c].callback=Z(g),m="设为飘动起始位置",g='Site.flutterSetStartLocation("module'+T+'")',_[c="Location"]={},_[c].name=m,_[c].usehtml=!0,_[c].html="<div class='f-tip'></div><div>"+m+"</div>",_[c].icon=c,_[c].callback=Z(g)),x.length>0&&W(x)>0&&function(e){var t=$("#module"+e);if(t.hasClass("formStyle97")&&!f(e))return!1;if(Site.isCartModule(t)&&!function(e){var t,i,a=Site.checkDockToModuleZone(e);return t=1==a.type,i=2==a.type,t||i}(t))return!1;if(N(e))return!1;return!0}(T)&&(m="设置模块状态",_[c="hasSub J_hasSub J_moreState"]={},_[c].name=m,_[c].usehtml=!0,_[c].html="<div class='f-tip'></div><div>"+m+"</div>",_[c].icon=c,_[c].callback=function(){}),J.isFullmeasure||N(T)||B++,E.length>0&&!N(T)&&(B+=W(E)),B>1&&!N(T)?(m="更多操作",S[c="hasSub J_hasSub J_moreOpt"]={},S[c].name=m,S[c].usehtml=!0,S[c].html="<div class='f-tip'></div><div>"+m+"</div>",S[c].icon=c,S[c].callback=function(){}):(E.length>0&&!N(T)&&(c=(o=E[0]).iconClass||"other"+h,m=o.text,p=o.statusScript||1,g=o.evalScript,-1!=Fai.fkEval(p)&&(!0,!0,S[c]={},S[c].name=m,S[c].usehtml=!0,S[c].html="<div class='f-tip'></div><div>"+m+"</div>",S[c].icon=c,S[c].callback=Z(g))),J.isFullmeasure||J.inPopupZone||J.inSubNav||N(T)||(!0,!0,m="锁定当前排版",k[c="lockEdit"]={},k[c].name=m,k[c].usehtml=!0,k[c].html="<div class='f-tip'></div><div>"+m+"</div>",k[c].icon=c,k[c].callback=function(){"1"==i({name:"moduleLockEdit"})?jzUtils.run({name:"moduleEditTool.lockEdit",callMethod:!0},e.id):n("锁定当前模块排版后，该模块不能移动，会减少误操作，<br/>也可以复制被选中的模块内容。",function(){jzUtils.run({name:"moduleEditTool.lockEdit",callMethod:!0},e.id)}),Site.logDog(100045,41)}))}else J.isFullmeasure||(!0,!0,m="解锁当前排版",k[c="openEdit"]={},k[c].name=m,k[c].usehtml=!0,k[c].html="<div class='f-tip'></div><div>"+m+"</div>",k[c].icon=c,k[c].callback=function(){jzUtils.run({name:"moduleEditTool.openEdit",callMethod:!0},e.id),Site.logDog(100045,42)});for((J.inPack||L||J.inPopupZone||J.inSubNav||J.inBottomFloatLayer||J.inFullmeasurePack||J.inTabPack)&&function(e,t,i){var a,o,n=!(e.nextAll(".form:visible").length>0),l=!(e.prevAll(".form:visible").length>0),d=e.siblings(".form:visible").length>0,f=n?" f-isTop":"",c=l?" f-isBottom":"";if(!d)return;o="置于顶层",i[a="topIndex"+f]={},i[a].name=o,i[a].usehtml=!0,i[a].html="<div class='f-tip'></div><div>"+o+"</div>",i[a].icon=a,i[a].callback=function(){Fai.top.Site.undoRun(s,{type:"module",detail:"置于顶层",id:parseInt(e.attr("_moduleid")),doArgs:[e],undoArgs:[e,Site.getModuleIndex(e)]}),t.inPackId>0&&Site.setModuleAttrDataChange(t.inPackId),Fai.top._moduleMoved++,Site.styleChanged()},o="上移一层",i[a="upIndex"+f]={},i[a].name=o,i[a].usehtml=!0,i[a].html="<div class='f-tip'></div><div>"+o+"</div>",i[a].icon=a,i[a].callback=function(){Fai.top.Site.undoRun(r,{type:"module",detail:"上移一层",id:parseInt(e.attr("_moduleid")),doArgs:[e,1],undoArgs:[e,-1]}),t.inPackId>0&&Site.setModuleAttrDataChange(t.inPackId),Fai.top._moduleMoved++,Site.styleChanged()},o="下移一层",i[a="downIndex"+c]={},i[a].name=o,i[a].usehtml=!0,i[a].html="<div class='f-tip'></div><div>"+o+"</div>",i[a].icon=a,i[a].callback=function(){Fai.top.Site.undoRun(r,{type:"module",detail:"下移一层",id:parseInt(e.attr("_moduleid")),doArgs:[e,-1],undoArgs:[e,1]}),t.inPackId>0&&Site.setModuleAttrDataChange(t.inPackId),Fai.top._moduleMoved++,Site.styleChanged()},o="置于底层",i[a="bottomIndex"+c]={},i[a].name=o,i[a].usehtml=!0,i[a].html="<div class='f-tip'></div><div>"+o+"</div>",i[a].icon=a,i[a].callback=function(){Fai.top.Site.undoRun(u,{type:"module",detail:"置于底层",id:parseInt(e.attr("_moduleid")),doArgs:[e],undoArgs:[e,Site.getModuleIndex(e)]}),t.inPackId>0&&Site.setModuleAttrDataChange(t.inPackId),Fai.top._moduleMoved++,Site.styleChanged()}}(C,J,M),h=0;h<F.length;h++)d(v)||d(F[h])||(v["sep"+h]="--"),v=$.extend(v,F[h]);return d(v)?(Fai.ing("请将模块移离当前区域，再尝试右键操作",!0),!1):{items:v};function W(e){for(var t,i=0,a=e.length,o=0;o<a;o++)(t=e[o].statusScript)&&-1!=Fai.fkEval(t)&&i++;return i}function N(e){var t=$("#module"+e);return!!t.parent().hasClass("J_topAdvContent")||!!t.parent().hasClass("J_bottomFloatLayerContent")}function Z(t){return function(i,a){switch(Fai.fkEval(t),i){case"mtop":case"mbottom":case"mleft":case"mright":case"lock":case"dockModule":case"absModule":case"mzindex":case"flutterStop":Site.scrollToModuleDiv(Fai.top.$("#module"+e.id)),Site.triggerGobalEvent("showFindModuleDiv",e.id)}}}},events:{show:function(){var d,s,r=Fai.top.$("#module"+e.id),u=l(r),c=-1;u.inTabId>0?c=u.inTabId:u.inMulColId>0?c=u.inMulColId:u.inFullmeasureId>0?c=u.inFullmeasureId:u.inPackId>0?c=u.inPackId:u.inTabPackId>0&&(c=u.inTabPackId),c>0&&(d=Fai.top.$("#module"+c),Site.moduleEditTool.contextMenu(c,!0)),Site.moduleEditTool.contextMenu(e.id,!0),Site.removeAllEditLayer(),Site.addMoveFrame("module"+e.id),"2"==r.attr("_side")&&"true"!=r.attr("_flutterswitch")?(r.attr("_edit",!0),Site.stopFlutterInterval(r)):"1"==r.attr("_side")?r.off("mouseenter.sideModule").off("mouseleave.sideModule"):d&&d.length>0&&("1"==(s=d.attr("_side"))?d.off("mouseenter.sideModule").off("mouseleave.sideModule"):"2"==s&&"true"!=d.attr("_flutterswitch")&&(d.attr("_edit",!0),Site.stopFlutterInterval(d))),t=setTimeout(function(){var t=Fai.top.$("#module"+e.id);Site.addMoveFrame("module"+e.id),1==t.data("bottomLine")&&Fai.top.$("#module"+e.id+"moveFrameBottom").css({opacity:1}),1==t.data("topLine")&&Fai.top.$("#module"+e.id+"moveFrameTop").css({opacity:1}),1==t.data("leftLine")&&Fai.top.$("#module"+e.id+"moveFrameLeft").css({opacity:1}),1==t.data("rightLine")&&Fai.top.$("#module"+e.id+"moveFrameRight").css({opacity:1})},200);var m=$(".fk-moduleContextMenu"+e.id);m.length>0&&m.find(".J_hasSub").on({"mouseenter.subMenu":function(){!function(e,t){var d,s,r;if(t.find(".J_subMenu").length>0)return;t.hasClass("J_moreState")?r=function(e){var t,i=[];$(e.moduleStateList).each(function(o,n){var l,d=n.iconClass||"",s=n.text.replace("模块","状态"),r=n.statusScript||1,u="f-context-submenu-item J_subMenu-item f-subMenu-"+(n.iconClass||""),c=!1;if("dockModule"==d){var m=Fai.top.$("#module"+e.id),p=m.hasClass("formStyle97"),g=m.hasClass("formStyle82");if(p){if(!f(e.id))return!0}else if(g){var h,v,b=Site.checkDockToModuleZone(m);if(h=1==b.type,v=2==b.type,!h&&!v)return!0}}(function(e){return["dockModule","absModule","lock","flutterm","sidem"][Site.getModuleStatus(e.id)-1]})(e)==d&&(c=!0,u+=" f-context-submenu-active J_subMenu-active"),(-1!=Fai.fkEval(r)||c)&&("absModule"==d&&(t=o),l=a({cls:u,text:s,iconClass:d}),i.push(l))}),void 0!==t&&i.push(i.splice(t,1));return i.join("")}(e):t.hasClass("J_moreOpt")&&(r=function(e){e.moduleOtherList;var t=e.id,i=l(Fai.top.$("#module"+t)),o=[],n=[];o=o.concat(e.moduleOtherList),i.isFullmeasure||(o=o.concat({text:"锁定当前排版",iconClass:"lockEdit"}));return $(o).each(function(e,t){var i,o="f-context-submenu-item J_subMenu-item f-subMenu-"+(t.iconClass||"");-1!=Fai.fkEval(t.statusScript)&&(i=a({cls:o,text:t.text,iconClass:t.iconClass})),n.push(i)}),n.join("")}(e));if(!r)return;d=['<div class="fk-contextSubMenuWrap J_subMenuWrap">','<div class="fk-contextSubMenu J_subMenu">',r,"</div>","</div>"].join(""),s=$(d),t.append(s),function(e,t){function a(e,t){var a,l=[];for(l=(l=l.concat(e.moduleStateList)).concat(e.moduleOtherList),a=l.length;a;)if(l[--a].iconClass===t)return void o(l[a].evalScript,t);"lockEdit"===t&&function(e){"1"==i({name:"moduleLockEdit"})?jzUtils.run({name:"moduleEditTool.lockEdit",callMethod:!0},e.id):n("锁定当前模块排版后，该模块不能移动，会减少误操作，<br/>也可以复制被选中的模块内容。",function(){jzUtils.run({name:"moduleEditTool.lockEdit",callMethod:!0},e.id)});Site.logDog(100045,41)}(e)}t.find(".J_subMenu").on("mouseup.subMenuItem",".J_subMenu-item",function(t){var i=$(this),o=i.attr("fk-icon-class");if(i.hasClass("J_subMenu-active"))t.stopPropagation();else{a(e,o);var n=Fai.top.$("#module"+e.id);n.hasClass("formStyle75")&&Site.fixMsgSubmitStyle(e.id),n.hasClass("formStyle32")&&Site.fixSiteFormDateRangeStyle(e.id)}}),t.off("mouseup.contextMenuItem mouseleave.removeActive").on({"mouseup.contextMenuItem":function(e){!function(e,t){var i=e.pageX,a=e.pageY,o=t.offset(),n=o.left,l=o.top,d=t.outerWidth(),s=t.outerHeight(),r=!1,u=!1;i>=n&&i<=n+d&&(r=!0);a>=l&&a<=l+s&&(u=!0);r&&u&&e.stopPropagation()}(e,$(this))},"mouseleave.removeActive":function(){$(this).removeClass("context-menu-hover")}})}(e,t),function(e){var t=e.offset(),i=t.left,a=t.top,o=e.width(),n=e.height(),l=$(window),d=l.width(),s=l.height();i+o>d&&e.addClass("fk-contextSubMenuWrap-right");a+n>s&&e.addClass("fk-contextSubMenuWrap-bottom")}(s)}(e,$(this))},"mouseleave.subMenu":function(){!function(e,t){var i=t.find(".J_subMenuWrap");if(0==i.length)return;(function(e,t){t.find(".J_subMenu").off("mouseup.contextMenuItem"),t.off("mouseup.contextMenuItem mouseleave.removeActive")})(0,t),i.remove()}(0,$(this))}})},hide:function(){clearTimeout(t),t=null,Site.removeMoveFrame("module"+e.id);var i,a=Fai.top.$("#module"+e.id),o=l(a),n=-1,d=$(".fk-moduleContextMenu"+e.id);d.length>0&&d.off("mouseenter.subMenu mouseleave.subMenu"),o.inTabId>0?n=o.inTabId:o.inMulColId>0?n=o.inMulColId:o.inFullmeasureId>0?n=o.inFullmeasureId:o.inPackId>0?n=o.inPackId:o.inTabPackId>0&&(n=o.inTabPackId),2==a.attr("_side")&&"true"!=a.attr("_flutterswitch")?(a.removeAttr("_edit"),Site.startFlutterInterval(a)):1==a.attr("_side")&&Site.reSetSidePosition(a),Site.moduleEditTool.contextMenu(e.id,!1),n>0&&(i=Fai.top.$("#module"+n),Site.moduleEditTool.contextMenu(n,!1),2==i.attr("_side")&&"true"!=i.attr("_flutterswitch")?(i.removeAttr("_edit"),Site.startFlutterInterval(i)):1==i.attr("_side")&&Site.reSetSidePosition(i))}}})}function i(e){var t=e.name||"";return window.localStorage&&window.localStorage.getItem?window.localStorage.getItem(t):$.cookie(t,{path:"/"})}function a(e){var t="<li class='{#cls#}' fk-icon-class='{#iconClass#}'><span class='f-point'></span>{#text#}</li>";return t=t.replace("{#cls#}",e.cls||"").replace("{#text#}",e.text||"").replace("{#iconClass#}",e.iconClass||"")}function o(t,i){switch(Fai.fkEval(t),i){case"mtop":case"mbottom":case"mleft":case"mright":case"lock":case"dockModule":case"absModule":case"mzindex":case"flutterStop":Site.scrollToModuleDiv(Fai.top.$("#module"+e.id)),Site.triggerGobalEvent("showFindModuleDiv",e.id)}}function n(e,t){(new Vue).$createDialog({onConfirm:function(){var e,i,a,o;this.nomoreTip&&(i=(e={name:"moduleLockEdit",value:"1",time:90}).name||"",a=e.value,o=e.time||90,window.localStorage&&window.localStorage.setItem?window.localStorage.setItem(i,a):$.cookie(i,a,{expires:o,path:"/"})),t()},confirmButton:{text:"确 定"},cancelButton:{text:"取 消"},content:e,data:{nomoreTip:!1},icon:"warning"},function(e){var t=this;return e("checkbox-component",{slot:"description",on:{input:function(e){t.nomoreTip=e}},props:{value:this.nomoreTip},class:"f_lock_edit_tip_nomore"},"不再提示")})}function l(e){if("[object object]"!=Object.prototype.toString.call(e).toLowerCase())throw new Error("contextMenu getModuleData 参数错误");var t,i,a,o,n,l,d,s,r=!1,u=!1,f=!1,c=!1,m=!1,p=!1,g=!1,h=!1,v=!1,b=!1,_=!1,S=!1,k=0,M=!1,F=0,T=!1,C=!1,J=!1,I=!1;return e.hasClass("formStyle80")||e.hasClass("formStyle109")?r=!0:e.hasClass("formStyle35")?m=!0:e.hasClass("formStyle29")?f=!0:e.hasClass("formStyle87")?v=!0:e.hasClass("formStyle105")?M=!0:e.hasClass("formStyle109")?C=!0:e.hasClass("formStyle110")&&(I=!0),e.hasClass("elemElemZone")&&(_=!0),(t=parseInt(e.attr("_infullmeasure"))||0)>0&&(u=!0),(i=parseInt(e.attr("_infullmeasurepack"))||0)>0&&(T=!0),(a=parseInt(e.attr("_intab"))||0)>0&&(c=!0),(s=parseInt(e.attr("_intabpack"))||0)>0&&(J=!0),(o=parseInt(e.attr("_inmulmcol"))||0)>0&&(p=!0),(n=parseInt(e.attr("_inpack"))||0)>0&&(b=!0),(F=parseInt(e.attr("_inpopupzone"))||0)>0&&(F=!0),d=e.parent().hasClass("J_bottomFloatLayerContent"),l=e.parent().hasClass("J_subNavPack"),e.parent().hasClass("elemZone")&&(S=!0,k=e.parent().attr("id")),(f||m||I)&&(g=!0),(c||p||J)&&(h=!0),{isFullmeasure:r,inFullmeasure:u,inFullmeasureId:t,isTab:f,inTab:c,inTabId:a,isMulCol:m,inMulCol:p,inMulColId:o,isMultiModule:g,inMultiModule:h,isPack:v,inPack:b,inPackId:n,isElemZone:_,inElemZone:S,inElemZoneId:k,isPopupZone:M,inPopupZone:F,inSubNav:l,inBottomFloatLayer:d,isFullmeasurePack:C,inFullmeasurePack:T,inFullmeasurePackId:i,isTabPack:I,inTabPack:J,inTabPackId:s}}function d(e){var t;for(t in e)return!1;return!0}function s(e,t){if(void 0===t){var i=e.nextAll(".form"),a=!(i.length>0);c(e,200302,10),a||i.last().after(e)}else Fai.top._undo.insertElem&&Fai.top._undo.insertElem({module:e,index:t})}function r(e,t){switch(t){case 1:!function(e){var t=e.nextAll(".form:visible"),i=!(t.length>0);c(e,200302,12),i||t.first().after(e)}(e);break;case-1:!function(e){var t=e.prevAll(".form:visible"),i=!(t.length>0);c(e,200302,13),i||t.first().before(e)}(e)}}function u(e,t){if(void 0===t){var i=e.prevAll(".form"),a=!(i.length>0);c(e,200302,11),a||i.last().before(e)}else Fai.top._undo.insertElem&&Fai.top._undo.insertElem({module:e,index:t+1})}function f(e){var t,i,a,o,n,l,d,s,r=$("#module"+e),u=$("#fk-webHeaderZone");return!!u.length&&(!!r.hasClass("formInZone")||(t=u.offset().left,i=u.offset().top,a=u.width(),o=u.height(),n=r.offset().left,l=r.offset().top,d=r.width(),s=r.height(),t<n&&i<l&&t+a>n+d&&i+o>l+s||void 0))}function c(e,t,i){Site.checkNestModule(e).inPopupZone&&Site.logDog(t,i)}},Site.moduleEditTool={},function(e,t,i){var a,o=[],n=(a={},{lock:function(e){a[e]=a[e]||{},a[e].lock=!0},open:function(e){a[e]=a[e]||{},delete a[e].lock},getStatus:function(e){var t=!1;return a[e]&&(t=a[e].status),t},getActivePart:function(e){var t=-1;return a[e]&&"part"in a[e]&&(t=a[e].part),t},isActive:function(e,t){a[e]=a[e]||{},a[e].lock||(a[e].status=!0,a[e].part="tool"==t?1:"dragBtn"==t?2:"resizeCancel"==t?3:"child"==t?4:0)},getContextMenu:function(e){return a[e]=a[e]||{},a[e].contextMenu||!1},getMultiModule:function(e){return a[e]=a[e]||{},a[e].multiModule||!1},isLeave:function(e){a[e]=a[e]||{},a[e].lock||(a[e].status=!1,delete a[e].part)},onContextMenu:function(e){a[e]=a[e]||{},a[e].contextMenu=!0},offContextMenu:function(e){a[e]=a[e]||{},a[e].contextMenu=!1},onMultiModule:function(e){a[e]=a[e]||{},a[e].multiModule=!0},offMultiModule:function(e){a[e]=a[e]||{},a[e].multiModule=!1},clearAll:function(e){delete a[e]}});function l(t){var i,a,o,l,d,s,r,u=t.id,h=t.toolList,v=h.length||0,b=0,S=[];if(!(h.length<0))if(Fai.top.$("#fk-moduleToolbar"+u).length>0)c(u,t);else{var M=Fai.top.$("#module"+u),C=p(M),J=Site.getModuleAttrPattern(u),I="",x=!1,y=Site.checkNestModule(M),E="",P="";if(" fk-moduleToolbar-v2 ",C.isFullmeasure?I=" fk-moduleToolbar-fullmeasure-v2 ":y.inPopupZone&&(I=" fk-showInPopupZone "),1===J.border.y&&1===J.bannerType&&1===J.contentBg.y&&(x=!0),S.push("<div id='fk-moduleToolbar"+u+"' class=' J_moduleToolbar  fk-moduleToolbar-v2 "+I+"'>"),C.isFullmeasure)for(b=0;b<v;b++)a=!0,(i=h[b]).statusScript&&-1==Fai.fkEval(i.statusScript)&&(a=!1),a&&(r=i.toolDisplay,o=i.evalScript,d=i.text||"",l=i.text||"",0!=b&&(E=" data-title-tip='"+l+"' "),"moduleLayerIconCarousel"==(s=i.toolClass||"")&&1==M.data("stopCarousel")&&(s="moduleLayerIconStop",d="自动轮播",l="自动轮播"),"toolIcon"==r&&(d="&nbsp;"),P="",1!=v&&0==b&&(P+="f-toolItemLine"),S.push("<div class='f-toolItem J_toolItem f-toolItem"+s+"  "+P+" '>"),S.push("<a class='f-title J_title' "+E+' onclick="'+o+';Site.removeAllEditLayer();return false;">'+d+"</a>"),S.push("</div>"));else for(b=0;b<v;b++)a=!0,(i=h[b]).statusScript&&-1==Fai.fkEval(i.statusScript)&&(a=!1),a&&(o=i.evalScript,l=i.text||"",s=i.iconClass||"",y.inPopupZone&&"bannerAndBorder"==s||(i.setTB&&a&&(x?(s="resetTB",l="显示外框",o="Site.oneKeySwitchModuleTB("+u+", false)"):(s="clearTB",l="隐藏外框",o="Site.oneKeySwitchModuleTB("+u+", true)")),P="",1!=v&&0==b&&(P+="f-toolItemLine"),"text"==s&&0!=b&&b<v-1&&(P+="f-toolItemLine"),(C.isTab||C.isTabPack)&&0==b&&(l=C.isTabY||C.isTabPackY?"编辑纵向标签":"编辑横向标签"),S.push("<div class='f-toolItem J_toolItem f-toolItem"+s+"  "+P+" '>"),M.parent().hasClass("fk-inBannerListZone")&&Fai.top._bannerV2Data.bl&&Fai.top._bannerV2Data.bl.length>1?S.push("<a class='f-title J_title' onclick=\""+o+";Site.bannerV2.stopBannerInterval();Site.removeAllEditLayer();return false;\"><span class='J_icon f-icon' data-title-tip='"+l+"' ></span><span class='f-icon f-onlyIcon' title='"+l+"'></span><span class='f-text'>"+l+"</span></a>"):S.push("<a class='f-title J_title' onclick=\""+o+";Site.removeAllEditLayer();return false;\"><span class='J_icon f-icon' data-title-tip='"+l+"' ></span><span class='f-icon f-onlyIcon' title='"+l+"'></span><span class='f-text'>"+l+"</span></a>"),S.push("</div>")));S.push("</div>"),Fai.top.$("body").append(S.join("")),c(u,t),function(t){var i=Fai.top.$("#fk-moduleToolbar"+t.id),a=Fai.top.$("#module"+t.id);i.off("mouseover.toolbar").off("mouseleave.toolbar").on("mouseover.toolbar",function(){var i,a=Fai.top.$("#module"+t.id),o=p(a),l=-1;o.inTabId>0?l=o.inTabId:o.inMulColId>0?l=o.inMulColId:o.inFullmeasureId>0?l=o.inFullmeasureId:o.inPackId>0?l=o.inPackId:o.inTabPackId>0&&(l=o.inTabPackId),T(t.id,"dragBtnMouseover"),T(t.id,"resizeCancelBtnMouseleave"),T(t.id,"leaveSideModule"),T(t.id,"leaveParentModule"),n.open(t.id),n.isActive(t.id,"tool"),_(t.id),f(t.id),a.parent().hasClass("fk-inBannerListZone")&&Fai.top._bannerV2Data.bl&&Fai.top._bannerV2Data.bl.length>1&&Site.bannerV2.stopBannerInterval(),l>0&&(n.open(l),n.isActive(l,"child"),n.lock(l),T(l,"leaveSideModule"),T(l,"leaveParentModule")),o.inFullmeasureId>0&&e("#module"+o.inFullmeasureId).data("mouseenter",!0),a.hasClass("formStyle80")&&a.data("mouseenter",!0),"2"==a.attr("_side")&&Site.stopFlutterInterval(a),l>0&&"2"==(i=Fai.top.$("#module"+l)).attr("_side")&&Site.stopFlutterInterval(i),T(t.id,"bindToolbarEvent_mouseleave"),T(t.id,"bindToolbarEvent_mouseover");var d=setTimeout(function(){n.getStatus(t.id)&&1==n.getActivePart(t.id)&&(g(t.id),k(t.id),l>0&&g(l))},300);F(t.id,"bindToolbarEvent_mouseover",d)}).on("mouseleave.toolbar",function(){var i=Fai.top.$("#module"+t.id),a=p(i),o=-1;a.inTabId>0?o=a.inTabId:a.inMulColId>0?o=a.inMulColId:a.inFullmeasureId>0?o=a.inFullmeasureId:a.inPackId>0?o=a.inPackId:a.inTabPackId>0&&(o=a.inTabPackId),o>0&&(n.open(o),n.isLeave(o)),a.inFullmeasureId>0&&e("#module"+a.inFullmeasureId).data("mouseenter",!1),i.hasClass("formStyle80")&&i.data("mouseenter",!1),n.open(t.id),n.isLeave(t.id),T(t.id,"bindToolbarEvent_mouseover"),T(t.id,"bindToolbarEvent_mouseleave");var l=setTimeout(function(){n.getStatus(t.id)||m(t)},300);F(t.id,"bindToolbarEvent_mouseleave",l)}),Site.simpleTip&&(p(a).isFullmeasure?Site.simpleTip(i.find(".J_title"),0,t.isDialog):Site.simpleTip(i.find(".J_icon"),0,t.isDialog))}(t)}}function d(e,t,i){var a=Site.getModuleStatus(e),o=Site.checkNestModule(t),n=i.find(".J_setting_btn_box"),l=Site.checkModuleInZone(t),d=Site.getModuleAttrPattern(e),s=!0,r=!0,u=!0;(2==a||o.inPack||l||o.inElemZone)&&(r=!1),(o.isPack||1==d.border.y&&1==d.bannerType&&1==d.contentBg.y)&&(s=!1),s&&r||(u=!1),r?(i.removeClass("fk-paddingMarginWrap-float"),n.find(".J_top_margin_btn").show(),n.find(".J_left_margin_btn").show(),n.find(".J_right_margin_btn").show(),n.find(".J_bottom_margin_btn").hide()):(i.addClass("fk-paddingMarginWrap-float"),n.find(".J_top_margin_btn").hide(),n.find(".J_left_margin_btn").hide(),n.find(".J_right_margin_btn").hide(),n.find(".J_bottom_margin_btn").hide()),s?(i.removeClass("fk-paddingMarginWrap-pack"),n.find(".J_top_padding_btn").hide(),n.find(".J_left_padding_btn").hide(),n.find(".J_right_padding_btn").hide(),n.find(".J_bottom_padding_btn").hide()):(i.addClass("fk-paddingMarginWrap-pack"),n.find(".J_top_padding_btn").hide(),n.find(".J_left_padding_btn").hide(),n.find(".J_right_padding_btn").hide(),n.find(".J_bottom_padding_btn").hide()),u?n.find(".J_bottom_height_btn").show():n.find(".J_bottom_height_btn").hide(),o.isCol||o.isPack||o.isTab||o.isTabPack?i.addClass("fk-paddingMarginWrap-multiM"):i.removeClass("fk-paddingMarginWrap-multiM")}function s(t,i){var a,o,n,l,d,s,r,u=Fai.top.$("#module"+t),f=u.find(">.J_paddingMarginWrap"),c=0,m=!1,p=0,g=0;f.length<1||(u.find(".J_left_area").css("top","0"),u.find(".J_right_area").css("top","0"),r=Site.getModuleAttrPattern(t).border,a=u.innerWidth(),o=u.innerHeight(),n=u.offset().top,s=e(window).height(),o>=300&&(n>0?(c=s-n)>=300&&(m=!0):(c=o+n)>=300&&(m=!0),c>s&&(c=s),c>o&&(c=o)),r&&0!=r.y&&(p=-1!=(p=u.css("border-top-width")).indexOf("px")?parseInt(p):0,g=-1!=(g=u.css("border-left-width")).indexOf("px")?parseInt(g):0),0!=i&&1!=i||f.find(".J_top_area").width(a),0!=i&&2!=i||(m?(f.find(".J_left_area").height(c),n<0?f.find(".J_left_area").css("top",-n+"px"):f.find(".J_left_area").css("top","0")):f.find(".J_left_area").height(o)),0!=i&&3!=i||(d=f.hasClass("fk-paddingMarginWrap-float")?u.offset().left+g-13:u.offset().left+g-10,f.find(".J_right_area").offset({left:a+d}),m?(f.find(".J_right_area").height(c),n<0?f.find(".J_right_area").css("top",-n+"px"):f.find(".J_right_area").css("top","0")):f.find(".J_right_area").height(o)),0!=i&&4!=i||(l=n+p-10,f.find(".J_bottom_area").width(a),f.find(".J_bottom_area").offset({top:o+l})))}function r(e,t){var i=Fai.top.$("#module"+e).find(">.J_paddingMarginWrap");i.length<1||(i.show(),i.find(".J_setting_btn_box").hide(),0!=t&&1!=t||i.find(".J_top_setting_btn").show(),0!=t&&2!=t||i.find(".J_left_setting_btn").show(),0!=t&&3!=t||i.find(".J_right_setting_btn").show(),0!=t&&4!=t||i.find(".J_bottom_setting_btn").show())}function u(e,t,i){var a,o,n,l,d,s;e.length<1||t.length<1||(a=e.offset().top,o=e.offset().left,1==i?(d=t.outerWidth(),t.offset({top:a,left:o-d-10})):2==i?(n=e.outerWidth(),t.offset({top:a,left:o+n+10})):3==i?(s=t.outerHeight(),t.offset({top:a-s-10,left:o})):4==i?(l=e.outerHeight(),t.offset({top:a+l+10,left:o})):5==i?(s=t.outerHeight(),n=e.outerWidth(),d=t.outerWidth(),t.offset({top:a-s-10,left:o+n-d})):6==i?(l=e.outerHeight(),n=e.outerWidth(),s=t.outerHeight(),d=t.outerWidth(),t.offset({top:a+l+10,left:o+n-d})):7==i?(l=e.outerHeight(),d=t.outerWidth(),s=t.outerHeight(),t.offset({top:a+l-s,left:o-d-10})):8==i?(l=e.outerHeight(),n=e.outerWidth(),s=t.outerHeight(),t.offset({top:a+l-s,left:o+n+10})):9==i&&(l=e.outerHeight(),n=e.outerWidth(),d=t.outerWidth(),t.offset({top:a+l+5,left:o-d/2+n/2})))}function f(e){var t=Fai.top.$("#module"+e);Site.addMoveFrame("module"+e),1==t.data("bottomLine")&&Fai.top.$("#module"+e+"moveFrameBottom").css({opacity:1}),1==t.data("topLine")&&Fai.top.$("#module"+e+"moveFrameTop").css({opacity:1}),1==t.data("leftLine")&&Fai.top.$("#module"+e+"moveFrameLeft").css({opacity:1}),1==t.data("rightLine")&&Fai.top.$("#module"+e+"moveFrameRight").css({opacity:1})}function c(t,i){var a=Fai.top.$("#fk-moduleToolbar"+t);if(!(a.length<0)){var o,n,l,d,s=Fai.top.$("#module"+t),r=p(s),u=Site.checkModuleInZone(s),f=s.outerWidth(),c=s.outerHeight(),m=s.offset(),g=m.left,h=m.top,v=g+f,b=Fai.top.$(".floatRightBottom").offset(),_=Fai.top.$(".floatLeftTop").offset(),S=b.left,k=(b.top,Fai.getScrollWidth()),M=Fai.top.$("#g_main").scrollTop(),F=a.outerWidth(),T=a.outerHeight(),C=0,J=0,I=!1;!function(t){var i,f,m,p="fk-multiDragBtn-left",b=_.top,x=0,y=0;t&&(b=0);(r.isMultiModule||r.isPack)&&(r.inMulCol||r.inTab||r.inTabPack)&&(i=document.createElement("div"),I=!0,void 0===i.style.borderRadius&&(p+=" fk-multiDragBtn-left-low",i=null));r.isTab&&!r.isTabY||r.isTabPack&&!r.isTabPackY?I?s.find(".J_tabHandle").addClass(p):s.find(".J_tabHandle").removeClass(p):r.isMulCol?I?s.find(".J_multiHandle").addClass(p):s.find(".J_multiHandle").removeClass(p):r.isPack&&(I?s.find(".J_packHandle").addClass(p):s.find(".J_packHandle").removeClass(p));(r.isTabY||r.isTabPackY)&&(s.find(".J_tabHandle").addClass(p),I=!0);J=h-T-4,C=I?g:v-F,(r.inPack||u)&&(u?o=s.parent():(o=Fai.top.$("#module"+r.inPackId),(m=o.find(".formBanner"+r.inPackId)).is(":visible")&&(x=m.height())),l=o.offset().left,d=o.offset().top+x,n=l+o.width(),d+o.height(),F+C>n&&(C=n-F),h<d&&(J=d-T-4));J<b&&(J=c<100?h+c+4:b);(r.isMultiModule||r.isPack)&&h+M<=b+T&&((f=s.find(">.J_dragHandle")).hasClass("fk-multiDragBtn-left")?C+=f.width():C-=f.width());C<0?C=0:C+F>S-k&&(C=S-F-k);r.isFullmeasure?(Fai.top.$("#J_WebRightBar").is(":visible")?(y=Fai.top.$("#J_WebRightBarList").outerWidth()+1,e(s).find(">.J_fullmeasureHandle").addClass("fk-fullmeasureDragBtn-rightbar")):(y=0,e(s).find(">.J_fullmeasureHandle").removeClass("fk-fullmeasureDragBtn-rightbar")),a.css({right:k+y+"px",top:J+"px"})):a.css({left:C+"px",top:J+"px"})}(i.isDialog)}}function m(e){var t,i,a,o,l=Fai.top.$("#module"+e.id),d=p(l),s=-1;d.inTabId>0?s=d.inTabId:d.inMulColId>0?s=d.inMulColId:d.inFullmeasureId>0?s=d.inFullmeasureId:d.inPackId>0?s=d.inPackId:d.inTabPackId>0&&(s=d.inTabPackId),C(e.id),a=e.id,Fai.top.$("#fk-moduleToolbar"+a).remove(),o=l,e.id,o.removeClass("fk-maxModuleZindex fk-hoverModule J_checkModuleZIndexDone"),o.parent(".forms").removeClass("fk-maxFormsZIndex"),g(e.id),k(e.id),n.getContextMenu(e.id)||Site.removeMoveFrame("module"+e.id),"2"==l.attr("_side")&&"true"!=l.attr("_flutterSwitch")?(Site.startFlutterInterval(l),n.clearAll(e.id)):"1"==l.attr("_side")?(T(e.id,"leaveSideModule"),t=setTimeout(function(){!n.getStatus(e.id)&&!n.getContextMenu(e.id)&&Fai.top.$(".fk-moduleContextMenu"+e.id).length<1&&Fai.top.$(".moduleMaskContainer").length<1&&(Site.reSetSidePosition(l),n.clearAll(e.id))},300),F(e.id,"leaveSideModule",t)):n.clearAll(e.id),s>0&&!n.getStatus(s)&&(T(s,"leaveParentModule"),i=setTimeout(function(){var t=p(Fai.top.$("#module"+e.id)),i=-1;t.inTabId>0?i=t.inTabId:t.inMulColId>0?i=t.inMulColId:t.inFullmeasureId>0?i=t.inFullmeasureId:t.inPackId>0?i=t.inPackId:t.inTabPackId>0&&(i=t.inTabPackId),t.inPackId>0&&1==Fai.top.$("#module"+i).attr("_side")||m({id:i})},300),F(s,"leaveParentModule",i))}function p(e){if("[object object]"!=Object.prototype.toString.call(e).toLowerCase())throw new Error("Site.moduleEditTool getModuleData 参数错误");var t,i,a,o,n,l=!1,d=!1,s=!1,r=!1,u=!1,f=!1,c=!1,m=!1,p=!1,g=!1,h=!1,v=!1,b=!1,_=!1;return e.hasClass("formStyle80")||e.hasClass("formStyle109")?l=!0:e.hasClass("formStyle35")?p=!0:e.hasClass("formStyle29")?(f=!0,e.hasClass("fk-formTabY")&&(c=!0)):e.hasClass("formStyle87")?b=!0:e.hasClass("formStyle110")&&(s=!0,e.hasClass("fk-formTabY")&&(r=!0)),(t=e.attr("_infullmeasure")||0)>0&&(d=!0),(a=e.attr("_intab")||0)>0&&(m=!0),(i=e.attr("_intabpack")||0)>0&&(u=!0),(o=e.attr("_inmulmcol")||0)>0&&(g=!0),(n=parseInt(e.attr("_inpack"))||0)>0&&(_=!0),(f||p||s)&&(h=!0),(m||g||u)&&(v=!0),{isFullmeasure:l,inFullmeasure:d,inFullmeasureId:t,isTab:f,isTabY:c,inTab:m,inTabId:a,isMulCol:p,inMulCol:g,inMulColId:o,isMultiModule:h,inMultiModule:v,isPack:b,inPack:_,inPackId:n,isTabPack:s,isTabPackY:r,inTabPack:u,inTabPackId:i}}function g(e){var t=Fai.top.$("#module"+e);if(!(t.length<1)){var i=p(t);i.isTab||i.isTabPack?t.find(".J_tabHandle").hide():i.isMulCol?t.find(".J_multiHandle").hide():i.isFullmeasure?t.find(".J_fullmeasureHandle").hide():i.isPack?t.find(".J_packHandle").hide():t.children(".draggableBtn").hide()}}function h(e){var t=Fai.top.$("#module"+e);if(!(t.length<1)){var i=p(t);i.isTab||i.isTabPack?t.find(".J_tabHandle").addClass("fk-halfHide"):i.isMulCol?t.find(".J_multiHandle").addClass("fk-halfHide"):i.isFullmeasure?t.find(".J_fullmeasureHandle").addClass("fk-halfHide"):i.isPack?t.find(".J_packHandle").addClass("fk-halfHide"):t.children(".draggableBtn").addClass("fk-halfHide")}}function v(e){var t=Fai.top.$("#module"+e);if(!(t.length<1)){var i=p(t);i.isTab||i.isTabPack?t.find(".J_tabHandle").stop().removeClass("fk-halfHide").show():i.isMulCol?t.find(".J_multiHandle").stop().removeClass("fk-halfHide").show():i.isFullmeasure?t.find(".J_fullmeasureHandle").stop().removeClass("fk-halfHide").show():i.isPack?t.find(".J_packHandle").stop().removeClass("fk-halfHide").show():t.children(".draggableBtn").stop().removeClass("fk-halfHide").show()}}function b(e,t){"number"==typeof t?Fai.top.$("#fk-moduleToolbar"+e).stop().fadeOut(t):Fai.top.$("#fk-moduleToolbar"+e).stop().hide()}function _(e){Fai.top.$("#fk-moduleToolbar"+e).stop().css("opacity",1).show()}function S(e){var t=Fai.top.$("#module"+e),i=t.children(".J_resizableTip");if(!(t.length<1)){if("none"==i.css("display")){t.children(".J_oper_btn_wrap").find(".ui-resizable-cancelTip").length>0&&Site.logDog(200728,1),t.children(".J_oper_btn_wrap").find(".J_fullwidth_btn").length>0&&Site.logDog(200728,3);var a=t.children(".J_oper_btn_wrap").find(".J_open_scrollbar_btn");a.length>0&&(a.hasClass("f_open_scrollbar_btn__opened")?Site.logDog(200728,7):Site.logDog(200728,9))}i.show()}}function k(e){var t=Fai.top.$("#module"+e),i=t.children(".J_resizableTip");t.length<1||i.hide()}function M(e){var t=Fai.top.$("#module"+e);t.length<1||t.children(".J_lockEditTip").hide()}function F(e,t,i){o[e]=o[e]||{},o[e][t]=i}function T(e,t){o[e]&&o[e][t]&&(clearTimeout(o[e][t]),delete o[e][t])}function C(e){var t;if(o[e]){for(t in o[e])o[e].hasOwnProperty(t)&&(clearTimeout(o[e][t]),delete o[e][t]);delete o[e]}}function J(e){var t=Fai.top.$("#module"+e),i=I(e),a=Site.checkNestModule(t);t.removeData("lockedit"),Site.removeMoveFrame("module"+e),Site.addMoveFrame("module"+e),t.removeClass("formLockEdit"),jzUtils.run({name:"_elemZone.selectToolOneZone",base:Fai.top},t),a.nest&&t.find(".form").removeData("lockedit").removeClass("formLockEdit"),a.inPack?jzUtils.run({name:"_elemZone.resizeZoneOneModule",base:Fai.top},t):(1==i?Site.dockModuleResize(t):Site.floatModuleDraggable(t),a.isPack&&jzUtils.run({name:"_elemZone.resizeOneZoneModule",base:Fai.top},t))}function I(e){var t=1,i="module"+e;return 0==Site.getFlutterStatus2(i)?t=4:0==Site.getSideStatus(i)?t=5:0==Site.getLockStatus(i)?t=3:0==Site.getAbsStatus(i)&&(t=2),t}t.init=function(i){if("[object object]"!=Object.prototype.toString.call(i).toLowerCase())throw new Error("Site.moduleEditTool.init 参数错误");var a,o=Fai.top.$("#module"+i.id);if(o.length<1)return i.moduleId=i.id,void Site.cacheModuleFunc.init("moduleEditTool.init",i);o.off("mousemove.moduleEdit").off("mouseleave.moduleEdit").off("mouseenter.moduleEdit").on("mousemove.moduleEdit",function(o){if("number"!=typeof a){var f=Site.hasPopupModuleOpen();if(Site.checkNestModule(e(this)).inPopupZone&&f&&!f.editing)return!1;if("fk-webHeaderZone"!==Site.checkNestModule(e(this)).realParentId||!e(".webHeaderFixed").length){a=setTimeout(function(){a=null},30),T(i.id,"leaveParentModule"),T(i.id,"leaveSideModule"),T(i.id,"bindToolbarEvent_mouseleave"),T(i.id,"initDrag"),T(i.id,"bindToolbarEvent_mouseover"),T(i.id,"initToolbar_mouseover"),n.isActive(i.id);var c=p(e(this)),m=-1;c.inTabId>0?m=c.inTabId:c.inMulColId>0?m=c.inMulColId:c.inFullmeasureId>0?m=c.inFullmeasureId:c.inPackId>0?m=c.inPackId:c.inTabPackId>0&&(m=c.inTabPackId),m>0&&(T(m,"leaveParentModule"),T(m,"leaveSideModule"),n.open(m),n.isActive(m,"child"),n.lock(m)),function(e){if(!Fai.isNull(Site._enableEditLayer)&&!Site._enableEditLayer)return void b(e.id);T(e.id,"initToolbar_mouseover");var t=setTimeout(function(){var t=Fai.top.$("#module"+e.id),i=p(t);n.getStatus(e.id)&&4!=n.getActivePart(e.id)?i.isMultiModule||i.isPack?n.getMultiModule(e.id)?(t.data("simpleText")||t.data("floatImg")||t.data("floatBtn")||(l(e),_(e.id),Fai.top._newUserGuide&&Site.newUserGuideForModule(Fai.top.$("#fk-moduleToolbar"+e.id),t)),e.id):(l(e),e.id,2!=n.getActivePart(e.id)&&1!=n.getActivePart(e.id)?b(e.id):Fai.top._newUserGuide&&Site.newUserGuideForModule(Fai.top.$("#fk-moduleToolbar"+e.id),t)):i.isPack||(t.data("simpleText")||t.data("floatImg")||t.data("floatBtn")||(l(e),_(e.id),Fai.top._newUserGuide&&Site.newUserGuideForModule(Fai.top.$("#fk-moduleToolbar"+e.id),t)),e.id):b(e.id)},100);F(e.id,"initToolbar_mouseover",t)}(i),function(e){if(!Fai.isNull(Site._enableEditLayer)&&!Site._enableEditLayer)return;var t=Fai.top.$("#module"+e.id),i=n.getActivePart(e.id),a=n.getStatus(e.id),o=1==i||2==i||3==i;a&&4!=i?(Site.removeMoveFrame("module"+e.id),Site.addMoveFrame("module"+e.id)):a&&!o&&Site.removeMoveFrame("module"+e.id);Site.refreshResizableHandles(t)}(i),function(t){if(!Fai.top._canDesign)return;if(!Fai.isNull(Site._enableEditLayer)&&!Site._enableEditLayer)return g(t.id),void(e("#module"+t.id).data("simpleText")&&e("#fkEditor-toolBar-"+t.id).css("display","none"));(function(t){var i=Fai.top.$("#module"+t);if(!(i.length<1)){var a=p(i),o=!1;if(a.isMultiModule||a.isFullmeasure||a.isPack){var l=document.createElement("div"),d="fk-multiDragBtn";void 0===l.style.borderRadius&&(d="fk-multiDragBtn-low",l=null),a.isMulCol&&i.find(".J_multiHandle").length<1?(i.append('<div class="J_dragHandle J_multiHandle '+d+'"></div>'),o=!0):(a.isTab||a.isTabPack)&&i.find(".J_tabHandle").length<1?((a.isTabY||a.isTabPackY)&&(d+=" fk-multiDragBtn-left "),i.append('<div class="J_dragHandle J_tabHandle '+d+'"></div>'),i.find(".formTabButton"),i.find(".formTab").addClass("column"),o=!0):a.isFullmeasure&&i.find(".J_fullmeasureHandle").length<1?(i.append('<div class="J_dragHandle J_fullmeasureHandle fk-fullmeasureDragBtn"></div>'),o=!0):a.isPack&&i.find(".J_packHandle").length<1&&(i.append('<div class="J_dragHandle J_packHandle f-packHandle '+d+'"></div>'),o=!0)}else{if(!(i.hasClass("formStyle18")||i.hasClass("formStyle36")||i.hasClass("formStyle17")||i.hasClass("formStyle20")||i.hasClass("formStyle72")||i.hasClass("formStyle111")))return;if(i.find(".formBanner").is(":visible"))return;if(i.children(".draggableBtn").find(".J_handle").length<1){var s=[],r=i.width()/2-30;s.push("<div class='J_dragHandle draggableBtn' _mouseIn='0' style='left:"+r+"px;'>"),s.push("<a href='javascript:;' onclick='return false;' class='J_handle dragHandle'></a>"),s.push("</div>"),i.append(s.join("")),function(e,t){return t.indexOf(parseInt(e.attr("_modulestyle")))>-1}(i,[20,72,18])&&(u(t,[2,3,4])?i.find(".J_dragHandle").off("mousedown.createMask").on(" mousedown.createMask",function(){i.removeData("isModuleDown"),f(i),i.data("isModuleDown",!0),c(i)}):u(t,[1])&&i.off("mousedown.createMask").on(" mousedown.createMask",function(){i.removeData("isModuleDown"),f(i),i.data("isModuleDown",!0),c(i)})),i.off("Fai_onModuleSizeChange.dragBtn").off("Fai_onModuleLayoutChange.dragBtn").on("Fai_onModuleSizeChange.dragBtn",function(){Site.fixDragBtnPos(e(this))}).on("Fai_onModuleLayoutChange.dragBtn",function(){Site.fixDragBtnPos(e(this))}),o=!0}}o?(Site.addDragBtnHandle(i),function(e){var t=Fai.top.$("#module"+e);if(!(t.length<1)){var i=p(t);(i.isTab||i.isTabPack?t.find(".J_tabHandle"):i.isMulCol?t.find(".J_multiHandle"):i.isFullmeasure?t.find(".J_fullmeasureHandle"):i.isPack?t.find(".J_packHandle"):t.children(".draggableBtn")).off("mouseover.moduleEdit").off("mouseleave.moduleEdit").on("mouseover.moduleEdit",function(t){n.isActive(e,"dragBtn"),n.lock(e),T(e,"dragBtnMouseover");var i=setTimeout(function(){var t=p(Fai.top.$("#module"+e));t.isMultiModule||t.isFullmeasure||t.isPack?(_(e),S(e)):2==n.getActivePart(e)&&(b(e,400),k(e)),T(e,"dragBtnMouseover")},300);F(e,"dragBtnMouseover",i)}).on("mouseleave.moduleEdit",function(t){n.open(e),n.isLeave(e),T(e,"dragBtnMouseover");var i=setTimeout(function(){n.getStatus(e)&&4!=n.getActivePart(e)&&(_(e),S(e))},100);F(e,"dragBtnMouseleave",i)})}}(t)):Site.fixDragBtnPos(i),v(t)}function u(e,t){var i=Site.getModuleStatus(e);return t.indexOf(i)>-1}function f(t){var i=t.find(".J_moduleTmpMask");0!==i.length&&(i.off("mousemove.removeMask mousedown.removeMask"),e("body").off("mouseup.changeFlag"),t.removeData("isModuleDown"),i.remove())}function c(t){var a=t.find(".J_moduleTmpMask");0===a.length&&((a=e("<div class='J_moduleTmpMask fk-moduleTmpMask'></div>")).off("mousemove.removeMask mousedown.removeMask").on("mousemove.removeMask mousedown.removeMask",function(){t.data("isModuleDown")||(f(t),t.find(".J_dragHandle").show())}),e("body").off("mouseup.changeFlag").on("mouseup.changeFlag",function(){var i=e("body");i.length>0&&(t.removeData("isModuleDown"),i.off("mouseup.changeFlag"))}),i.find("iframe").parent().append(a))}})(t.id),4==n.getActivePart(t.id)&&h(t.id)}(i),function(e){if(!Fai.top._canDesign)return;if(!Fai.isNull(Site._enableEditLayer)&&!Site._enableEditLayer)return void k(e.id);n.getStatus(e.id)&&4!=n.getActivePart(e.id)?(Fai.top.$("#module"+e.id).hasClass("formStyle85")||S(e.id),Fai.top.$("#module"+e.id).hasClass("formStyle98")||S(e.id)):k(e.id)}(i),function(e){if(!Fai.top._canDesign)return;if(function(e){var t=Fai.top.$("#module"+e);if(t.length<1)return;return"lock"!=t.data("lockedit")&&(t.children(".J_lockEditTip").remove(),!0)}(e.id))return;if(!Fai.isNull(Site._enableEditLayer)&&!Site._enableEditLayer)return void M(e.id);n.getStatus(e.id)&&4!=n.getActivePart(e.id)?function(e){var t=Fai.top.$("#module"+e);if(t.length<1)return;t.children(".J_lockEditTip").show()}(e.id):M(e.id)}(i),function(e){var t=Fai.top.$("#module"+e.id);if(!Fai.isNull(Site._enableEditLayer)&&!Site._enableEditLayer)return Site.removeMoveFrame("module"+e.id),void t.children(".ui-resizable-handle").hide();var i=n.getActivePart(e.id),a=n.getStatus(e.id),o=1==i||2==i||3==i;a&&4!=i?t.children(".ui-resizable-handle").removeClass("fk-childModuleHover").show():a&&4==i?t.children(".ui-resizable-handle").addClass("fk-childModuleHover").show():a&&!o&&t.children(".ui-resizable-handle").hide()}(i),Fai.top.moveBtnExecuting||Fai.top.mouseoverLine||i.isDialog||function(i){var a,o=Fai.top.$("#module"+i),n="";if(!Fai.top._designAuth)return;if(-1==function(e,t){var i=1,a=Site.getModuleStatus(t),o=Site.checkNestModule(e),n=Site.checkModuleInZone(e),l=Site.getModuleAttrPattern(t);(e.hasClass("formStyle81")||e.hasClass("formStyle86")||e.hasClass("formStyle79")||e.hasClass("formStyle82")||e.hasClass("formStyle97")||e.hasClass("formStyle45")||e.hasClass("formStyle39")||e.hasClass("formStyle62")||e.hasClass("formStyle66")||e.hasClass("formStyle65")||e.hasClass("formStyle105"))&&(i=-1);(o.inTab||o.inTabPack||o.inCol||o.isFullmeasure||o.isFullmeasurePack||o.isTab||o.isTabPack)&&(i=-1);3!=a&&4!=a&&5!=a||(i=-1);o.isPack&&2==a&&(i=-1);(2==a||o.inPack||n)&&1==l.border.y&&1==l.bannerType&&1==l.contentBg.y&&(!function(e){var t=Fai.top.$("#module"+e).find(">.J_paddingMarginWrap");t.length>0&&t.remove()}(t),i=-1);return i}(o,i))return;(a=o.find(">.J_paddingMarginWrap")).length<1?(n='<div class="fk-paddingMarginWrap J_paddingMarginWrap"><div class="top-area J_setting_area J_top_area" direction="top"><div class="top-line J_top_line"></div><div class="fk-top-setting-btn J_top_setting_btn J_setting_btn_box" style="display:none"><a class="fk-top-padding-btn J_top_padding_btn fk-setting-btn" ></a><a class="fk-top-margin-btn J_top_margin_btn fk-setting-btn" ></a></div></div><div class="left-area J_setting_area J_left_area" direction="left"><div class="left-line J_left_line"></div><div class="fk-left-setting-btn J_left_setting_btn J_setting_btn_box" style="display:none"><a class="fk-left-padding-btn J_left_padding_btn fk-setting-btn" ></a><a class="fk-left-margin-btn J_left_margin_btn fk-setting-btn" ></a></div></div><div class="right-area J_setting_area J_right_area" direction="right"><div class="right-line J_right_line"></div><div class="fk-right-setting-btn J_right_setting_btn J_setting_btn_box" style="display:none"><a class="fk-right-padding-btn J_right_padding_btn fk-setting-btn" ></a><a class="fk-right-margin-btn J_right_margin_btn fk-setting-btn" ></a></div></div><div class="bottom-area J_setting_area J_bottom_area" direction="bottom"><div class="bottom-line J_bottom_line"></div><div class="fk-bottom-setting-btn J_bottom_setting_btn J_setting_btn_box" style="display:none"><a class="fk-bottom-padding-btn J_bottom_padding_btn fk-setting-btn" ></a><a class="fk-module-height-btn J_bottom_height_btn" ></a><a class="fk-bottom-margin-btn J_bottom_margin_btn fk-setting-btn" ></a></div></div></div>',o.append(n),a=o.find(">.J_paddingMarginWrap"),d(i,o,a),s(i,0),function(i){var a,o,n,l,d,f,c,m,p,g,h,v,b,_,S=e("#module"+i),k=Site.getModuleAttrPattern(i),M=S.find(">.J_paddingMarginWrap"),F=M.find(".J_setting_area"),T=Fai.top.$("#dockTip");T.length<1&&(T=e("<div id='dockTip' class='resizableToShowWidth dockTip'></div>"),Fai.top.$("body").append(T));S.children(".ui-resizable-s").off("mouseenter.btn").on("mouseenter.btn",function(){Fai.top.moveBtnExecuting||(r(i,4),Fai.top.mouseoverLine=!0)}),S.children(".ui-resizable-n").off("mouseenter.btn").on("mouseenter.btn",function(){Fai.top.moveBtnExecuting||(r(i,1),Fai.top.mouseoverLine=!0)}),S.children(".ui-resizable-w").off("mouseenter.btn").on("mouseenter.btn",function(){Fai.top.moveBtnExecuting||(r(i,2),Fai.top.mouseoverLine=!0)}),S.children(".ui-resizable-e").off("mouseenter.btn").on("mouseenter.btn",function(){Fai.top.moveBtnExecuting||(r(i,3),Fai.top.mouseoverLine=!0)}),F.off("mouseover.btn").on("mouseover.btn",function(t){if(Site._enableEditLayer){var a=e(this).attr("direction"),o=e(t.target);Fai.top.moveBtnExecuting||(Fai.top.mouseoverLine=!0,"top"==a?r(i,1):"left"==a?r(i,2):"right"==a?r(i,3):"bottom"==a&&r(i,4),o.hasClass("J_bottom_padding_btn")?(T.hide(),clearTimeout(Fai.top.isShowTipTime),Fai.top.isShowTipTime=setTimeout(function(){T.show().text("拖动可调整下内边距"),u(o.parent(),T,7)},200)):o.hasClass("J_bottom_margin_btn")?(T.hide(),clearTimeout(Fai.top.isShowTipTime),Fai.top.isShowTipTime=setTimeout(function(){T.show().text("拖动可调整下外边距"),u(o.parent(),T,8)},200)):o.hasClass("J_top_padding_btn")?(T.hide(),clearTimeout(Fai.top.isShowTipTime),Fai.top.isShowTipTime=setTimeout(function(){T.show().text("拖动可调整上内边距"),u(o.parent(),T,1)},200)):o.hasClass("J_top_margin_btn")?(T.hide(),clearTimeout(Fai.top.isShowTipTime),Fai.top.isShowTipTime=setTimeout(function(){T.show().text("拖动可调整上外边距"),u(o.parent(),T,2)},200)):o.hasClass("J_left_padding_btn")?(T.hide(),clearTimeout(Fai.top.isShowTipTime),Fai.top.isShowTipTime=setTimeout(function(){T.show().text("拖动可调整左内边距"),u(o.parent(),T,3)},200)):o.hasClass("J_left_margin_btn")?(T.hide(),clearTimeout(Fai.top.isShowTipTime),Fai.top.isShowTipTime=setTimeout(function(){T.show().text("拖动可调整左外边距"),u(o.parent(),T,4)},200)):o.hasClass("J_right_padding_btn")?(T.hide(),clearTimeout(Fai.top.isShowTipTime),Fai.top.isShowTipTime=setTimeout(function(){T.show().text("拖动可调整右内边距"),u(o.parent(),T,5)},200)):o.hasClass("J_right_margin_btn")?(T.hide(),clearTimeout(Fai.top.isShowTipTime),Fai.top.isShowTipTime=setTimeout(function(){T.show().text("拖动可调整右外边距"),u(o.parent(),T,6)},200)):o.hasClass("J_bottom_height_btn")&&(T.hide(),clearTimeout(Fai.top.isShowTipTime),Fai.top.isShowTipTime=setTimeout(function(){u(S,T,9)},200)))}}).off("mouseleave.btn").on("mouseleave.btn",function(){Site._enableEditLayer&&(Fai.top.moveBtnExecuting||(T.hide(),clearTimeout(Fai.top.isShowTipTime),Fai.top.mouseoverLine=!1))}),S.off("mouseleave.PMbtn").on("mouseleave.PMbtn",function(){Fai.top.moveBtnExecuting||(Fai.top.mouseoverLine=!1,t.hidePaddingMarginWrap(i))}),Fai.top.$("#g_main").off("scroll.forDockTip").on("scroll.forDockTip",function(){Fai.top.moveBtnExecuting||T.hide()});var C=null;M.find(".J_top_padding_btn").draggable("destroy").draggable({handle:".J_top_padding_btn",axis:"y",revert:!0,helper:function(){return e('<div class="fk-paddingLine J_paddingMarginLine"></div>')},start:function(t,o){Fai.top.moveBtnExecuting=!0,e(this).parent().show(),T.show(),P(1),Site.disableEditLayer(),e(this).addClass("fk-top-padding-selected"),a=o.offset.top,n=parseInt(S.find(".formMiddleContent"+i).css("margin-top").replace("px","")),C=n},drag:function(t,o){var l=o.offset.top-a+n;y(2,l),u(e(this).parent(),T,1),s(i,0)},stop:function(t,a){e(this).removeClass("fk-top-padding-selected"),T.hide(),e(this).parent().hide(),Fai.top.moveBtnExecuting=!1,Fai.top.mouseoverLine=!1,P(0),Site.enableEditLayer(),E(),w(i,1);var o=parseInt(S.find(".formMiddleContent"+i).css("margin-top").replace("px",""));null===C||isNaN(o)||(Site.undoRun(y,{type:"module.paddingDrag",detail:"modulePaddingTopDrag",undoArgs:[2,C],redoArgs:[2,o]}),C=o=null)}}),M.find(".J_top_margin_btn").draggable("destroy").draggable({handle:".J_top_margin_btn",axis:"y",revert:!0,helper:function(){return e('<div class="fk-MarginLine J_paddingMarginLine"></div>')},start:function(t,i){Fai.top.moveBtnExecuting=!0,e(this).parent().show(),T.show(),P(1),Site.disableEditLayer(),e(this).addClass("fk-top-margin-selected"),a=i.offset.top,o=parseInt(S.css("margin-top").replace("px","")),C=o},drag:function(t,i){var n=i.offset.top-a+o;x(2,n),u(e(this).parent(),T,2)},stop:function(t,i){e(this).removeClass("fk-top-margin-selected"),T.hide(),e(this).parent().hide(),Fai.top.moveBtnExecuting=!1,Fai.top.mouseoverLine=!1,P(0),Site.enableEditLayer(),E(),Site.logDog(100045,47);var a=parseInt(S.css("margin-top").replace("px",""));null===C||isNaN(a)||(Site.undoRun(x,{type:"module.marginDrag",detail:"moduleMarginTopDrag",undoArgs:[2,C],redoArgs:[2,a]}),C=a=null)}}),M.find(".J_left_padding_btn").draggable("destroy").draggable({handle:".J_left_padding_btn",axis:"x",revert:!0,helper:function(){return e('<div class="fk-MarginLine J_paddingMarginLine"></div>')},start:function(t,a){Fai.top.moveBtnExecuting=!0,e(this).parent().show(),T.show(),P(1),Site.disableEditLayer(),e(this).addClass("fk-left-padding-selected"),l=a.offset.left,f=parseInt(S.find(".formMiddleContent"+i).css("margin-left").replace("px","")),C=f},drag:function(t,a){var o=a.offset.left-l+f;y(0,o),u(e(this).parent(),T,3),s(i,4)},stop:function(t,a){e(this).removeClass("fk-left-padding-selected"),T.hide(),e(this).parent().hide(),Fai.top.moveBtnExecuting=!1,Fai.top.mouseoverLine=!1,P(0),Site.enableEditLayer(),E(),w(i,2);var o=parseInt(S.find(".formMiddleContent"+i).css("margin-left").replace("px",""));null===C||isNaN(o)||(Site.undoRun(y,{type:"module.paddingDrag",detail:"modulePaddingLeftDrag",undoArgs:[0,C],redoArgs:[0,o]}),C=o=null)}}),M.find(".J_left_margin_btn").draggable("destroy").draggable({handle:".J_left_margin_btn",axis:"x",revert:!0,helper:function(){return e('<div class="fk-MarginLine J_paddingMarginLine"></div>')},start:function(t,i){Fai.top.moveBtnExecuting=!0,e(this).parent().show(),T.show(),P(1),Site.disableEditLayer(),e(this).addClass("fk-left-margin-selected"),l=i.offset.left,d=parseInt(S.css("margin-left").replace("px","")),C=d},drag:function(t,a){var o=a.offset.left-l+d;x(0,o),u(e(this).parent(),T,4),s(i,3)},stop:function(t,i){e(this).removeClass("fk-left-margin-selected"),T.hide(),e(this).parent().hide(),Fai.top.moveBtnExecuting=!1,Fai.top.mouseoverLine=!1,P(0),Site.enableEditLayer(),E(),Site.logDog(100045,49);var a=parseInt(S.css("margin-left").replace("px",""));null===C||isNaN(a)||(Site.undoRun(x,{type:"module.marginDrag",detail:"moduleMarginLeftDrag",undoArgs:[0,C],redoArgs:[0,a]}),C=a=null)}}),M.find(".J_right_padding_btn").draggable("destroy").draggable({handle:".J_right_padding_btn",axis:"x",revert:!0,helper:function(){return e('<div class="fk-MarginLine J_paddingMarginLine"></div>')},start:function(t,a){Fai.top.moveBtnExecuting=!0,e(this).parent().show(),T.show(),P(1),Site.disableEditLayer(),e(this).addClass("fk-right-padding-selected"),c=a.offset.left,p=parseInt(S.find(".formMiddleContent"+i).css("margin-right").replace("px","")),C=p},drag:function(t,a){var o=c-a.offset.left+p;y(1,o),u(e(this).parent(),T,5),s(i,4)},stop:function(t,a){e(this).removeClass("fk-right-padding-selected"),T.hide(),e(this).parent().hide(),Fai.top.moveBtnExecuting=!1,Fai.top.mouseoverLine=!1,P(0),Site.enableEditLayer(),E(),w(i,3);var o=parseInt(S.find(".formMiddleContent"+i).css("margin-right").replace("px",""));null===C||isNaN(o)||(Site.undoRun(y,{type:"module.paddingDrag",detail:"modulePaddingRightDrag",undoArgs:[1,C],redoArgs:[1,o]}),C=o=null)}}),M.find(".J_right_margin_btn").draggable("destroy").draggable({handle:".J_right_margin_btn",axis:"x",revert:!0,helper:function(){return e('<div class="fk-MarginLine J_paddingMarginLine"></div>')},start:function(t,i){Fai.top.moveBtnExecuting=!0,e(this).parent().show(),T.show(),P(1),Site.disableEditLayer(),e(this).addClass("fk-right-margin-selected"),c=i.offset.left,m=parseInt(S.css("margin-right").replace("px","")),C=m},drag:function(t,a){var o=c-a.offset.left+m;x(1,o),u(e(this).parent(),T,6),s(i,0)},stop:function(t,i){e(this).removeClass("fk-right-margin-selected"),T.hide(),e(this).parent().hide(),Fai.top.moveBtnExecuting=!1,Fai.top.mouseoverLine=!1,P(0),Site.enableEditLayer(),E(),Site.logDog(100045,50);var a=parseInt(S.css("margin-right").replace("px",""));null===C||isNaN(a)||(Site.undoRun(x,{type:"module.marginDrag",detail:"moduleMarginRightDrag",undoArgs:[1,C],redoArgs:[1,a]}),C=a=null)}}),M.find(".J_bottom_padding_btn").draggable("destroy").draggable({handle:".J_bottom_padding_btn",axis:"y",revert:!0,helper:function(){return e('<div class="fk-MarginLine J_paddingMarginLine"></div>')},start:function(t,a){Fai.top.moveBtnExecuting=!0,e(this).parent().show(),T.show(),P(1),Site.disableEditLayer(),e(this).addClass("fk-bottom-padding-selected"),g=a.offset.top,v=parseInt(S.find(".formMiddleContent"+i).css("margin-bottom").replace("px","")),C=v},drag:function(t,a){var o=a.offset.top-g+v;y(3,o),u(e(this).parent(),T,7),s(i,0)},stop:function(t,a){e(this).removeClass("fk-bottom-padding-selected"),T.hide(),e(this).parent().hide(),Fai.top.moveBtnExecuting=!1,Fai.top.mouseoverLine=!1,P(0),Site.enableEditLayer(),E(),w(i,4);var o=parseInt(S.find(".formMiddleContent"+i).css("margin-bottom").replace("px",""));null===C||isNaN(o)||(Site.undoRun(y,{type:"module.marginDrag",detail:"modulemarginBottomDrag",undoArgs:[3,C],redoArgs:[3,o]}),C=o=null)}}),M.find(".J_bottom_margin_btn").draggable("destroy").draggable({handle:".J_bottom_margin_btn",axis:"y",revert:!0,helper:function(){return e('<div class="fk-MarginLine J_paddingMarginLine"></div>')},start:function(t,i){Fai.top.moveBtnExecuting=!0,e(this).parent().show(),T.show(),P(1),Site.disableEditLayer(),e(this).addClass("fk-bottom-margin-selected"),g=i.offset.top,h=parseInt(S.css("margin-bottom").replace("px","")),C=h},drag:function(t,i){var a=i.offset.top-g+h;x(3,a),u(e(this).parent(),T,8)},stop:function(t,i){e(this).removeClass("fk-bottom-margin-selected"),T.hide(),e(this).parent().hide(),Fai.top.moveBtnExecuting=!1,Fai.top.mouseoverLine=!1,P(0),Site.enableEditLayer(),E(),Site.logDog(100045,48);var a=parseInt(S.css("margin-bottom").replace("px",""));null===C||isNaN(a)||(Site.undoRun(x,{type:"module.marginDrag",detail:"modulemarginBottomDrag",undoArgs:[3,C],redoArgs:[3,a]}),C=a=null)}});var J=null;function I(e,t){var i=Fai.top.$("#module"+e);i.css("height",height+"px"),s(e,0),Site.refreshModuleHeightForStop(i,e)}function x(e,t){var a,o,n,l=parseInt(S.parent().outerWidth()/2),d=k.outside;if(d.y=1,Site.setModuleStyleCss(i,"","padding","0px"),0==e){if(t<-500)return;t>=-500&&t<0&&(t=0),void 0===d.r&&(d.r=0),(o=parseInt(S.css("margin-right")))!=d.r&&(d.r=o),n=l-d.r,t>n&&(t=n),d.l=t,0==t?T.html("左外边距 : "+t+"<br>外边距不支持拖动负值，请往右拖"):t==n?T.html("左外边距 : "+t+"<br>左右外边距的和，不能超过"+l+"px"):T.text("左外边距 : "+t),Site.setModuleStyleCss(i,"","margin-left",t+"px")}else if(1==e){if(t<-500)return;t>=-500&&t<0&&(t=0),void 0===d.l&&(d.l=0),(a=parseInt(S.css("margin-left")))!=d.l&&(d.l=a),n=l-d.l,t>n&&(t=n),d.r=t,0==t?T.html("右外边距 : "+t+"<br>外边距不支持拖动负值，请往左拖"):t==n?T.html("右外边距 : "+t+"<br>左右外边距的和，不能超过"+l+"px"):T.text("右外边距 : "+t),Site.setModuleStyleCss(i,"","margin-right",t+"px")}else if(2==e){if(t<-500)return;t>=-500&&t<0&&(t=0),t>1e3&&(t=1e3),d.t=t,0==t?T.html("上外边距 : "+t+"<br>外边距不支持拖动负值，请往下拖"):1e3==t?T.html("上外边距 : "+t+"<br>拖动范围为小于1000的数值"):T.text("上外边距 : "+t),Site.setModuleStyleCss(i,"","margin-top",t+"px")}else if(3==e){if(t<-500)return;t>=-500&&t<0&&(t=0),t>1e3&&(t=1e3),d.b=t,0==t?T.html("下外边距 : "+t+"<br>外边距不支持拖动负值，请往下拖"):1e3==t?T.html("下外边距 : "+t+"<br>拖动范围为小于1000的数值"):T.text("下外边距 : "+t),Site.setModuleStyleCss(i,"","margin-bottom",t+"px")}Site.refreshModuleHeight(i)}function y(e,t){var a,o=k.inner,n=parseInt(S.outerWidth()/2);o.y=1,Site.setModuleStyleCss(i,".formMiddleContent"+i,"padding","0px"),0==e?(t<-100&&(t=-100),void 0===o.r&&(o.r=0),a=n-o.r,t>a&&(t=a),o.l=t,-100==t?T.html("左内边距 : "+t+"<br>拖动范围为大于等于-100的数值"):t==a?T.html("左内边距 : "+t+"<br>左右内边距的和，不能超过"+n+"px"):T.text("左内边距 : "+t),S.hasClass("formStyle76")?Site.setModuleStyleCss(i,".formMiddleContent"+i+" .p_m_cotainer","padding-left",t+"px"):Site.setModuleStyleCss(i,".formMiddleContent"+i,"margin-left",t+"px")):1==e?(t<-100&&(t=-100),void 0===o.l&&(o.l=0),a=n-o.l,t>a&&(t=a),o.r=t,-100==t?T.html("右内边距 : "+t+"<br>拖动范围为大于等于-100的数值"):t==a?T.html("右内边距 : "+t+"<br>左右内边距的和，不能超过"+n+"px"):T.text("右内边距 : "+t),S.hasClass("formStyle76")?Site.setModuleStyleCss(i,".formMiddleContent"+i+" .p_m_cotainer","padding-right",t+"px"):Site.setModuleStyleCss(i,".formMiddleContent"+i,"margin-right",t+"px")):2==e?((t<-100||t>=1e3)&&(t=t<-100?-100:999),o.t=t,-100==t||999==t?T.html("上内边距 : "+t+"<br>拖动范围为大于等于-100，小于1000的数值"):T.text("上内边距 : "+t),Site.setModuleStyleCss(i,".formMiddleContent"+i,"margin-top",t+"px")):3==e&&((t<-100||t>=1e3)&&(t=t<-100?-100:999),o.b=t,-100==t||999==t?T.html("下内边距 : "+t+"<br>拖动范围为大于等于-100，小于1000的数值"):T.text("下内边距 : "+t),Site.setModuleStyleCss(i,".formMiddleContent"+i,"margin-bottom",t+"px")),Site.refreshModuleHeight(i)}function E(){k.changed=!0,Site.styleChanged()}function P(e){1==e?S.addClass("form-for-paddingMargin-wrap"):S.removeClass("form-for-paddingMargin-wrap")}function w(e,t){var i=Site.getModuleStatus(e);if(2==i)switch(t){case 1:Site.logDog(100045,55);break;case 2:Site.logDog(100045,57);break;case 3:Site.logDog(100045,58);break;case 4:Site.logDog(100045,56)}else if(1==i)switch(t){case 1:Site.logDog(100045,51);break;case 2:Site.logDog(100045,53);break;case 3:Site.logDog(100045,54);break;case 4:Site.logDog(100045,52)}}M.find(".J_bottom_height_btn").draggable("destroy").draggable({handle:".J_bottom_height_btn",axis:"y",revert:!0,helper:function(){return e('<div class="fk-MarginLine J_paddingMarginLine"></div>')},start:function(t,i){Fai.top.moveBtnExecuting=!0,e(this).addClass("fk-module-height-selected"),e(this).parent().show(),T.show(),P(1),Site.disableEditLayer(),b=i.offset.top,_=parseInt(S.css("height").replace("px","")),S.attr("_autoheight",0),C=_},drag:function(e,t){if("number"!=typeof J){J=setTimeout(function(){J=null},60);var a=t.offset.top-b+_;a<0||a>2e3||(a>=0&&a<10&&(a=10),S.css("height",a+"px"),T.text("高度 : "+a),u(S,T,9),Site.refreshModuleHeightForStop(S,i))}},stop:function(t,a){e(this).removeClass("fk-module-height-selected"),T.hide(),e(this).parent().hide(),Fai.top.moveBtnExecuting=!1,Fai.top.mouseoverLine=!1,P(0),Site.enableEditLayer(),E(),Site.logDog(100045,59);var o=parseInt(S.css("height").replace("px",""));null===C||isNaN(o)||(Site.undoRun(I,{type:"module.heightDrag",detail:"moduleHeightBottomDrag",undoArgs:[i,C],redoArgs:[i,o]}),C=o=null)}})}(i)):(a.find(".J_setting_btn_box").hide(),d(i,o,a),s(i,0))}(i.id)}}}).on("mouseleave.moduleEdit",function(t){T(i.id,"leaveParentModule"),T(i.id,"leaveSideModule"),T(i.id,"bindToolbarEvent_mouseleave"),n.isLeave(i.id);var a=p(e(this)),o=-1;a.inTabId>0?o=a.inTabId:a.inMulColId>0?o=a.inMulColId:a.inFullmeasureId>0?o=a.inFullmeasureId:a.inPackId>0?o=a.inPackId:a.inTabPackId>0&&(o=a.inTabPackId),o>0&&(T(o,"leaveParentModule"),T(o,"leaveSideModule"),n.open(o),n.isLeave(o)),function(e){T(e.id,"initToolbar_mouseleave");var t=setTimeout(function(){Fai.top.$("#module"+e.id);n.getStatus(e.id)||b(e.id)},100);F(e.id,"initToolbar_mouseleave",t)}(i),function(e){Fai.top.$("#module"+e.id);var t=n.getActivePart(e.id);n.getStatus(e.id);1==t||2==t||3==t?f(e.id):Site.removeMoveFrame("module"+e.id)}(i),function(e){T(e.id,"initDrag");var t=setTimeout(function(){n.getStatus(e.id)?4==n.getActivePart(e.id)&&h(e.id):g(e.id)},100);F(e.id,"initDrag",t)}(i),function(e){T(e.id,"initResizeCancel_mouseleave");var t=setTimeout(function(){!n.getStatus(e.id)&&k(e.id)},100);F(e.id,"initResizeCancel_mouseleave",t)}(i),function(e){setTimeout(function(){!n.getStatus(e.id)&&M(e.id)},100)}(i),T(i.id,"moduleEditMouseleave");var l=setTimeout(function(){n.getStatus(i.id)||m(i)},300);F(i.id,"moduleEditMouseleave",l)}).on("mouseenter.moduleEdit",function(){T(i.id,"moduleEditMouseleave")}),function(e){var t=Fai.top.$("#module"+e.id);if(t.length<1)return;var i=p(t);i.isMulCol||i.isPack?t.find(".formBanner"+e.id).off("mouseover.moduleEdit").off("mouseleave.moduleEdit").on("mouseover.moduleEdit",function(){n.onMultiModule(e.id)}).on("mouseleave.moduleEdit",function(){n.offMultiModule(e.id)}):(i.isTab||i.isTabPack)&&t.find(".titleTable").off("mouseover.moduleEdit").off("mouseleave.moduleEdit").on("mouseover.moduleEdit",function(){n.onMultiModule(e.id)}).on("mouseleave.moduleEdit",function(){n.offMultiModule(e.id)})}(i),function(e){Fai.top.$("#module"+e.id).delegate(".J_resizableTip","mouseover.resizeCancelBtn",function(){n.isActive(e.id,"resizeCancel"),n.lock(e.id),T(e.id,"resizeCancelBtnMouseover"),T(e.id,"resizeCancelBtnMouseleave");var t=setTimeout(function(){3==n.getActivePart(e.id)&&(g(e.id),b(e.id,400))},300);F(e.id,"resizeCancelBtnMouseover",t)}).delegate(".J_resizableTip","mouseleave.resizeCancelBtn",function(){n.open(e.id),n.isLeave(e.id),T(e.id,"resizeCancelBtnMouseover"),T(e.id,"resizeCancelBtnMouseleave");var t=setTimeout(function(){n.getStatus(e.id)&&4!=n.getActivePart(e.id)&&(_(e.id),v(e.id))},100);F(e.id,"resizeCancelBtnMouseleave",t)})}(i),Fai.top._canDesign||Site.removeDesignEditLayer(),Fai.top._canEditData||Site.removeAllDataEditLayer()},t.destroy=function(i){var a=Fai.top.$("#module"+i);a.length<1||(a.off("mousemove.moduleEdit").off("mouseleave.moduleEdit").off("mouseenter.floatFutterBorder").off("mouseleave.floatFutterBorder"),a.hasClass("formStyle86")&&a.off("mouseenter.editLine").off("mouseleave.editLine"),a.find(".J_paddingMarginWrap").remove(),e("#fk-moduleToolbar"+i).remove(),t.remove(i))},t.remove=function(e){m({id:e})},t.contextMenu=function(e,t){var i=p(Fai.top.$("#module"+e)),a=-1;i.inTabId>0?a=i.inTabId:i.inMulColId>0?a=i.inMulColId:i.inFullmeasureId>0?a=i.inFullmeasureId:i.inPackId>0?a=i.inPackId:i.inTabPackId>0&&(a=i.inTabPackId),t?n.onContextMenu(e):n.offContextMenu(e),C(e),a>0&&(t?n.onContextMenu(a):n.offContextMenu(a),C(a))},t.lockEdit=function(e){!function(e){var t=Fai.top.$("#module"+e),i=I(e),a=Site.checkNestModule(t);t.data("lockedit","lock"),Site.removeMoveFrame("module"+e),Site.addMoveFrame("module"+e),t.addClass("formLockEdit"),jzUtils.run({name:"_elemZone.destroySelectToolOneZone",base:Fai.top},t),a.nest&&t.find(".form").data("lockedit","lock").addClass("formLockEdit");a.inPack?(t.resizable("destroy"),t.children(".ui-resizable-cancelTip").remove()):1==i?Site.dockModuleResize_disable(t):(t.draggable("destroy"),t.resizable("destroy"),t.children(".ui-resizable-cancelTip").remove());a.isPack&&jzUtils.run({name:"_elemZone.packChildrenDisableResizable",base:Fai.top},t);t.append("<a href='javascript:;' onclick='Site.moduleEditTool.clickForOpenEdit("+e+");return false;' class='J_lockEditTip fk-setEditTip fk-lockEditTip' title='解锁当前排版'></a>")}(e)},t.openEdit=function(e){J(e)},t.clickForOpenEdit=function(e){J(e),Fai.top.$("#module"+e).children(".J_lockEditTip").addClass("fk-openEditTip").removeClass("fk-lockEditTip").removeAttr("onclick")},t.hidePaddingMarginWrap=function(e){var t=Fai.top.$("#module"+e).find(">.J_paddingMarginWrap");t.length<1||t.find(".J_setting_btn_box").hide()}}(jQuery,Site.moduleEditTool);