Site.bookingSubmitPanel={},function(t,e,i){var n,a=0,s=480,o=540,l=0,c=0,d={},p="",u="#module44",r=[],m=Fai.isIE6()||Fai.isIE7()||Fai.isIE8(),h=[],f={};e.dom={};var v=2052==Fai.top._lcid||1028==Fai.top._lcid;function _(){var i=[];if(f.bookingOpen){var n=d.verticalShowType,a=l-110;i.push('<div class="tableWrap" id="tableWrap" style="height:'+a+'px">'),n?function(e){e.push('\t<table class="bookingSubmitPanel_table vertical" cellpadding="0" cellspacing="0">'),e.push("\t\t<tbody>"),t.each(f.contentList,function(t,i){if(i.hide)return!0;e.push('\t\t<tr _contentId="'+i.id+'" _type="'+i.type+'">'),e.push('\t\t\t<td class="column1">'),""==i.headline?e.push('\t\t\t\t<div class="itemName" title="'+Fai.encodeHtml(i.name)+'">'+Fai.encodeHtml(i.name)+"</div>"):e.push('\t\t\t\t<div class="itemName" title="'+Fai.encodeHtml(i.headline)+'">'+Fai.encodeHtml(i.headline)+"</div>"),e.push('\t\t\t\t<div class="itemInput">'),e.push(g(i)),i.must&&5!=i.type?e.push('\t\t<span class="inputMust">*</span>'):e.push(""),e.push("\t\t\t\t</div>"),e.push("\t\t\t</td>"),e.push("\t\t</tr>")}),f.validation&&(e.push('\t\t<tr _validationTr="true">'),e.push('\t\t\t<td class="column1">'),e.push('\t\t\t\t<div class="itemName">'+LS.loginDialogCaptcha+"</div>"),e.push('\t\t\t\t<div class="itemInput">'),e.push('\t\t\t\t\t<div class="validateInputAndCode">'),e.push('\t\t\t\t\t\t\t<input id="bookingVolidationCode" class="voteCodeInputText" type="text" maxlength="4"/>'),e.push('\t\t\t\t\t\t\t<img alt="" class="voteCodePic" onclick="Site.changeCaptchaImg(this, 3)" title="'+LS.msgBoradChageValidateCode+'" id="memberCaptchaImg" src="validateCode.jsp?validateCodeRegType=3&Math.random()*1000">'),e.push("\t\t\t\t\t</div>"),e.push('\t\t\t\t\t<span class="inputMust">*</span>'),e.push("\t\t\t\t</div>"),e.push("\t\t\t</td>"),e.push("\t\t</tr>"));e.push('\t\t\t<tr _submitTr="true">'),e.push('\t\t\t\t<td class="column1">'),e.push('\t\t\t\t\t<div class="itemInput">'),e.push('\t\t\t\t\t\t<div class="addButtonshowType" id="bookingSubmitBtn">'),e.push('\t\t\t\t\t\t\t<div class="s_ibutton s_ibutton'+d[f.Def_BookingSubmit_BTN_STYLE]+'" type="botton" >'),e.push('\t\t\t\t\t\t\t\t<div class="left"></div>'),e.push('\t\t\t\t\t\t\t\t<div class="middle ">'+Fai.encodeHtml(f.buttonName)+"</div>"),e.push('\t\t\t\t\t\t\t\t<div class="right"></div>'),e.push("\t\t\t\t\t\t\t</div>"),e.push("\t\t\t\t\t\t</div>"),e.push("\t\t\t\t\t</div>"),e.push("\t\t\t\t</td>"),e.push("\t\t\t</tr>"),e.push("\t\t</tbody>"),e.push("\t</table>")}(i):function(e){e.push('\t<table class="bookingSubmitPanel_table" cellpadding="0" cellspacing="0">'),e.push("\t\t<tbody>"),t.each(f.contentList,function(t,i){if(i.hide)return!0;e.push('\t\t<tr _contentId="'+i.id+'" _type="'+i.type+'">'),""==i.headline?e.push('\t\t\t<td class="column1"><div class="itemName" title="'+Fai.encodeHtml(i.name)+'">'+Fai.encodeHtml(i.name)+"</div></td>"):e.push('\t\t\t<td class="column1"><div class="itemName" title="'+Fai.encodeHtml(i.headline)+'">'+Fai.encodeHtml(i.headline)+"</div></td>"),e.push('\t\t\t<td class="column2">'),e.push('\t\t\t\t<div class="itemInput">'),e.push(g(i)),i.must&&5!=i.type?e.push('\t\t<span class="inputMust">*</span>'):e.push(""),e.push("\t\t\t\t</div>"),e.push("\t\t\t</td>"),e.push("\t\t</tr>")}),f.validation&&(e.push('\t\t<tr _validationTr="true">'),e.push('\t\t\t<td class="column1"><div class="itemName">'+LS.loginDialogCaptcha+"</div></td>"),e.push('\t\t\t<td class="column2">'),e.push('\t\t\t\t<div class="itemInput">'),e.push('\t\t\t\t\t<div class="validateInputAndCode">'),e.push('\t\t\t\t\t\t\t<input id="bookingVolidationCode" class="voteCodeInputText" type="text" maxlength="4"/>'),e.push('\t\t\t\t\t\t\t<img alt="" class="voteCodePic" onclick="Site.changeCaptchaImg(this, 3)" title="'+LS.msgBoradChageValidateCode+'" id="memberCaptchaImg" src="validateCode.jsp?validateCodeRegType=3&Math.random()*1000">'),e.push("\t\t\t\t\t</div>"),e.push('\t\t\t\t\t<span class="inputMust">*</span>'),e.push("\t\t\t\t</div>"),e.push("\t\t\t</td>"),e.push("\t\t</tr>"));e.push('\t\t\t<tr _submitTr="true">'),e.push("\t\t\t\t<td></td>"),e.push('\t\t\t\t<td class="column2">'),e.push('\t\t\t\t\t<div class="itemInput">'),e.push('\t\t\t\t\t\t<div class="addButtonshowType" id="bookingSubmitBtn">'),e.push('\t\t\t\t\t\t\t<div class="s_ibutton s_ibutton'+d[f.Def_BookingSubmit_BTN_STYLE]+'" type="botton" >'),e.push('\t\t\t\t\t\t\t\t<div class="left"></div>'),e.push('\t\t\t\t\t\t\t\t<div class="middle ">'+Fai.encodeHtml(f.buttonName)+"</div>"),e.push('\t\t\t\t\t\t\t\t<div class="right"></div>'),e.push("\t\t\t\t\t\t\t</div>"),e.push("\t\t\t\t\t\t</div>"),e.push("\t\t\t\t\t</div>"),e.push("\t\t\t\t</td>"),e.push("\t\t\t</tr>"),e.push("\t\t</tbody>"),e.push("\t</table>")}(i),i.push("</div>")}else{var p=f.bookingClosedTip;Fai.top._manageMode&&(p+="，"+f.pleaseClick+"<a target='_blank' href='javascript:Site.openMallEdit(\"manageFrameBookingEdit\");'>"+f.setUp+"</a>"),i.push('\t\t<table class="bookingCloseTable" cellpadding="0" cellspacing="0">'),i.push('\t\t\t<tr><td style="text-align:center;">'),i.push('\t\t\t\t<div class="bookingClosePic"></div>'),i.push('\t\t\t\t<div class="bookingCloseTip">'+p+"</div>"),i.push("\t\t\t</td></tr>"),i.push("\t\t</table>")}var _=document.getElementById("tableWrap");null!=_&&_.parentNode.removeChild(_);var F=e.dom;F.innerContent.append(i.join("")),F.content.find(".f-content-title").text(d.moduleTitle),function(){m||t(u).off("click.nradio").on("click.nradio",".jz-radio",function(){var e=t(this).attr("inputName");t(".R_"+e).removeClass("jz-radio-checked"),t(this).find("input[name="+e+"]").attr("checked",!1),t(this).addClass("jz-radio-checked"),t(this).find(".jz-radio-input").attr("checked",!0)}),m&&(t(".proSelect").change(function(){var e=t(this).attr("_contentId"),i=t(this).val(),n=[];n=v?site_cityUtil.getCities(i):site_cityUtil.getCitiesEn(i);var a=[];a.push("<option _val='-1' value='-1'>"+f.siteFormPleaseSelect+"</option>"),t.each(n,function(t,e){v?a.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStr(e.name)+"</option>"):a.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStrEn(e.name)+"</option>")}),t("#citySelect_"+e).removeAttr("disabled").html(a.join(""))}),t(".citySelect").change(function(){var e=t(this).attr("_contentId"),i=t(this).val(),n=[];n=v?site_cityUtil.getCounty(i):site_cityUtil.getCountyEn(i);var a=[];a.push("<option _val='-1' value='-1'>"+f.siteFormPleaseSelect+"</option>"),t.each(n,function(t,e){v?a.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStr(e.name)+"</option>"):a.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStrEn(e.name)+"</option>")}),t("#countySelect_"+e).removeAttr("disabled").html(a.join(""))})),function(){if(!m){var e=[];t.each(f.mobileCtNameList,function(t,i){e.push({content:i.ctShowName+i.ctCode,value:i.ctName})});var i=0;t(e).each(function(t,e){e.value==f.memberMobileCt&&(i=t)}),t.each(f.contentList,function(n,a){var s=a.id,o=a.type,l=a.input;if(o==f.Def_ContentList_Type_PHONE&&a.openAreaCode)b({container:t("#phoneNewSelect_"+s),widgetClass:"phoneCode",id:"phoneNewSelect",checkIndex:a.sys?i:0,width:120,selectList:e,onchange:function(){}});else if(o==f.Def_ContentList_Type_DROPDOWN){var c=[],d=l.split("\n");t.each(d,function(t,e){c.push({content:e,value:e})}),b({container:t("#dropDownNewSelect_"+s),widgetClass:"drowDown",id:"dropDownNewSelect_",checkIndex:0,width:120,selectList:c,onchange:function(){}})}else if(o==f.Def_ContentList_Type_ADDRESS){var p;p=v?site_cityUtil.getProvince():site_cityUtil.getProvinceEn();var u=[];u.push({content:f.siteFormPleaseSelect,value:-1}),t.each(p,function(t,e){u.push({content:e.name,value:e.id})});var r=b({container:t("#proNewSelect_"+s),widgetClass:"proAddr",id:"proNewSelect",checkIndex:0,width:120,selectList:u,onchange:function(){var e;t("#countyNewSelect_"+s).empty(),b({container:t("#countyNewSelect_"+s),widgetClass:"cityAddr",id:"countyNewSelect_",checkIndex:0,width:120,selectList:[{content:f.siteFormPleaseSelect,value:-1}],enable:!0,onchange:function(){}});var i=r.getValue();e=v?site_cityUtil.getCities(i):site_cityUtil.getCitiesEn(i);var n=[];n.push({content:f.siteFormPleaseSelect,value:-1}),t.each(e,function(t,e){n.push({content:e.name,value:e.id})}),t("#cityNewSelect_"+s).empty();var o=b({container:t("#cityNewSelect_"+s),widgetClass:"cityAddr",id:"cityNewSelect",checkIndex:0,width:120,selectList:n,onchange:function(){var e,i=o.getValue();e=v?site_cityUtil.getCounty(i):site_cityUtil.getCountyEn(i);var n=[];n.push({content:f.siteFormPleaseSelect,value:-1}),t.each(e,function(t,e){n.push({content:e.name,value:e.id})}),a.openMunicipalCode&&(t("#countyNewSelect_"+s).empty(),b({container:t("#countyNewSelect_"+s),widgetClass:"cityAddr",id:"countyNewSelect_",checkIndex:0,width:120,selectList:n,onchange:function(){}}))}})}});b({container:t("#cityNewSelect_"+s),widgetClass:"cityAddr",id:"cityNewSelect",checkIndex:0,width:120,selectList:[{content:f.siteFormPleaseSelect,value:-1}],enable:!0,onchange:function(){}}),b({container:t("#countyNewSelect_"+s),widgetClass:"cityAddr",id:"countyNewSelect_",checkIndex:0,width:120,selectList:[{content:f.siteFormPleaseSelect,value:-1}],enable:!0,onchange:function(){}})}})}}(),Site.siteFormTimeBtn(r),Fai.top._manageMode?(t(".fileUploadBtn").click(function(){y("当前为管理态状态，文件上传无效")}),t("#bookingSubmitBtn .s_ibutton").click(function(){y("当前为管理态状态，提交无效")}),function(){var i=e.dom.content;if(i.length<0)return;if(e.dom.content.find(".J_resizableTip").length>0)return;function n(i,n){var a={};a.w=i,a.h=n,t.ajax({type:"get",cache:!1,url:Site.genAjaxUrl("module_h.jsp?")+"cmd=set&id=44&style=104&pattern="+Fai.encodeUrl(JSON.stringify(a)),error:function(){Fai.ing("服务繁忙，请稍候重试",!1)},success:function(t){var a=jQuery.parseJSON(t);a.success?(c=i,s==(l=n)&&o==c?e.dom.content.find(".J_resizableTip").addClass("J_resizableTipHide"):e.dom.content.find(".J_resizableTip").removeClass("J_resizableTipHide")):Fai.ing(a.msg,!1)}})}i.append(t("<div class='ui-resizable-handle ui-resizable-e funPanelResizeHandle' _dir='0' style='z-index: 1000;'></div><div class='ui-resizable-handle ui-resizable-w funPanelResizeHandle' _dir='1' style='z-index: 1000;'></div><div class='ui-resizable-handle ui-resizable-s funPanelResizeHandle' _dir='2' style='z-index: 1000;'></div><div class='ui-resizable-handle ui-resizable-n funPanelResizeHandle' _dir='3' style='z-index: 1000;'></div>")),i.append("<a href='javascript:;' class='J_resizableTip ui-resizable-cancelTip fk-resizable-cancelTip "+(s==l&&o==c?"J_resizableTipHide":"")+"' id='J_resizableTip_44' style='z-index:9999;' _faiscoTip='还原默认宽度和高度'></a>"),e.dom.content.find(".J_resizableTip").click(function(){var i=(Fai.top.$("body").width()-o)/2;i=i<0?0:i;var a=(Fai.top.$("body").height()-s)/2;a=a<0?0:a,e.dom.content.css({width:+o,height:s,left:i,top:a}),e.dom.content.find("#tableWrap").css("height",s-110),t(this).hide(),n(o,s)}),i.children(".ui-resizable-handle").off("mousedown.pzresize").on("mousedown.pzresize",function(a){if(0==a.button){var s={clientX:a.clientX,clientY:a.clientY},o=i.width();startHeight=i.height(),handle=t(this),documentElem=t(document),direction=parseInt(handle.attr("_dir")),documentElem.off("mousemove.pzresize").on("mousemove.pzresize",function(n){t("#fk-moduleToolbar44").hide(),e.dom.content.find(".J_resizableTip").hide();var a={clientX:n.clientX,clientY:n.clientY},l=0,c=i.width();switch(resizeHeight=i.height(),direction){case 0:l=parseInt(a.clientX-s.clientX),c=o+2*l;break;case 1:l=parseInt(a.clientX-s.clientX),c=o-2*l;break;case 2:l=parseInt(a.clientY-s.clientY),resizeHeight=startHeight+2*l;break;case 3:l=parseInt(a.clientY-s.clientY),resizeHeight=startHeight-2*l}if(c=c<450?450:c,resizeHeight=resizeHeight<100?100:resizeHeight,direction<2){var d=(Fai.top.$("body").width()-c)/2;(d=d<=20?20:d)>20&&(i.css("width",c),e.dom.content.css("left",d))}else if(direction<4){var p=(Fai.top.$("body").height()-resizeHeight)/2;(p=p<=20?20:p)>20&&(i.css("height",resizeHeight),e.dom.content.find("#tableWrap").css("height",resizeHeight-110),e.dom.content.css("top",p))}}),documentElem.off("selectstart.pzsel").on("selectstart.pzsel",function(){return!1}),documentElem.off("mouseup.pzresize").on("mouseup.pzresize",function(t){documentElem.off("mousemove.pzresize").off("mouseup.pzresize").off("selectstart.pzsel"),n(i.width(),i.height())})}})}()):(t.each(h,function(e,i){!function(e){var i,n,a=e.fileSize,s=e.itemId,o=e.moduleId,l=e.fileTypeList,c=e.buttonValue,d=(e.isModuleButtonStyle,e.showType,e.srcjQueryUploadPath),p=document.documentElement||document.body,u=t("#bookingUploadBtn_"+s);u.width();if(Fai.isIE()){var r={file_post_name:"Filedata",upload_url:"/ajax/upsiteimg_h.jsp",button_placeholder_id:"bookingUploadBtn_"+s,file_size_limit:a+"MB",button_image_type:6,file_queue_limit:1,requeue_on_error:!1,button_height:32,button_width:128,button_text:"<span class='fk_btText'>"+c+"</span>",button_text_style:".fk_btText{text-align:center; font-family: 微软雅黑; color: #333;}",button_text_top_padding:6,post_params:{ctrl:"Filedata",app:21,type:0,isSiteForm:!0},file_types:l.join(""),file_dialog_complete_handler:function(t){this._allSuccess=!1,this.startUpload()},file_queue_error_handler:function(t,e,i){switch(e){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:Fai.ing(LS.siteFormSubmitCheckFileSizeErr,!0);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:Fai.ing(LS.siteFormSubmitFileUploadNotAllow,!0);break;case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:Fai.ing(Fai.format(LS.siteFormSubmitFileUploadOneTimeNum,"一"),!0);break;default:Fai.ing(LS.siteFormSubmitFileUploadReSelect,!0)}},upload_success_handler:function(t,e){var i=jQuery.parseJSON(e);this._allSuccess=i.success,this._sysResult=i.msg,i.success?(Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSucess,Fai.encodeHtml(t.name)),!0),S("upload",i,o,s)):Fai.ing(LS.siteFormSubmitFileUploadFile+t.name+"，"+i.msg)},upload_error_handler:function(t,e,i){-280==e?Fai.ing(LS.siteFormSubmitFileUploadFileCancle,!1):-270==e?Fai.ing(Fai.format(LS.siteFormSubmitFileUploadFileExist,Fai.encodeHtml(t.name)),!0):Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy,Fai.encodeHtml(t.name)))},upload_complete_handler:function(t){t.filestatus==SWFUpload.FILE_STATUS.COMPLETE?setTimeout(function(){i.startUpload()},i.upload_delay):t.filestatus==SWFUpload.FILE_STATUS.ERROR&&Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy,Fai.encodeHtml(t.name)))},upload_start_handler:function(t){Fai.enablePopupWindowBtn(0,"save",!1),Fai.ing(LS.siteFormSubmitFileUploadPrepare,!1)},view_progress:function(t,e,i,n){Fai.ing(LS.siteFormSubmitFileUploadIng+n+"%",!1)}};i=SWFUploadCreator.create(r)}else{var m=function(){i=u.uploadify(h),u.on("click",function(){u.find("a")[0].click()})},h={auto:!0,fileTypeExts:l.join(""),multi:!0,fileSizeLimit:1024*a*1024,fileSplitSize:20971520,breakPoints:!0,isBurst:!1,saveInfoLocal:!1,showUploadedPercent:!0,showUploadedSize:!0,removeTimeout:9999999,post_params:{app:21,type:0,fileUploadLimit:a},getFileSizeUrl:"/ajax/advanceUpload.jsp?cmd=_getUploadSize",uploader:"/ajax/advanceUpload.jsp?cmd=_mobiupload",onUploadSuccess:function(e,i){var n=t.parseJSON(i);n.success?(Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSucess,Fai.encodeHtml(e.name)),!0),S("upload",n,o,s)):Fai.ing("文件:"+e.name+"，"+n.msg)},onUploadError:function(e,i){t("#progressBody_"+e.id).remove(),t("#progressWrap_"+e.id).remove(),Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy,Fai.encodeHtml(e.name)))}};"function"==typeof u.uploadify?m():((n=document.createElement("script")).src=d,n.type="text/javascript",p.appendChild(n),n.onload=function(){m()})}}(i)}),t("#bookingSubmitBtn .s_ibutton").click(function(){!function(){var e=f.contentList,i=(f.Def_LIMIT_INPUT_MAXLENTH,f.Def_LIMIT_TEXTAREA_MAXLEN),n=[],a=[],s=!0;if(e.length<1)return;for(var o=0;o<e.length;o++){var l=e[o];if(id=l.id,name=l.name,must=l.must,type=l.type,size=l.size,openAreaCode=l.openAreaCode,tmpItemContentList={id:id,type:type,must:must},0==type){var c=t.trim(t("#bookingSingleText_"+id).val()),p=0,r=100;if(must&&""==c)return y(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),s=!1,!1;var h=l.wordLimit;if(void 0!==h&&1==parseInt(h.o)&&(p=h.i,r=h.a),c.length>r)return y(Fai.format(LS.siteFormSubmitInputMaxLength,Fai.encodeHtml(name),r)),s=!1,!1;if(must&&c.length<p)return y(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),s=!1,!1;tmpItemContentList.val=c}else if(1==type){var v=t.trim(t("#bookingMultLine_"+id).val());if(must&&""==v)return y(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),s=!1,!1;if(v.length>i)return y(Fai.format(LS.siteFormSubmitInputMaxLength,Fai.encodeHtml(name),i)),s=!1,!1;tmpItemContentList.val=v}else if(2==type){if(must&&0==t("input[name=radioR_"+id+"]:checked").length)return y(Fai.format(LS.siteFormSubmitCheckIsEmpty,Fai.encodeHtml(name))),s=!1,!1;t("input[name=radioR_"+id+"]:checked").length>0?tmpItemContentList.val=t("input[name=radioR_"+id+"]:checked").first().val():tmpItemContentList.val=""}else if(3==type){if(must&&0==t("input[name=radioC_"+id+"]:checked").length)return y(Fai.format(LS.siteFormSubmitCheckIsEmpty,Fai.encodeHtml(name))),s=!1,!1;var _=[];t("input[name=radioC_"+id+"]:checked").each(function(e,i){_.push(t(this).val())}),tmpItemContentList.val=_.join("\n")}else if(4==type){var g=t("#dropDownSelect_"+id+" option:selected").val();m||(g=t("#dropDownNewSelect_"+id).find(".f-select-text").attr("value")),tmpItemContentList.val=g}else{if(5==type)continue;if(6==type){var c=t("#bookingDate_"+id).val(),b=l.dateSetting?l.dateSetting.type:0,S=1==b?t("#bookingDate_"+id+"_end").val():"";if(must&&""==c)return y(Fai.format(LS.siteFormSubmitCheckIsEmpty,Fai.encodeHtml(name))),s=!1,!1;if(must&&1==b&&""==S)return y(Fai.format(LS.siteFormSubmitCheckIsEmpty,Fai.encodeHtml(name))),s=!1,!1;1==b&&(c=t.trim(c)||t.trim(S)?c+" 至 "+S:""),tmpItemContentList.val=c}else if(7==type){var F=t("#bookingUploadFile_"+id),C={};if(must&&""==F.attr("_tmpFileId"))return y(Fai.format(LS.siteFormSubmitCheckHasFileUpload,Fai.encodeHtml(name))),s=!1,!1;""==F.attr("_tmpFileId")?tmpItemContentList.val="":(tmpItemContentList.val=F.attr("_fileId"),C.tmpFileName=F.attr("_tmpFileName"),C.fileId=tmpItemContentList.val,C.tmpFileId=F.attr("_tmpFileId"),a.push(C))}else if(8==type){var I=t("#bookingPhoneNum_"+id).val();if(must&&""==I)return y(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),s=!1,!1;if(must&&!Fai.isNationMobile(I))return y(Fai.format(LS.memberProfileItemCorrect,Fai.encodeHtml(name))),s=!1,!1;if(openAreaCode){var w="";w=m?t("#phoneSelect_"+id).val():t("#phoneNewSelect_"+id).find(".f-select-text").attr("value"),t.trim(I)?tmpItemContentList.val=w+I:tmpItemContentList.val=""}else tmpItemContentList.val=I}else if(9==type){var x=t("#bookingMailInput_"+id).val();if(must&&""==x)return y(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),s=!1,!1;if(must&&!Fai.isEmail(x))return y(Fai.format(LS.memberSignupUserAddItemCorrect,Fai.encodeHtml(name))),s=!1,!1;tmpItemContentList.val=x}else if(10==type){var T=t("#bookingIdentityInput_"+id).val();if(must&&""==T)return y(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),s=!1,!1;if(must&&!Fai.isCardNo(T))return y(Fai.format(LS.memberSignupUserAddItemCorrect,Fai.encodeHtml(name))),s=!1,!1;tmpItemContentList.val=T}else if(11==type){var N=t("#proSelect_"+id).find("option:selected").attr("value"),U=t("#citySelect_"+id).find("option:selected").attr("value"),E=t("#countySelect_"+id).find("option:selected").attr("value"),z=t("#proSelect_"+id).find("option:selected").attr("_val"),H=t("#citySelect_"+id).find("option:selected").attr("_val"),D=t("#countySelect_"+id).find("option:selected").attr("_val");if(m||(N=t("#proNewSelect_"+id).find(".f-select-text").attr("value"),U=t("#cityNewSelect_"+id).find(".f-select-text").attr("value"),E=t("#countyNewSelect_"+id).find(".f-select-text").attr("value"),z=t("#proNewSelect_"+id).find(".f-select-text").text(),H=t("#cityNewSelect_"+id).find(".f-select-text").text(),D=t("#countyNewSelect_"+id).find(".f-select-text").text()),must&&("-1"==N||"-1"==U))return y(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),s=!1,!1;z=-1==N?"":z,H=-1==U?"":H,D=-1==E?"":D,tmpItemContentList.val=z+H+D}}n.push(tmpItemContentList)}var P=t("#bookingVolidationCode").val();if(f.validation&&""==P)return y(Fai.format(LS.siteFormSubmitInputIsEmpty,LS.loginDialogCaptcha)),s=!1,!1;if(!s)return!1;y(LS.siteFormSubmitIng),(void 0===t(u).data("bookingHasCommit")||0==t(u).data("bookingHasCommit"))&&(t(u).data("bookingHasCommit",!0),t.ajax({type:"post",url:"ajax/booking_h.jsp",data:"cmd=add&pid="+f.pid+"&validateCode="+P+"&submitContentList="+Fai.encodeUrl(t.toJSON(n))+"&tmpFileList="+Fai.encodeUrl(t.toJSON(a)),error:function(){t(u).data("bookingHasCommit",!1),k(!1)},success:function(e){if(t(u).data("bookingHasCommit",!1),(e=t.parseJSON(e)).success){var i=d[f.Def_BookingSubmit_JUMP_URL];setTimeout(function(){1==i.lt?Fai.top.location.href=d.jumpToUrl:Fai.top.location.reload(),L()},2500),k(!0,"",2e3)}else-401==e.rt?(k(!1,e.msg),t(".validateInputAndCode #bookingVolidationCode").val(""),t(".validateInputAndCode .voteCodePic").trigger("click")):-4==e.rt?k(!1,LS.bookingSubmitFullTips):-7==e.rt?k(!1,LS.siteImgFull):-2==e.rt?k(!1,LS.argsError):k(!1,LS.memberLoginError)}}))}()}));Fai.top.$("#fk-bookingSubmitPanel f-innerContent>.mCustomScrollbar").length<1&&Fai.top.$("#fk-bookingSubmitPanel .tableWrap").mCustomScrollbar({theme:"fk-gray",advanced:{updateOnContentResize:!0},axis:"y"})}()}function g(e){var n=e.id,a=e.type,s=(e.name,e.must,e.input);e.placeholder==i||e.placeholder;var o=d[f.Def_BookingSubmit_ARRAY_STYLE],l=(f.Def_BookingSubmit_ARRAY_AUTO,f.Def_BookingSubmit_ARRAY_FIX),c=d[f.Def_BookingSubmit_FIX_NUM],p=s.split("\n"),_="",g=e.openAreaCode==i||e.openAreaCode,b=e.placeholder==i?"":e.placeholder,S=f.Def_LIMIT_INPUT_MAXLENTH,F=e.wordLimit;if(void 0===F?F={o:0,i:0,a:100}:1==(F=JSON.parse(F)).o&&(S=F.a),e.wordLimit=F,a==f.Def_ContentList_Type_SINGLE_LINE)_="<input class='singleLineTextInput bookingSingleText' id='bookingSingleText_"+n+"' value='"+Fai.encodeHtml(void 0!==f.memberName&&e.sys?f.memberName:"")+"' placeholder='"+Fai.encodeHtml(b)+"' type='text' maxlength='"+S+"'/>";else if(a==f.Def_ContentList_Type_MULTI_LINE)_="<textArea class='bookingMultLine' id='bookingMultLine_"+n+"' rows='3' placeholder='"+Fai.encodeHtml(b)+"' maxlength='"+S+"'/></textArea>";else if(a==f.Def_ContentList_Type_RADIO){var y=[];t.each(p,function(t,e){var i="radioR_"+n+"_"+t;t%c==0&&o==l&&y.push("<div class='arrangeFixBox'>"),y.push("\t\t\t<div class='singelChoice'>"),m?y.push("\t\t\t\t<input type='radio' name='radioR_"+n+"' id='"+i+"' value='"+Fai.encodeHtml(e)+"' /><label for='"+i+"'>"+Fai.encodeHtml(e)+"</label>"):y.push(function(t,e){var i=[];return i.push("\t<span class='jz-radio R_"+t+"' inputName='"+t+"'>"),i.push("\t\t<span class='jz-radio-inner'></span>"),i.push("\t\t<input name='"+t+"' type='radio' class='jz-radio-input' value='"+Fai.encodeHtml(e)+"'/>"),i.push("\t\t<span class='labelForRadio'>"+Fai.encodeHtml(e)+"</span>"),i.push("\t</span>"),i.join("")}("radioR_"+n,e)),y.push("\t\t\t</div>"),t%c!=c-1&&t!=p.length-1||o!=l||y.push("</div>")}),_=y.join("")}else if(a==f.Def_ContentList_Type_MULTIPLECHOICE){var k=[];t.each(p,function(e,i){var a="radioC_"+n+"_"+e;e%c==0&&o==l&&k.push("<div class='arrangeFixBox'>"),k.push("<div class='multiChoice'>"),m?k.push("<input type='checkbox' name='radioC_"+n+"' id='"+a+"' value='"+Fai.encodeHtml(i)+"' /><label for='"+a+"'>"+Fai.encodeHtml(i)+"</label>"):k.push(function(e,i){t(u).off("click.ncheckbox").on("click.ncheckbox",".jz-checkBox",function(){t(this).hasClass("jz-check-checked")?(t(this).removeClass("jz-check-checked"),t(this).find(".jz-radio-input").attr("checked",!1)):(t(this).addClass("jz-check-checked"),t(this).find(".jz-radio-input").attr("checked",!0))});var n=[];return n.push("\t<span class='bsCheckBox jz-checkBox C_"+e+"'>"),n.push("\t\t<span class='jz-checkBox-inner'></span>"),n.push("\t\t<input name='"+e+"' type='checkbox' style='display:none;' class='jz-radio-input' value='"+Fai.encodeHtml(i)+"'/>"),n.push("\t\t<span class='labelForCheckBox'>"+Fai.encodeHtml(i)+"</span>"),n.push("\t</span>"),n.join("")}("radioC_"+n,i)),k.push("</div>"),e%c!=c-1&&e!=p.length-1||o!=l||k.push("</div>")}),_=k.join("")}else if(a==f.Def_ContentList_Type_DROPDOWN){var C=[];m?(C.push("<select class='dropDownSelect' id='dropDownSelect_"+n+"'>"),t.each(p,function(t,e){C.push("<option value='"+Fai.encodeHtml(e)+"'>"+Fai.encodeHtml(e)+"</option>")}),C.push("</select>")):C.push("<div class='dropDownNewSelect' id='dropDownNewSelect_"+n+"'></div>"),_=C.join("")}else if(a==f.Def_ContentList_Type_DESC)_=Fai.encodeHtml(s);else if(a==f.Def_ContentList_Type_DATE){var I=[],L="bookingDate_"+n,w=e.dateSetting,x=1==(w.type==i?0:w.type),T={id:L,dateSetting:w};if(r.push(T),I.push("<div class='siteFormMiddle'>"),I.push("<input type='text' class='g_itext siteFormTimer "+(x?"fk-startTime":"")+"' name='"+L+"' id='"+L+"' readonly />"),x){var N="bookingDate_"+n+"_end";T={id:N,dateSetting:w};r.push(T),I.push("<span class='fk-timeUtile'>"+LS.to+"</span>"),I.push("<div class='fk-endTimeWrap'>"),I.push("\t<input type='text' class='fk-endTime g_itext siteFormTimer' name='"+N+"' id='"+N+"' readonly />"),I.push("\t<div _startId = '"+L+"' class='J_endTimeMask fk-endTimeMask'></div>"),I.push("</div>")}I.push("</div>"),_=I.join("")}else if(a==f.Def_ContentList_Type_FILE_UPLOAD){var U=e.size>f.fileSizeLimit?f.fileSizeLimit:e.size,E=[];if(e.isAllFile)E.push("*.*;");else{var z=((e.dftl||"")+(e.cftl||"")).split(" ");t.each(z,function(t,e){if(e.length>0){var i="*."+e+";";E.push(i)}})}h.push({itemId:n,buttonValue:f.siteFormSelectFile,fileSize:U,srcjQueryUploadPath:f.srcjQueryUploadPath,fileTypeList:E});var H=[];H.push("<input type='button' class='fileUploadBtn' id='bookingUploadBtn_"+n+"' value='"+f.siteFormSelectFile+"'/>"),H.push("<div id='bookingUploadFile_"+n+"' class='bookingUploadFile' _tmpFileId='' style='display:none; margin: 8px 0 0 20px;'>"+LS.siteFormSubmitNotSeletcFile+"</div>"),H.push("<span id='bookingUploadDESC_"+n+"' style='margin: 8px 0 0 1%; display:inline-block;'><span class='siteFormFUDescIcons newSiteFormFUDescIcons'></span>"+f.siteFormFileSizeLimit+"："+U+"M</span>"),_=H.join("")}else if(a==f.Def_ContentList_Type_PHONE){var D=[];g?(m?(D.push("<select class='phoneSelect' id='phoneSelect_"+n+"'>"),t.each(f.mobileCtNameList,function(t,e){D.push("<option value='"+e.ctName+"'>"+e.ctShowName+e.ctCode+"</option>")}),D.push("</select>")):D.push("<div class='phoneNewSelect' id='phoneNewSelect_"+n+"'></div>"),D.push("<input class='bookingPhoneWithCode' id='bookingPhoneNum_"+n+"' value='"+Fai.encodeHtml(void 0!==f.memberMobile&&/^[0-9]*$/.test(f.memberMobile)&&e.sys?f.memberMobile:"")+"' type='number' onkeyup='(this.v=function(){this.value=this.value.replace(/[^0-9-]+/,\"\");}).call(this)'  oninput='if(value.length>11)value=value.slice(0,11)'/>"),_=D.join("")):_="<input class='singleLineTextInput bookingPhoneNoCode' id='bookingPhoneNum_"+n+"' value='"+Fai.encodeHtml(void 0!==f.memberMobile&&/^[0-9]*$/.test(f.memberMobile)&&e.sys?f.memberMobile:"")+"' type='text' onkeyup='(this.v=function(){this.value=this.value.replace(/[^0-9-]+/,\"\");}).call(this)' oninput='if(value.length>11)value=value.slice(0,11)'/>"}else a==f.Def_ContentList_Type_MAIL?_="<input class='singleLineTextInput bookingMailInput' id='bookingMailInput_"+n+"' maxlength='50' type='text' name='input' />":a==f.Def_ContentList_Type_IDENTITY?_="<input class='singleLineTextInput bookingIdentityInput' id='bookingIdentityInput_"+n+"' type='text' name='input' />":a==f.Def_ContentList_Type_ADDRESS&&(_=function(e){var i=[],n=e.id,a=e.openMunicipalCode;var s;return m?(i.push("<select class='addrSelect proSelect' id='proSelect_"+n+"' _contentId='"+n+"'>"),s=v?site_cityUtil.getProvince():site_cityUtil.getProvinceEn(),i.push("<option _val='-1' value='-1'>"+f.siteFormPleaseSelect+"</option>"),t.each(s,function(t,e){v?i.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStr(e.name)+"</option>"):i.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStrEn(e.name)+"</option>")}),i.push("</select>"),i.push("<select class='addrSelect citySelect' id='citySelect_"+n+"' _contentId='"+n+"' disabled>"),i.push("<option _val='-1' value='-1'>"+f.siteFormPleaseSelect+"</option>"),i.push("</select>"),a&&(i.push("<select class='addrSelect countySelect' id='countySelect_"+n+"' disabled>"),i.push("<option _val='-1' value='-1'>"+f.siteFormPleaseSelect+"</option>"),i.push("</select>")),i.join("")):(i.push("<div class='addrNewSelect proNewSelect' id='proNewSelect_"+n+"'></div>"),i.push("<div class='addrNewSelect cityNewSelect' id='cityNewSelect_"+n+"'></div>"),a&&i.push("<div class='addrNewSelect countyNewSelect' id='countyNewSelect_"+n+"'></div>"),i.join(""))}(e));return _}function b(i){var n=function(i){var n,a,s,o,l,c,d,p,u,r,m,h,f,v={container:t("body"),widgetClass:"selectTool",width:75,id:0,selectList:null,checkIndex:0,onchange:null,selectIcon:!1,selectListHeight:185,selectItemHeight:28,enable:!1};if(!((n=this.opts=t.extend({},v,i,!0)).selectList.length<=0)){if(n.selectList.length*n.selectItemHeight<n.selectListHeight&&(n.selectListHeight=n.selectList.length*n.selectItemHeight),d=this,c=n.checkIndex,a='<div class="fk-select-widget J_select_widget '+n.widgetClass+'" id="J_'+n.widgetClass+n.id+'"><input class="seleInput" style="width:0; height:0; opacity:0; float:right;"/><div class="J_select_text_wrap f-select-text-wrap"><div class="f-select-text J_select_text '+(n.enable?"selectEnable":"")+'" value="'+n.selectList[c].value+'">'+Fai.encodeHtml(n.selectList[c].content)+'</div><a class="f-select-arrow J_select_arrow"></a></div></div>',n.container.append(a),s="",o=this.widgetDom=n.container.find("#J_"+n.widgetClass+n.id),e.dom.panel.find("#"+n.container.attr("id")+"_select_list").remove(),e.dom.panel.append('<ul class="f-select-list J_select_list" id="'+n.container.attr("id")+'_select_list" style="height:'+n.selectListHeight+'px; display:none;"></ul>'),l=e.dom.panel.find("#"+n.container.attr("id")+"_select_list"),t.each(n.selectList,function(t,e){s='<li class="f-select-item J_select_item'+(t==c?" f-select-on ":"")+'" selectIndex="'+t+'" style="'+n.selectItemHeight+'px;"><a class="J_radio_label" value="'+Fai.encodeHtml(e.value)+'">'+Fai.encodeHtml(e.content)+"</a></li>",l.append(s),s=""}),this.itemDom=u=l.find(".J_select_item"),p=n.selectItemHeight*n.selectList.length,n.selectIcon){'<span class="J_select_img"></span>',this.itemDom.find(".J_radio_label").append('<span class="J_select_img"></span>')}n.selectListHeight<p&&l.mCustomScrollbar({theme:"select-theme"}),l.hide(),f=o.find(".seleInput"),r=o.find(".J_select_text"),u.off("click.selectTool").on("click.selectTool",function(){var e=t(this).find(".J_radio_label"),i=e.attr("value"),a=e.text(),s=t(this).index();n.checkIndex=s,r.attr("value",i),r.text(a),l.slideUp(150),m.removeClass("f-select-ratate-arrow"),u.removeClass("f-select-on"),t(this).addClass("f-select-on"),n.onchange&&n.onchange(t(this),s,d)}),m=o.find(".J_select_arrow"),h=n.container.parents("body"),o.find(".J_select_text_wrap").off("click.selectTool").on("click.selectTool",function(e){if(1==n.container.length&&!n.enable){if(l.is(":hidden")){var i=l.height(),a=n.container.height()+n.container.offset().top+10-t(window).scrollTop();a+i>Fai.top.$("body").height()&&(a=n.container.offset().top-n.container.height()-i+10-t(window).scrollTop()),l.css({width:n.container.width(),position:"absolute",top:a,left:n.container.offset().left}),h.find(".J_select_widget .J_select_arrow").removeClass("f-select-ratate-arrow"),l.slideDown(150),m.addClass("f-select-ratate-arrow")}else l.slideUp(150),m.removeClass("f-select-ratate-arrow");f.focus(),e.stopPropagation()}}),f.on("blur",function(){l.slideUp(150),l.parent().find(".J_select_arrow").removeClass("f-select-ratate-arrow")});var _="",g=navigator.userAgent.toLowerCase();_=/msie/.test(g)?"-ms-":/chrome/.test(g)||/safari/.test(g)||/yandex/.test(g)?"-webkit-":/mozilla/.test(g)?"-moz-":/opera/.test(g)?"-o-":/konqueror/.test(g)?"-khtml-":"",l.css(_+"user-select","none").attr("unselectable","on").on("selectstart mousedown",!1)}};return t.extend(n.prototype,{selectValue:function(e){this.itemDom.each(function(){var i=t(this).find(".J_radio_label").attr("value");e!=i||t(this).trigger("click")})},getValue:function(){return this.widgetDom.find(".J_select_text").attr("value")},destroy:function(){this.widgetDom.find(".J_select_list").mCustomScrollbar("destroy"),this.opts=null,this.widgetDom=null},hideList:function(){var t=this.widgetDom.find(".J_select_widget");t.slideUp(150),t.parent().find(".J_select_arrow").removeClass("f-select-ratate-arrow")}}),new n(i)}function S(e,i,n,a){if("upload"==e){var s=i.id,o=i.name,l=(i.type,i.size,i.path,i.createTime,i.groupId,i.fileId),c=t("#bookingUploadFile_"+a);t("#bookingUploadDESC_"+a).hide(),c.css("display","inline-block"),c.html(o),c.attr("_tmpFileId",s).attr("_tmpFileName",o).attr("title",o).attr("_fileId",l)}}function F(i){var s=[];s.push("pid="+a),s.push("&cmd=getPanelData"),s.push("&_colId="+Fai.top._colId),s.push("&_extId="+Fai.top._extId),t.ajax({type:"get",cache:!1,url:Site.genAjaxUrl("booking_h.jsp?")+s.join(""),error:function(){Fai.ing("服务繁忙，请稍候重试",!1)},success:function(i){var a=t.parseJSON(i);a.success?(f=a.pageData,p=f.css,d=f.moduleInfo,Fai.top._manageMode&&(n=f.itemList),_(),function(i){Fai.top.$("link[href='"+p+"']").length<1&&t.trim(p).length>0?Site.demandLoadCss(p,function(){"function"==typeof i.func&&i.func.apply(e,arguments)}):"function"==typeof i.func&&i.func.apply(e,arguments)}({func:function(){var t=e.dom;t.panel&&t.panel.length>0?t.panel.is(":hidden")&&t.panel.show():Fai.top.$("#fk-bookingSubmitPanel").show()}}),Fai.top._manageMode&&n&&n.length>0&&jzUtils.run({name:"moduleEditTool.init",callMethod:!0},{id:44,isDialog:!0,toolList:n})):Fai.ing("获取数据失败",!1)}})}function y(t){var i=e.dom;i.bookingPanelMsg.html(t);var n=i.content.width(),a=i.bookingPanelMsg.width();i.bookingPanelMsg.css("left",(n-a)/2+"px"),i.bookingPanelMsg.show(),setTimeout(function(){i.bookingPanelMsg.hide()},3e3)}function k(t,e,i){var n={htmlContent:Site.getDialogContent(!1,Fai.format(e||LS.siteFormSubmitError)),width:205,height:78};if(t){var a=[];a.push("<div class='booking-sweet-alert' style='margin-top: 50px;'>"),a.push("\t<div class='sa-icon sa-success animate'>"),a.push("\t\t<span class='sa-line sa-tip animateSuccessTip'></span>"),a.push("\t\t<span class='sa-line sa-long animateSuccessLong'></span>"),a.push("\t\t<div class='sa-placeholder'></div>"),a.push("\t\t<div class='sa-fix'></div>"),a.push("\t</div>"),a.push("\t<div class='submitSuccessTitle'>"+LS.siteFormSubmitOk+"</div>"),a.push("</div>"),n={htmlContent:a.join(""),width:500,height:320,autoClose:i||0}}Site.popupBox(n)}function C(){var t=e.dom;t.panel;t.panelBtn.close.click(function(){L()}),t.contentBg.click(function(){L()}),t.panel.on("mousewheel DOMMouseScroll",function(t){return!1})}function I(){var t=e.dom;Fai.top.$(".J_popup_bg").length>1&&t.contentBg.css("opacity",".15")}function L(){w(),a=0,Fai.top.$("#fk-bookingSubmitPanel").find(".J_content").trigger("mouseleave.moduleEdit").end();var t=document.getElementById("fk-bookingSubmitPanel");null!=t&&t.parentNode.removeChild(t)}function w(){p="",n=[],r=[],h=[],f={}}e.init=function(t){L();var i,n,s,o,d,p=JSON.parse(t);a=p.pid,l=0==l?p.panelHeight:l,c=0==c?p.panelWidth:c,Fai.top.$("body").append((i=(Fai.top.$("body").width()-c)/2,n=(Fai.top.$("body").height()-l)/2,s=[],s.push('<div class="fk-panelFormBooking" id="fk-bookingSubmitPanel" style="display:none;">'),s.push('\t<div class="J_popup_bg f-contentBg J_contentBg"></div>'),s.push('\t<div class="f-content J_content" id="module44" style="width:'+c+"px; height:"+l+"px; top:"+n+"px; left:"+i+'px;">'),s.push('\t\t<div class="f-content-head">'),s.push('\t\t\t<div class="f-content-title"> </div>'),s.push("\t\t</div>"),s.push('\t\t<div class="f-innerContent" id="f-innerContent" style="overflow:hidden;"></div>'),s.push('\t\t<div class="bookingPanelMsg" id="bookingPanelMsg"></div>'),s.push('\t\t<a href="javascript:;" class="f-close J_close" onclick="return false;" title="关闭" hidefocus="true">关闭</a>'),s.push("\t</div>"),s.push("</div>"),s).join("")),o={eventFunc:C,styleFunc:I},(d=e.dom).panel=Fai.top.$("#fk-bookingSubmitPanel"),d.content=d.panel.find(u),d.contentBg=d.panel.find(".J_contentBg"),d.bookingPanelMsg=d.panel.find("#bookingPanelMsg"),d.innerContent=d.panel.find("#f-innerContent"),d.tableWrap=d.panel.find("#tableWrap"),d.panelBtn={},d.panelBtn.close=d.panel.find(".J_close"),"function"==typeof o.eventFunc&&setTimeout(function(){o.eventFunc.apply(e,arguments)},30),"function"==typeof o.styleFunc&&setTimeout(function(){o.styleFunc.apply(e,arguments)},30),F()},e.refresh=function(){e.dom.innerContent.empty(),w(),F()}}(jQuery,Site.bookingSubmitPanel);