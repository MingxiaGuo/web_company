function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}!function(o,e,a){var t=null,r=function(){};function n(o){return"function"==typeof o||"[object Function]"===Object.prototype.toString.call(o)}function i(){return!!window.WXApp||!(Fai.isIE6()||Fai.isIE7()||Fai.isIE8())}function l(e){var a=e.$$,t=window.event||a.event;t.stopPropagation?t.stopPropagation():window.event&&(window.event.cancelBubble=!0),a(".J_faiColorPickerAlp").remove(),a(".J_advanceColorPicker").remove();var r=function(e,a,t,r,n){var i,l=[],c=Math.floor(1e3*Math.random());return l.push('<div class="J_faiColorPickerAlp fk-colorPickerAlp" id="faiColorPicker'+c+'">'),function(){var o,t,r;for(l.push('<div class="fk-colorPicker-colorcol J_colorPicker_colorcol">'),o=0;o<e.length;o++){for(l.push('<div class="col">'),t=0,r=e[o];t<r.length;t++)"origin"==r[t]?l.push('<div class="J_original_clear f-original-clear" title="透明颜色"></div>'):a&&"advance"==r[t]?l.push('<div class="J_coloradvance_btn f-coloradvance-btn"></div>'):(l.push('<div class="col-color J_colorPicker_normal">'),l.push('<div style="background-color:'+r[t]+'"></div>'),l.push("</div>"));l.push("</div>")}l.push("</div>")}(),function(){var o,e=t.length;if(0!=e){for(l.push('<div class="fk-colorPicker-recent J_colorPicker_colorcol">'),o=0;o<e;o++)l.push('<div class="col-color J_colorPicker_normal">'),l.push('<div style="background-color:'+t[o]+'"></div>'),l.push("</div>");l.push("</div>")}}(),n||(i=(i=F(r)?"linear-gradient(to right, rgba(0,0,0,0), rgba(0,0,0,0))":"linear-gradient(to right, "+I(r)+", rgba(0,0,0,0))")||"linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0))",i=o.browser.msie&&"9.0"==o.browser.version?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType='1', startColorstr='"+x(r)+"', endColorstr='#ffffff')":"background: "+i,alp=q(r),spAlphaHandleLeft=168*(1-alp),l.push('<div class="fk-colorPicker-clearcolor">'),l.push('<div class="f-original-color-bg">'),l.push('<div class="J_original_color f-original-color" style="background-color:'+r+';"></div>'),l.push("</div>"),l.push('<div class="J_sp_alpha fk-sp-alpha">'),l.push('<div class="J_sp_alpha_inner fk-sp-alpha-inner" style="'+i+';">'),l.push('<div class="J_sp_alpha_handle fk-sp-alpha-handle" style="left: '+spAlphaHandleLeft+'px;"></div>'),l.push("</div>"),l.push("</div>"),l.push("</div>")),l.push("</div>"),l.join("")}(function(){var o,a=[];for(o=1;o<10;o++)a.push(e["col"+o]);return a}(),e.advance,A(),e.target.css(e.targetattr)||"transparent",e.noAlpha);window.WXApp&&(e.appendToWeb=!1),a(e.appendToWeb?"#web":"body").append(r);var n={top:"",left:"",width:"225px","z-index":9999};o.extend(n,function(e){var a,t,r=e.$$;if(e.showInTop){var n=r(".formDialog");if($$popupwindow=n.length>0?n:r(".fk-popupWindowVT"),$$popupwindow.offset()){var i=$$popupwindow.last().offset();t=e.left+i.left+e.base.offset().left+e.base.width()/2-12,a=e.top+i.top+e.base.offset().top+e.base.height()/2+27}else t=e.left+e.base.offset().left+e.base.width()/2-12,a=e.top+e.base.offset().top+e.base.height()/2+15;t=t<0?0:t;var l=Fai.top.$("#g_main").width()-245;t=t>l?t-2*(e.base.width()/2+12)-245:t;var c=30,s=Fai.top.$("#g_main").height()+Fai.top.$("#g_main").scrollTop()-255-c;a=a>s?s:a}else if(0!=e.moduleId){t=e.left+e.base.offset().left+e.base.width()/2-12,a=e.top+e.base.offset().top+e.base.height()/2-22,t=t-206-50;var d=e.appendToWeb||!e.isSystemModule?o("#module"+e.moduleId):o("#"+e.moduleId),p=d.width(),u=(d.height(),d.offset().top,o(e.base).parent().width()),f=o(e.base).parent().offset().top-(e.appendToWeb?r("#web").offset().top:0),h=o(e.base).parent().offset().left,g=o(window).width(),v=o(window).height(),k=o(e.base).parent().offset().top+o("#g_main").scrollTop()+255-r("#web").height();if(250>h&&h+p+250<=g){a=e.appendToWeb?k>0?f-k:f:255+f>v?f-(v-255):f;var b=5;(o(e.base).hasClass("border-tool-icon")||o(e.base).hasClass("shadow-tool-icon"))&&(b=30),t=p>u?h+p+b:h+u+b}else 250<h?(a=e.appendToWeb?k>0?f-k:f:255+f>v?v-255:f,t=h-250,t+=e.__left,a+=e.__top):(a=e.appendToWeb?k>0?f-k:f:255+f>v?v-255:f,t=p>u?h+(p-250)/2:h+(u-250)/2)}else if(t=e.left+e.base.offset().left+e.base.width()/2-12,a=e.top+e.base.offset().top+e.base.height()/2-22,t=t-206-50,window===Fai.top&&!window.WXApp){a=a-Fai.top.$("#g_main").offset().top+Fai.top.$("#g_main").scrollTop()+27+10+5,t=(t+=Fai.top.$("#g_main").scrollLeft())<0?0:t;var l=Fai.top.$("#g_main").width()-245;t=t>l?t-2*(e.base.width()/2+12)-245:t;var c=30,s=Fai.top.$("#g_main").height()+Fai.top.$("#g_main").scrollTop()-255-c;a=a>s?s:a}return{top:a,left:t}}(e));var i=A().length>0?"235":"190";i=e.noAlpha?i-35:i,i+="px",a(".J_faiColorPickerAlp").css(n).show().animate({height:i}),a(".J_faiColorPickerAlp").click(function(o){o.stopPropagation()}),a(".J_faiColorPickerAlp").find("#faiColorPicker-hidden").focus();var l="",h=navigator.userAgent.toLowerCase();l=/msie/.test(h)?"-ms-":/chrome/.test(h)||/safari/.test(h)||/yandex/.test(h)?"-webkit-":/mozilla/.test(h)?"-moz-":/opera/.test(h)?"-o-":/konqueror/.test(h)?"-khtml-":"",a(".J_faiColorPickerAlp").css(l+"user-select","none").addClass("unselectable").attr("unselectable","on").on("selectstart mousedown",!1),e.showStatus=1,function(e){var a=e.$$,t=a(".J_faiColorPickerAlp"),r=e.target.css(e.targetattr)||"transparent";e.originalColor=r,e.elm=e.target,t.off(".cpa").on("click.cpa",".J_colorPicker_normal",e,c).on("mouseenter.cpa",".J_colorPicker_normal",e,p).on("mouseleave.cpa",".J_colorPicker_normal, .J_original_clear",e,u).on("click.cpa",".J_original_clear",e,s).on("mouseenter.cpa",".J_original_clear",e,d).on("click.cpa",".J_coloradvance_btn",e,v).on("touchstart.cpa mousedown.cpa",".J_sp_alpha",e,k),e.hideAfterSet&&t.on("click.cpa",".J_colorPicker_normal, .J_original_clear",e,f);if(e.target.siblings(".tool").one("click",f),a("body").unbind("click",f).bind("click",{$$:a,elm:e.target,targetattr:e.targetattr,onchange:e.onchange,showStatus:e.showStatus,onShowStatus:e.onShowStatus,changeStop:e.changeStop,originalColor:e.originalColor,noAlpha:e.noAlpha},f),Fai.top.$("body").unbind("click",f).bind("click",{$$:a,elm:e.target,targetattr:e.targetattr,onchange:e.onchange,showStatus:e.showStatus,onShowStatus:e.onShowStatus,changeStop:e.changeStop,originalColor:e.originalColor,noAlpha:e.noAlpha},f),e.showInTop){o("body").unbind("click",f).bind("click",{$$:a,elm:e.target,targetattr:e.targetattr,onchange:e.onchange,changeStop:e.changeStop,originalColor:e.originalColor,noAlpha:e.noAlpha},f);var n=a(".faiColorPicker");n.mouseout(function(){n.attr("mouseIn",0)}).mouseover(function(){n.attr("mouseIn",1)}).focusout(function(){1!=n.attr("mouseIn")?n.remove():n.find("#faiColorPicker-hidden").focus()})}}(e)}function c(e){var a=e.data,t=a.$$,r=t(this).find("div").css("background-color");b(t,!1,r=a.noAlpha?x(r):1==q(r)?I(r):r),m(t,!1,r),t(".J_colorPicker_normal").removeClass("current-col-color J_current_col_color"),o(this).addClass("current-col-color J_current_col_color"),a.onchange.call(a.elm,r),J(r),t(".J_faiColorPickerAlp").removeData("originalAlp").removeData("hasReset"),a.noAlpha&&(a._onclick.call(a.elm),t(".J_faiColorPickerAlp").remove())}function s(o){var e=o.data,a=e.$$;o.stopPropagation(),b(a,!0),a(".J_colorPicker_normal").removeClass("current-col-color J_current_col_color"),a(".J_faiColorPickerAlp").data("hasReset",!0),e.onchange.apply(e.elm,["transparent","transparent"]),e.noAlpha&&a(".J_faiColorPickerAlp").remove()}function d(o){var e=o.data.$$;b(e,!0),m(e,!0),_(e,1)}function p(e){var a=e.data,t=a.$$,r=o(this).find("div").css("background-color");b(t,!1,r),m(t,!1,r);var n=q(r);_(t,n),r=a.noAlpha?x(r):1==n?I(r):r,a.onchange.call(a.elm,r)}function u(o){var e=o.data,a=e.$$,t=g(o),r=h(o);F(r)?(b(a,!0),m(a,!0),_(a,1)):(b(a,!1,r),m(a,!1,r),_(a,t)),r=e.noAlpha?x(r):1==t?I(r):r,o.data.onchange.call(e.elm,r)}function f(o){o.stopPropagation&&o.stopPropagation(),Fai.top.$("body").unbind("click",f);var e=o.data.$$;if(!(e(".J_faiColorPickerAlp").length<1)){var a=h(o);a=o.data.noAlpha?x(a):1==q(a)?I(a):a,o.data.originalColor!==a&&o.data.changeStop(a,o.data.originalColor),e(".J_faiColorPickerAlp").remove(),_typeof(o.data.showStatus)||(o.data.onShowStatus(o.data.showStatus),setTimeout(function(){o.data.showStatus=0},300))}}function h(o){var e=o.data,a=e.$$,t=a(".J_faiColorPickerAlp"),r=a(".J_current_col_color").find("div").css(e.targetattr)||e.originalColor,n=g(o);return t.data("hasReset")?"transparent":"transparent"==r?"transparent":S(r,n)}function g(o){var e=o.data,a=e.$$,t=a(".J_current_col_color").find("div").css(e.targetattr)||e.originalColor,r=a(".J_faiColorPickerAlp").data("originalAlp");return null==r?q(t):r}function v(e){e.stopPropagation();var a=e.data.$$,t=e.data.elm.css(e.data.targetattr);e.data.noAlpha||e.data.inputHexStatus("1",t);var r=a(".J_faiColorPickerAlp").offset().top,n=a(".J_faiColorPickerAlp").offset().left;e.data.appendToWeb&&(r=parseInt(a(".J_faiColorPickerAlp").css("top")),n=parseInt(a(".J_faiColorPickerAlp").css("left"))),a(".J_faiColorPickerAlp").remove(),a(".J_advanceColorPicker").remove(),a(e.data.appendToWeb?"#web":"body").append("<div class='J_advanceColorPicker'></div>"),t=F(t)?"FFFFFF":x(t),a(".J_advanceColorPicker").faiColorPickerAdven({flat:!0,color:t,onHide:function(e){return Fai.top.$("body").unbind("click",f),a("body").unbind("click",f),o("body").unbind("click",f),a(".J_advanceColorPicker").hide(),setTimeout(function(){a(".J_advanceColorPicker").remove()},500),!1},onShow:function(o){return!1},inputHexChange:function(o,a){e.data.inputHexStatus(o,"#"+a)},onChange:function(o,a,t,r){e.data.onchange("#"+a),r||J("#"+a),e.stopPropagation()}}),e.data.appendToWeb?a(".J_colorPickerAdven").css({top:r,left:n}):a(".J_colorPickerAdven").css({top:r+e.data._top,left:n+e.data._left}),a(".J_advanceColorPicker").data("open",!0);var i="",c=navigator.userAgent.toLowerCase();i=/msie/.test(c)?"-ms-":/chrome/.test(c)||/safari/.test(c)||/yandex/.test(c)?"-webkit-":/mozilla/.test(c)?"-moz-":/opera/.test(c)?"-o-":/konqueror/.test(c)?"-khtml-":"",a(".J_colorpicker_color,.J_colorpicker_brt,.J_colorpicker_hex label").css(i+"user-select","none").addClass("unselectable").attr("unselectable","on").on("selectstart mousedown",!1),a(".J_colorpicker_back").off("click.back").on("click.back",function(o){l(e.data),o.stopPropagation()})}function k(e,a,t,r){var n=e.data.elm.css(e.data.targetattr);if(!F(n)){e.stopPropagation();var l=e.data.$$,c=l(this),s=(e=e).data.onchange,d=e.data.elm,p=(e.data.targetattr,a=a||function(){},t=t||function(){},r=r||function(){},document),u=!1,f={},h=0,g=0,v={};v.selectstart=m,v.dragstart=m,v["touchmove mousemove"]=_,v["touchend mouseup"]=function(){u&&(o(p).unbind(v),o(p.body).removeClass("sp-dragging"),setTimeout(function(){r.apply(c,arguments)},0));u=!1;var e=(168-c.find(".J_sp_alpha_handle").position().left)/168;e=e<0?0:e;var a=S(l(".J_original_color").css("background-color"),e);a=1==e?I(a):a,l(".J_faiColorPickerAlp ").data("originalAlp",e),1!=e&&i()&&J(a)};var k=e.which?3==e.which:2==e.button,b=l(".J_faiColorPickerAlp");k||u||!1!==t.apply(c,arguments)&&(u=!0,h=o(c).height(),g=o(c).width()-12,f=o(c).offset(),b.bind(v),o(p.body).addClass("sp-dragging"),_(e),m(e))}function m(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault(),o.returnValue=!1}function _(a){if(u){var t=a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0],r=t&&t.pageX||a.pageX,l=t&&t.pageY||a.pageY,p=Math.max(0,Math.min(r-f.left,g));Math.max(0,Math.min(l-f.top,h));c.find(".J_sp_alpha_handle").css({left:p+"px"});var v=(168-c.find(".J_sp_alpha_handle").position().left)/168;v=v<0?0:v;var k=b.find(".J_original_color").css("background-color");o.browser.mozilla&&(k=F(k)?n:k),k=S(k,v),b.find(".J_original_color").css("background-color",k);var m=e.data.noAlpha?x(I(k)):i()?k:I(k);s.apply(d,[m,k])}}}function b(o,e,a){a=e?"transparent":a,o(".J_original_color").css("background-color",a)}function m(e,a,t){t=a?"transparent":I(t),o.browser.msie&&"9.0"==o.browser.version?e(".J_sp_alpha_inner").css("filter","progid:DXImageTransform.Microsoft.gradient(GradientType='1', startColorstr='"+x(t)+"', endColorstr='#ffffff')"):e(".J_sp_alpha_inner").css("background","linear-gradient(to right, "+t+", rgba(0,0,0,0))")}function _(o,e){o(".J_sp_alpha_handle").css("left",168*(1-e)+"px")}window.addEventListener("load",function(){var o=document.createElement("div");document.body.appendChild(o),t=new Vue({el:o,data:{options:{}},methods:{show:function(o){if(this.options={},n(o.onChange)||(o.onChange=r),n(o.onChangeStop)||(o.onChangeStop=r),o.syncToBase){var e=o.base,a=o.onChange;e.style.background=e.style.background||e.style.backgroundColor||o.defaultColor,o.initialColor=e.style.background,o.onChange=function(o){a(o),e.style.background=o}}this.options=o,this.$refs.colorPicker.show(o)},hide:function(){this.options={},this.$refs.colorPicker.hide()},handleChange:function(o){this.options.onChange(o)},handleChangeStop:function(o,e){this.options.onChangeStop(o,e)}},template:'<color-picker-v2-component style="display: none;" ref="colorPicker" @on-change="handleChange" @on-change-stop="handleChangeStop"/>'})},!1),Site.colorPickerV2={width:249,height:346,nonHeaderHeight:346,withHeaderHeight:380,show:function(o){this.height=!1===o.openGradientMode?346:380,t&&t.show(o)},hide:function(){t&&t.hide()}},o.fn.faiColorPickerAlp=function(e){var a={base:this,target:this,baseattr:"background-color",targetattr:"background-color",col1:["#FCC02E","#FED835","#FFEB3C","#FFF176","#FFF59C","origin"],col2:["#F67C01","#FB8C00","#FFA727","#FFB74E","#FFCC80","#FFFFFF"],col3:["#E64A19","#F5511E","#FE5722","#FF8A66","#FFAB91","#DEDEDE"],col4:["#D81B43","#EB1D4E","#EB4165","#F1627E","#FB879E","#A9A9A9"],col5:["#8E24AA","#9C28B1","#AA47BC","#B968C7","#CF93D9","#4B4B4B"],col6:["#512DA7","#5D35B0","#673BB7","#7986CC","#9EA8DB","#353535"],col7:["#1F87E8","#2097F3","#42A5F6","#64B5F6","#90CAF8","#212121"],col8:["#008781","#029688","#26A59A","#80CBC4","#B2DFDC","#000000"],col9:["#05A045","#4CB050","#83C683","#A5D6A7","#C8E6CA","advance"],advance:!0,showInTop:!1,appendToWeb:!1,showStatus:0,onShowStatus:o.noop,onchange:o.noop,changeStop:o.noop,inputHexStatus:o.noop,top:0,left:0,moduleId:0,_top:0,_left:0,hideAfterSet:!1,__top:0,__left:0,noAlpha:!1,_onclick:o.noop};(e=o.extend({},a,e)).showInTop?e.$$=Fai.top.$:e.$$=o,e.base.bind("click",l(e))};var w=window.localStorage&&window.localStorage.setItem,C=window.localStorage&&window.localStorage.getItem,y=function(){},P=function(){};function A(){return null==y("faiColorPickerAlp")?"":JSON.parse(y("faiColorPickerAlp"))}function J(o){if(null==y("faiColorPickerAlp")){var e=new Array(o);P("faiColorPickerAlp",JSON.stringify(e))}else{e=JSON.parse(y("faiColorPickerAlp"));for(var a=0;a<e.length;a++)if(e[a]==o)return;9==e.length?(e.pop(),e.unshift(o),P("faiColorPickerAlp",JSON.stringify(e))):(e.unshift(o),P("faiColorPickerAlp",JSON.stringify(e)))}}function x(o){if(!o)return"";if(/#/g.test(o))return o;o=o.replace(/[rgba\(\)]/g,"").split(",");for(var e,a=["#"],t=0;t<3;t++)1===(e=parseInt(o[t]).toString(16)).length&&(e="0"+e),a.push(e);return a.join("")}function S(o,e){e=e||0;return function(o,e){return/rgba/gi.test(o)?o:(e=e||0,["rgba(",(o=parseInt(o.substring(1),16))>>16,",",(65280&o)>>8,",",255&o,",",e,")"].join(""))}(x(o),e)}function I(o){if(!o)return"";if(F(o))return"transparent";if(/#/g.test(o))return o;var e=o.split("(")[1].split(")")[0].split(",");return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function F(o){return!!(o&&"rgba(0,0,0,0)"==o.replace(/\s/g,"")||"transparent"==o)}function q(o){return function(o){return!!/rgba/gi.test(o)}(o)?o.split("(")[1].split(")")[0].split(",")[3]:1}C&&(y=function(o){return window.localStorage.getItem(o)}),w&&(P=function(o,e){return window.localStorage.setItem(o,e)})}(jQuery),function(o){var e,a,t,r,n,i,l,c,s,d,p,u,f,h,g,v,k,b,m,_,w,C,y,P,A,J,x,S,I,F,q,$,M,B,N,H,T,E,O,D,W,X,z=(e={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},inputHexFocus:function(){},inputHexChange:function(){},inputHexBlur:function(){},color:"ff0000",livePreview:!0,flat:!1},a=function(e,a){var t=O(e);o(a).data("colorpicker").fields.eq(1).val(t.r).end().eq(2).val(t.g).end().eq(3).val(t.b).end()},t=function(e,a){o(a).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()},r=function(e,a){o(a).data("colorpicker").fields.eq(0).val(D(e)).end()},n=function(e,a){o(a).data("colorpicker").fields.eq(0).val(e.indexOf("#")>-1?e.substring(1):e).end()},i=function(e,a){var t=W(e);o(a).data("colorpicker").selectorIndic.css({left:t.left,top:t.top})},l=function(e,a){o(a).data("colorpicker").brt.parent().css("backgroundColor","#"+D({h:e.h,s:e.s,b:100})),o(a).data("colorpicker").brt.css("left",parseInt(173-164*e.b/100,10))},c=function(e,a){o(a).data("colorpicker").currentColor.css("backgroundColor","#"+D(e))},s=function(e,a){o(a).data("colorpicker").newColor.css("backgroundColor","#"+D(e))},d=function(o){o.stopPropagation()},p=function(e){e.stopPropagation();var n=e.charCode||e.keyCode||-1;if(17!=n){(n<48||n>57)&&(n<65||n>70)&&(n<96||n>105)&&8!=n&&o(this).val(this.value.replace(/[^0-9^a-f^A-F]/g,""));var c,d=o(this).parent().parent(),p="";if(!0===d.data("colorpicker").livePreview){var u=T(N(this.value)),f=H(N(this.value));d.data("colorpicker").fields.eq(1).val(f.r).end().eq(2).val(f.g).end().eq(3).val(f.b).end().eq(4).val(u.h).end().eq(5).val(u.s).end().eq(6).val(u.b),this.parentNode.className.indexOf("_hex")>0?(p=N(this.value),d.data("colorpicker").color=c=T(N(this.value))):this.parentNode.className.indexOf("_hsb")>0?d.data("colorpicker").color=c=M({h:parseInt(d.data("colorpicker").fields.eq(4).val(),10),s:parseInt(d.data("colorpicker").fields.eq(5).val(),10),b:parseInt(d.data("colorpicker").fields.eq(6).val(),10)}):d.data("colorpicker").color=c=E(B({r:parseInt(d.data("colorpicker").fields.eq(1).val(),10),g:parseInt(d.data("colorpicker").fields.eq(2).val(),10),b:parseInt(d.data("colorpicker").fields.eq(3).val(),10)})),e&&!p&&(a(c,d.get(0)),r(c,d.get(0)),t(c,d.get(0))),i(c,d.get(0)),l(c,d.get(0)),s(c,d.get(0)),p=p||D(c),d.data("colorpicker").inputHexChange.apply(d,["2",p])}}},u=function(e,n){var c,d=o(this).parent().parent(),p="";this.parentNode.className.indexOf("_hex")>0?(p=N(this.value),d.data("colorpicker").color=c=T(N(this.value))):this.parentNode.className.indexOf("_hsb")>0?d.data("colorpicker").color=c=M({h:parseInt(d.data("colorpicker").fields.eq(4).val(),10),s:parseInt(d.data("colorpicker").fields.eq(5).val(),10),b:parseInt(d.data("colorpicker").fields.eq(6).val(),10)}):d.data("colorpicker").color=c=E(B({r:parseInt(d.data("colorpicker").fields.eq(1).val(),10),g:parseInt(d.data("colorpicker").fields.eq(2).val(),10),b:parseInt(d.data("colorpicker").fields.eq(3).val(),10)})),e&&!p&&(a(c,d.get(0)),r(c,d.get(0)),t(c,d.get(0))),i(c,d.get(0)),l(c,d.get(0)),s(c,d.get(0)),p=p||D(c),d.data("colorpicker").onChange.apply(d,[c,p,O(c),n])},f=function(e){var a=o(this).parent().parent();a.data("colorpicker").fields.parent().removeClass("fk-colorpicker-focus");var t="";this.parentNode.className.indexOf("_hex")>0?(t=N(this.value),a.data("colorpicker").color=T(N(this.value))):this.parentNode.className.indexOf("_hsb")>0?a.data("colorpicker").color=M({h:parseInt(a.data("colorpicker").fields.eq(4).val(),10),s:parseInt(a.data("colorpicker").fields.eq(5).val(),10),b:parseInt(a.data("colorpicker").fields.eq(6).val(),10)}):a.data("colorpicker").color=E(B({r:parseInt(a.data("colorpicker").fields.eq(1).val(),10),g:parseInt(a.data("colorpicker").fields.eq(2).val(),10),b:parseInt(a.data("colorpicker").fields.eq(3).val(),10)})),a.data("colorpicker").inputHexBlur.apply(a,["3",t])},h=function(){var e=o(this).parent().parent(),a="";this.parentNode.className.indexOf("_hex")>0?(a=N(this.value),e.data("colorpicker").color=T(N(this.value))):this.parentNode.className.indexOf("_hsb")>0?e.data("colorpicker").color=M({h:parseInt(e.data("colorpicker").fields.eq(4).val(),10),s:parseInt(e.data("colorpicker").fields.eq(5).val(),10),b:parseInt(e.data("colorpicker").fields.eq(6).val(),10)}):e.data("colorpicker").color=E(B({r:parseInt(e.data("colorpicker").fields.eq(1).val(),10),g:parseInt(e.data("colorpicker").fields.eq(2).val(),10),b:parseInt(e.data("colorpicker").fields.eq(3).val(),10)})),e.data("colorpicker").inputHexFocus.apply(e,["1",a]),this.parentNode.className.indexOf("_hex"),o(this).parent().parent().data("colorpicker").fields.parent().removeClass("fk-colorpicker-focus"),o(this).parent().addClass("fk-colorpicker-focus")},g=function(e){var a=o(this).parent().find("input").focus(),t={el:o(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:a,val:parseInt(a.val(),10),preview:o(this).parent().parent().data("colorpicker").livePreview};o(document).bind("mouseup",t,k),o(document).bind("mousemove",t,v)},v=function(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&u.apply(o.data.field.get(0),[!0]),!1},k=function e(a){return u.apply(a.data.field.get(0),[!0]),a.data.el.removeClass("colorpicker_slider").find("input").focus(),o(document).unbind("mouseup",e),o(document).unbind("mousemove",v),!1},b=function(e){var a={cal:o(this).parent(),x:o(this).offset().left};a.preview=a.cal.data("colorpicker").livePreview,e.data={cal:a.cal,x:a.x,preview:a.preview},u.apply(e.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(173-Math.max(9,Math.min(173,e.pageX-e.data.x)))/164,0)).get(0),[e.data.preview]),a.cal.unbind("mouseup.upBrt").bind("mouseup.upBrt",a,_).unbind("mousemove.moveBrt").bind("mousemove.moveBrt",a,m)},m=function(o){var e,n=o.data.cal,c="",d=o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(173-Math.max(9,Math.min(173,o.pageX-o.data.x)))/164,0)).get(0);return d.parentNode.className.indexOf("_hex")>0?(c=N(d.value),n.data("colorpicker").color=e=T(N(d.value))):d.parentNode.className.indexOf("_hsb")>0?n.data("colorpicker").color=e=M({h:parseInt(n.data("colorpicker").fields.eq(4).val(),10),s:parseInt(n.data("colorpicker").fields.eq(5).val(),10),b:parseInt(n.data("colorpicker").fields.eq(6).val(),10)}):n.data("colorpicker").color=e=E(B({r:parseInt(n.data("colorpicker").fields.eq(1).val(),10),g:parseInt(n.data("colorpicker").fields.eq(2).val(),10),b:parseInt(n.data("colorpicker").fields.eq(3).val(),10)})),o&&!c&&(a(e,n.get(0)),r(e,n.get(0)),t(e,n.get(0))),i(e,n.get(0)),l(e,n.get(0)),s(e,n.get(0)),u.apply(n.data("colorpicker").fields.eq(6).val(parseInt(100*(173-Math.max(9,Math.min(173,o.pageX-o.data.x)))/164,0)).get(0),[o.data.preview,!0]),!1},_=function o(e){var t=e.data.cal;return a(t.data("colorpicker").color,t.get(0)),r(t.data("colorpicker").color,t.get(0)),t.unbind("mouseup.upBrt",o).unbind("mousemove.moveBrt",m),u.apply(t.data("colorpicker").fields.eq(6).val(parseInt(100*(173-Math.max(9,Math.min(173,e.pageX-e.data.x)))/164,0)).get(0),[e.data.preview]),!1},w=function(o){var e=o.pageX-o.data.pos.left-91,a=o.pageY-o.data.pos.top-91;return Math.sqrt(e*e+a*a)},C=function(o){var e=o.pageX-o.data.pos.left-91,a=o.pageY-o.data.pos.top-91,t=Math.round(180*Math.atan2(a,e)/Math.PI);return a<0&&(t+=360),t},y=function(e){var a={cal:o(this).parent(),pos:o(this).offset()};a.preview=a.cal.data("colorpicker").livePreview,e.data={cal:a.cal,pos:a.pos,preview:a.preview},u.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(C(e),0)).end().eq(5).val(parseInt(100*w(e)/91,0)).get(0),[e.data.preview]),a.cal.unbind("mouseup.upSelector").bind("mouseup.upSelector",a,A).unbind("mousemove.moveSelector").bind("mousemove.moveSelector",a,P)},P=function(o){return u.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(C(o),0)).end().eq(5).val(parseInt(100*w(o)/91,0)).get(0),[o.data.preview,!0]),!1},A=function o(e){var t=e.data.cal;return a(t.data("colorpicker").color,t.get(0)),r(t.data("colorpicker").color,t.get(0)),t.unbind("mouseup.upSelector",o).unbind("mousemove.moveSelector",P),u.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(C(e),0)).end().eq(5).val(parseInt(100*w(e)/91,0)).get(0),[e.data.preview]),!1},J=function(e){o(this).addClass("fk-colorpicker-focus")},x=function(e){o(this).removeClass("fk-colorpicker-focus")},S=function(e){var a=o(this).parent(),t=a.data("colorpicker").color;a.data("colorpicker").origColor=t,c(t,a.get(0)),a.data("colorpicker").onSubmit(t,D(t),O(t),a.data("colorpicker").el)},I=function(e){var a=o("#"+o(this).data("colorpickerId"));a.data("colorpicker").onBeforeShow.apply(this,[a.get(0)]);var t=o(this).offset(),r=$(),n=t.top+this.offsetHeight,i=t.left;return n+176>r.t+r.h&&(n-=this.offsetHeight+176),i+356>r.l+r.w&&(i-=356),a.css({left:i+"px",top:n+"px"}),0!=a.data("colorpicker").onShow.apply(this,[a.get(0)])&&a.show(),o(document).unbind("mousedown.calHide").bind("mousedown.calHide",{cal:a},F),!1},F=function(e){q(e.data.cal.get(0),e.target,e.data.cal.get(0))||(e.data.cal.data("colorpicker")&&0!=e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),o(document).unbind("mousedown.calHide"))},q=function(o,e,a){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var t=e.parentNode;t&&t!=a;){if(t==o)return!0;t=t.parentNode}return!1},$=function(){var o="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(o?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(o?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(o?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(o?document.documentElement.clientHeight:document.body.clientHeight)}},M=function(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},B=function(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},N=function(o){var e=6-o.length;if(e>0){for(var a=[],t=0;t<e;t++)a.push("0");a.push(o),o=a.join("")}return o},H=function(o){return{r:(o=parseInt(o.indexOf("#")>-1?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o}},T=function(o){return E(H(o))},E=function(o){var e={h:0,s:0,b:0},a=Math.min(o.r,o.g,o.b),t=Math.max(o.r,o.g,o.b),r=t-a;return e.b=t,e.s=0!=t?255*r/t:0,0!=e.s?o.r==t?e.h=(o.g-o.b)/r:o.g==t?e.h=2+(o.b-o.r)/r:e.h=4+(o.r-o.g)/r:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},O=function(o){var e={},a=Math.round(o.h),t=Math.round(255*o.s/100),r=Math.round(255*o.b/100);if(0==t)e.r=e.g=e.b=r;else{var n=r,i=(255-t)*r/255,l=a%60*(n-i)/60;360==a&&(a=0),a<60?(e.r=n,e.b=i,e.g=i+l):a<120?(e.g=n,e.b=i,e.r=n-l):a<180?(e.g=n,e.r=i,e.b=i+l):a<240?(e.b=n,e.r=i,e.g=n-l):a<300?(e.b=n,e.g=i,e.r=i+l):a<360?(e.r=n,e.g=i,e.b=n-l):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},D=function(e){return a=O(e),t=[a.r.toString(16),a.g.toString(16),a.b.toString(16)],o.each(t,function(o,e){1==e.length&&(t[o]="0"+e)}),t.join("");var a,t},W=function(o){var e={},a=2*Math.PI/360*o.h,t=o.s;t>83&&(t=83);var r=Math.sin(a)*t+91,n=Math.cos(a)*t+91;return e.left=n,e.top=r,e},X=function(){var e=o(this).parent(),n=e.data("colorpicker").origColor;e.data("colorpicker").color=n,a(n,e.get(0)),r(n,e.get(0)),t(n,e.get(0)),i(n,e.get(0)),l(n,e.get(0)),s(n,e.get(0))},{init:function(v){var k="";if("string"==typeof(v=o.extend({},e,v||{})).color)k=v.color,v.color=T(v.color);else if(null!=v.color.r&&null!=v.color.g&&null!=v.color.b)v.color=E(v.color);else{if(null==v.color.h||null==v.color.s||null==v.color.b)return this;v.color=M(v.color)}return this.each(function(){if(!o(this).data("colorpickerId")){var e=o.extend({},v);e.origColor=v.color;var m="collorpicker_"+parseInt(1e3*Math.random());o(this).data("colorpickerId",m);var _=o('<div class="J_colorPickerAdven fk-colorPickerAdven"><div class="J_colorpicker_color fk-colorpicker-color"><div><div></div></div></div><div class="J_colorpicker_back fk-colorpicker-back"></div><div class="J_colorpicker_brt fk-colorpicker-brt"><div></div></div><div style="display:none;" class="J_colorpicker_new_color fk-colorpicker-new-color"></div><div style="display:none;" class="J_colorpicker_current_color fk-colorpicker-current-color"></div><div class="J_colorpicker_hex fk-colorpicker-hex"><label>输入色值#</label><input type="text" maxlength="6" size="6"/></div><div style="display:none;" class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div style="display:none;" class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div style="display:none;" class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div style="display:none;" class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div style="display:none;" class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div style="display:none;" class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="J_colorpicker_submit"></div></div>').attr("id",m);e.flat?(_.appendTo(this).show(),o(document).unbind("mousedown.calHide").bind("mousedown.calHide",{cal:_},F),window.WXApp||o.each(Site.getAllPopupWindow(),function(e,a){o(a).length&&o(a).unbind("mousedown.calHide").bind("mousedown.calHide",{cal:_},F)})):_.appendTo(document.body),e.fields=_.find("input").bind("keyup",p).bind("change",u).bind("blur",f).bind("focus",h).bind("keydown",d),_.find("span").bind("mousedown",g).end().find(">div.J_colorpicker_current_color").bind("click",X),e.selector=_.find("div.J_colorpicker_color").unbind("mousedown.downSelector",y).bind("mousedown.downSelector",y),_.find("div.J_colorpicker_color").on("click",function(o){o.stopPropagation()}),_.on("mousedown click mouseup mouseout mouseover mouseenter mouseleave",function(o){o.stopPropagation()}),e.selectorIndic=e.selector.find("div div"),e.el=this,e.brt=_.find("div.J_colorpicker_brt div"),_.find("div.J_colorpicker_brt").unbind("mousedown.downBrt").bind("mousedown.downBrt",b),e.newColor=_.find("div.J_colorpicker_new_color"),e.currentColor=_.find("div.J_colorpicker_current_color"),_.data("colorpicker",e),_.find("div.J_colorpicker_submit").bind("mouseenter",J).bind("mouseleave",x).bind("click",S),a(e.color,_.get(0)),t(e.color,_.get(0)),k?n(k,_.get(0)):r(e.color,_.get(0)),l(e.color,_.get(0)),i(e.color,_.get(0)),c(e.color,_.get(0)),s(e.color,_.get(0)),e.flat?_.css({display:"block"}):o(this).bind(e.eventName,I)}})},showPicker:function(){return this.each(function(){o(this).data("colorpickerId")&&I.apply(this)})},hidePicker:function(){return this.each(function(){o(this).data("colorpickerId")&&o("#"+o(this).data("colorpickerId")).hide()})},setColor:function(e){var d="";if("string"==typeof e)d=e,e=T(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=E(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=M(e)}return this.each(function(){if(o(this).data("colorpickerId")){var p=o("#"+o(this).data("colorpickerId"));p.data("colorpicker").color=e,p.data("colorpicker").origColor=e,a(e,p.get(0)),t(e,p.get(0)),d?n(d,p.get(0)):r(options.color,p.get(0)),l(e,p.get(0)),i(e,p.get(0)),c(e,p.get(0)),s(e,p.get(0))}})}});o.fn.extend({faiColorPickerAdven:z.init,faiColorPickerAdvenHide:z.hidePicker,faiColorPickerAdvenShow:z.showPicker,faiColorPickerAdvenSetColor:z.setColor})}(jQuery);