function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){var i=window;setTimeout;function e(){var t={};for(type in{Top:"",Left:""}){var i="Top"==type?"Y":"X";void 0!==window["page"+i+"Offset"]?t[type.toLowerCase()]=window["page"+i+"Offset"]:(i=document.documentElement.clientHeight?document.documentElement:document.body,t[type.toLowerCase()]=i["scroll"+type])}return t}window.Snow=function(t,i){!function(){for(var t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){return window.setTimeout(function(){t(14)},14)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),this.settings=i,this.flakes=[],this.flakeCount=i.count,this.mx=-100,this.my=-100,this.init(t)},Snow.prototype.init=function(e){this.canvas=e.get(0),this.ctx=this.canvas.getContext("2d"),this.canvas.width=i.innerWidth,this.canvas.height=t(e.get(0)).attr("height"),this.flakes=[];for(var s=0;s<this.flakeCount;s++){var r=Math.floor(Math.random()*this.canvas.width),a=Math.floor(Math.random()*this.canvas.height),o=Math.floor(100*Math.random())%this.settings.size+2,n=Math.floor(100*Math.random())%this.settings.speed+Math.random()*o/10+.5,h=.5*Math.random()+this.settings.opacity;this.flakes.push({speed:n,velY:n,velX:0,x:r,y:a,size:o,stepSize:Math.random()/30,step:0,angle:180,opacity:h})}1==this.settings.interaction&&this.canvas.addEventListener("mousemove",function(t){this.mx=t.clientX,this.my=t.client});"string"==typeof this.settings.image&&(this.image=t("<img src='"+this.settings.image+"' style='display: none'>")),this.snow()},Snow.prototype.snow=function(){var t=this;!function e(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height);for(var s=0;s<t.flakeCount;s++){var r=t.flakes[s],a=t.mx,o=t.my,n=r.x,h=r.y,c=Math.sqrt((n-a)*(n-a)+(h-o)*(h-o));if(100>c){var l=(a-n)/c,d=(o-h)/c,p=100/(c*c)/2;r.velX-=p*l,r.velY-=p*d}else switch(r.velX*=.98,r.velY<=r.speed&&(r.velY=r.speed),t.settings.windPower){case!1:case 0:r.velX+=Math.cos(r.step+=.05)*r.stepSize;break;default:r.velX+=.01+t.settings.windPower/100}if(r.y+=r.velY,r.x+=r.velX,(r.y>=t.canvas.height||r.y<=0)&&t.resetFlake(r),(r.x>=t.canvas.width||r.x<=0)&&t.resetFlake(r),0==t.settings.image){var u=t.ctx.createRadialGradient(r.x,r.y,0,r.x,r.y,r.size-1);u.addColorStop(0,t.settings.startColor),u.addColorStop(1,t.settings.endColor),t.ctx.fillStyle=u,t.ctx.beginPath(),t.ctx.arc(r.x,r.y,r.size,0,2*Math.PI),t.ctx.fill()}else t.ctx.drawImage(t.image.get(0),r.x,r.y,2*r.size,2*r.size)}i.cancelAnimationFrame(e),i.requestAnimationFrame(e)}()},Snow.prototype.resetFlake=function(t){if(0==this.settings.windPower||0==this.settings.windPower)t.x=Math.floor(Math.random()*this.canvas.width),t.y=0;else if(this.settings.windPower>0){var i=Array(Math.floor(Math.random()*this.canvas.width),0),e=Array(0,Math.floor(Math.random()*this.canvas.height)),s=(r=Array(i,e))[Math.floor(Math.random()*r.length)];t.x=s[0],t.y=s[1]}else{var r;i=Array(Math.floor(Math.random()*this.canvas.width),0),e=Array(this.canvas.width,Math.floor(Math.random()*this.canvas.height)),s=(r=Array(i,e))[Math.floor(Math.random()*r.length)];t.x=s[0],t.y=s[1]}t.size=Math.floor(100*Math.random())%this.settings.size+2,t.speed=Math.floor(100*Math.random())%this.settings.speed+Math.random()*t.size/10+.5,t.velY=t.speed,t.velX=0,t.opacity=.5*Math.random()+this.settings.opacity},t.fn.faiSnow=function(){"function"==typeof document.createElement("canvas").getContext&&t(this).each(function(i,e){var s={};t.each(e.attributes,function(i,e){s[t.camelCase(e.name)]=Number(Number(e.value))?Number(e.value):e.value}),"string"==typeof s.image&&"false"===s.image&&(s.image=!1),new Snow(t(e),{speed:1,interaction:s.interaction||!0,size:s.size||2,count:s.count||200,opacity:s.opacity||1,startColor:s.startColor||"rgba(255,255,255,1)",endColor:s.endColor||"rgba(255,255,255,0)",windPower:s.windPower||0,image:s.image||!1})})};function s(t){this.parent=document.body,this.createEl(this.parent,t),this.size=5*Math.random()+5,this.el.style.width=Math.round(this.size)+"px",this.el.style.height=Math.round(this.size)+"px",this.maxLeft=document.body.offsetWidth-this.size,this.maxTop=document.body.offsetHeight-this.size,this.left=Math.random()*this.maxLeft,this.top=e().top+1,this.angle=1.4+.2*Math.random(),this.minAngle=1.4,this.maxAngle=1.6,this.angleDelta=.01*Math.random(),this.speed=2+Math.random()}s.prototype={createEl:function(t,i){this.el=document.createElement("img"),this.el.classname="nicesnowclass",this.el.setAttribute("src",i||"./imgs/snow.png"),this.el.style.position="absolute",this.el.style.display="block",this.el.style.zIndex="99999",this.parent.appendChild(this.el)},move:function(){(this.angle<this.minAngle||this.angle>this.maxAngle)&&(this.angleDelta=-this.angleDelta),this.angle+=this.angleDelta,this.left+=this.speed*Math.cos(this.angle*Math.PI),this.top-=this.speed*Math.sin(this.angle*Math.PI),this.left<0?this.left=this.maxLeft:this.left>this.maxLeft&&(this.left=0)},draw:function(){this.el.style.top=Math.round(this.top)+"px",this.el.style.left=Math.round(this.left)+"px"},remove:function(){this.parent.removeChild(this.el),this.parent=this.el=null}}}(jQuery),function(t){var i,e=t(window);function s(t){return"%"==t[t.length-1]}var r,a,o=(r=document.createElement("canvas"),(a=r.getContext("webgl")||r.getContext("experimental-webgl"))&&a.getExtension("OES_texture_float")&&a.getExtension("OES_texture_float_linear"));function n(t,e,s){function r(t,e){var s=i.createShader(t);if(i.shaderSource(s,e),i.compileShader(s),!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error("compile error: "+i.getShaderInfoLog(s));return s}var a={};if(a.id=i.createProgram(),i.attachShader(a.id,r(i.VERTEX_SHADER,t)),i.attachShader(a.id,r(i.FRAGMENT_SHADER,e)),i.linkProgram(a.id),!i.getProgramParameter(a.id,i.LINK_STATUS))throw new Error("link error: "+i.getProgramInfoLog(a.id));a.uniforms={},a.locations={},i.useProgram(a.id),i.enableVertexAttribArray(0);for(var o,n=/uniform (\w+) (\w+)/g,h=t+e;null!=(match=n.exec(h));)o=match[2],a.locations[o]=i.getUniformLocation(a.id,o);return a}function h(t,e){i.activeTexture(i.TEXTURE0+(e||0)),i.bindTexture(i.TEXTURE_2D,t)}var c=function(e,s){var r=this;this.$el=t(e),this.$el.addClass("jquery-ripples");var a=/url\(["']?([^"']*)["']?\)/.exec(this.$el.css("background-image"));if(null!=a){a=a[1],this.interactive=s.interactive,this.resolution=s.resolution||256,this.textureDelta=new Float32Array([1/this.resolution,1/this.resolution]),this.perturbance=s.perturbance,this.dropRadius=s.dropRadius;var o=document.createElement("canvas");o.width=this.$el.innerWidth(),o.height=this.$el.innerHeight(),this.canvas=o,this.canvasWidth=o.width,this.canvasHeight=o.width,this.$canvas=t(o),this.$canvas.css({position:"absolute",left:0,top:0,right:0,bottom:0,pointerEvents:"none"}),this.$el.append(o),this.context=i=o.getContext("webgl")||o.getContext("experimental-webgl"),i.getExtension("OES_texture_float"),i.getExtension("OES_texture_float_linear"),this.$el.on("mousemove.ripples",function(t){r.visible&&r.running&&r.interactive&&r.dropAtMouse(t,r.dropRadius,.01)}).on("mousedown.ripples",function(t){r.visible&&r.running&&r.interactive&&r.dropAtMouse(t,1.5*r.dropRadius,.14)}),this.textures=[],this.framebuffers=[];for(var n=0;n<2;n++){var h=i.createTexture(),c=i.createFramebuffer();if(i.bindFramebuffer(i.FRAMEBUFFER,c),c.width=this.resolution,c.height=this.resolution,i.bindTexture(i.TEXTURE_2D,h),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.resolution,this.resolution,0,i.RGBA,i.FLOAT,null),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,h,0),i.checkFramebufferStatus(i.FRAMEBUFFER)!=i.FRAMEBUFFER_COMPLETE)throw new Error("Rendering to this texture is not supported (incomplete framebuffer)");i.bindTexture(i.TEXTURE_2D,null),i.bindFramebuffer(i.FRAMEBUFFER,null),this.textures.push(h),this.framebuffers.push(c)}this.running=!0,this.quad=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.quad),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,1,1,-1,1]),i.STATIC_DRAW),this.initShaders();var l=new Image;l.crossOrigin="",l.onload=function(){function t(t){return 0==(t&t-1)}i=r.context;var e=t(l.width)&&t(l.height)?i.REPEAT:i.CLAMP_TO_EDGE;r.backgroundWidth=l.width,r.backgroundHeight=l.height;var s=i.createTexture();i.bindTexture(i.TEXTURE_2D,s),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,1),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,l),r.backgroundTexture=s};var d=this.canvas.toDataURL(a);l.src=d,this.visible=!0,function t(){r.step(),cancelAnimationFrame(t),requestAnimationFrame(t)}()}};c.DEFAULTS={resolution:256,dropRadius:20,perturbance:.03,interactive:!0},c.prototype={step:function(){i=this.context,this.visible&&this.backgroundTexture&&(this.computeTextureBoundaries(),this.running&&this.update(),this.render())},drawQuad:function(){i.bindBuffer(i.ARRAY_BUFFER,this.quad),i.vertexAttribPointer(0,2,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLE_FAN,0,4)},render:function(){i.viewport(0,0,this.canvasWidth,this.canvasHeight),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.useProgram(this.renderProgram.id),h(this.backgroundTexture,0),h(this.textures[0],1);var t=this.renderProgram.locations.topLeft,e=this.renderProgram.locations.bottomRight,s=this.renderProgram.locations.containerRatio,r=this.renderProgram.locations.samplerBackground,a=this.renderProgram.locations.samplerRipples;i.uniform2fv(t,this.renderProgram.uniforms.topLeft),i.uniform2fv(e,this.renderProgram.uniforms.bottomRight),i.uniform2fv(s,this.renderProgram.uniforms.containerRatio),i.uniform1i(r,0),i.uniform1i(a,1),this.drawQuad()},update:function(){i.viewport(0,0,this.resolution,this.resolution);for(var t=0;t<2;t++)i.bindFramebuffer(i.FRAMEBUFFER,this.framebuffers[t]),h(this.textures[1-t]),i.useProgram(this.updateProgram[t].id),this.drawQuad();i.bindFramebuffer(i.FRAMEBUFFER,null)},computeTextureBoundaries:function(){this.$el.offset();var t=this.$el.offset().left,i=this.$el.offset().Top,r=this.$el.css("background-size"),a=this.$el.css("background-attachment"),o=this.$el.css("background-position").split(" "),n="fixed"==a?e:this.$el,h=n.offset()||{left:pageXOffset,top:pageYOffset},c=h.left,l=h.top,d=n.innerWidth(),p=n.innerHeight(),u=Math.max(this.canvasWidth,this.canvasHeight),f=this.backgroundWidth;if("cover"==r)var g=f*(v=Math.max(d/f,p/this.backgroundHeight)),m=this.backgroundHeight*v;else if("contain"==r){var v;g=f*(v=Math.min(d/f,p/this.backgroundHeight)),m=this.backgroundHeight*v}else{g=(r=r.split(" "))[0]||"",m=r[1]||g;s(g)?g=d*parseFloat(g)/100:"auto"!=g&&(g=parseFloat(g)),s(m)?m=p*parseFloat(m)/100:"auto"!=m&&(m=parseFloat(m)),"auto"==g&&"auto"==m?(g=f,m=this.backgroundHeight):("auto"==g&&(g=f*(m/this.backgroundHeight)),"auto"==m&&(m=this.backgroundHeight*(g/f)))}var x=o[0]||"",y=o[1]||x;x="left"==x?c:"center"==x?c+d/2-g/2:"right"==x?c+d-g:s(x)?c+(d-g)*parseFloat(x)/100:parseFloat(x),y="top"==y?l:"center"==y?l+p/2-m/2:"bottom"==y?l+p-m:s(y)?l+(p-m)*parseFloat(y)/100:parseFloat(y),this.renderProgram.uniforms.topLeft=new Float32Array([(t-x)/g,(i-y)/m]),this.renderProgram.uniforms.bottomRight=new Float32Array([((t-x)/g+this.canvasWidth)/g,((i-y)/m+this.canvasHeight)/m]),this.renderProgram.uniforms.containerRatio=new Float32Array([this.canvasWidth/u,this.canvasHeight/u])},initShaders:function(){var t=["attribute vec2 vertex;","varying vec2 coord;","void main() {","coord = vertex * 0.5 + 0.5;","gl_Position = vec4(vertex, 0.0, 1.0);","}"].join("\n");this.dropProgram=n(t,["precision highp float;","const float PI = 3.141592653589793;","uniform sampler2D texture;","uniform vec2 center;","uniform float radius;","uniform float strength;","varying vec2 coord;","void main() {","vec4 info = texture2D(texture, coord);","float drop = max(0.0, 1.0 - length(center * 0.5 + 0.5 - coord) / radius);","drop = 0.5 - cos(drop * PI) * 0.5;","info.r += drop * strength;","gl_FragColor = info;","}"].join("\n")),this.updateProgram=[0,0],this.updateProgram[0]=n(t,["precision highp float;","uniform sampler2D texture;","uniform vec2 delta;","varying vec2 coord;","void main() {","vec4 info = texture2D(texture, coord);","vec2 dx = vec2(delta.x, 0.0);","vec2 dy = vec2(0.0, delta.y);","float average = (","texture2D(texture, coord - dx).r +","texture2D(texture, coord - dy).r +","texture2D(texture, coord + dx).r +","texture2D(texture, coord + dy).r",") * 0.25;","info.g += (average - info.r) * 2.0;","info.g *= 0.995;","info.r += info.g;","gl_FragColor = info;","}"].join("\n")),i.uniform2fv(this.updateProgram[0].locations.delta,this.textureDelta),this.updateProgram[1]=n(t,["precision highp float;","uniform sampler2D texture;","uniform vec2 delta;","varying vec2 coord;","void main() {","vec4 info = texture2D(texture, coord);","vec3 dx = vec3(delta.x, texture2D(texture, vec2(coord.x + delta.x, coord.y)).r - info.r, 0.0);","vec3 dy = vec3(0.0, texture2D(texture, vec2(coord.x, coord.y + delta.y)).r - info.r, delta.y);","info.ba = normalize(cross(dy, dx)).xz;","gl_FragColor = info;","}"].join("\n")),i.uniform2fv(this.updateProgram[1].locations.delta,this.textureDelta),this.renderProgram=n(["precision highp float;","attribute vec2 vertex;","uniform vec2 topLeft;","uniform vec2 bottomRight;","uniform vec2 containerRatio;","varying vec2 ripplesCoord;","varying vec2 backgroundCoord;","void main() {","backgroundCoord = mix(topLeft, bottomRight, vertex * 0.5 + 0.5);","backgroundCoord.y = 1.0 - backgroundCoord.y;","ripplesCoord = vec2(vertex.x, -vertex.y) * containerRatio * 0.5 + 0.5;","gl_Position = vec4(vertex.x, -vertex.y, 0.0, 1.0);","}"].join("\n"),["precision highp float;","uniform sampler2D samplerBackground;","uniform sampler2D samplerRipples;","uniform float perturbance;","varying vec2 ripplesCoord;","varying vec2 backgroundCoord;","void main() {","vec2 offset = -texture2D(samplerRipples, ripplesCoord).ba;","float specular = pow(max(0.0, dot(offset, normalize(vec2(-0.6, 1.0)))), 4.0);","gl_FragColor = texture2D(samplerBackground, backgroundCoord + offset * perturbance) + specular;","}"].join("\n")),i.uniform1f(this.renderProgram.locations.perturbance,this.perturbance)},dropAtMouse:function(t,i,e){this.drop(t.pageX-this.$el.offset().left,t.pageY-this.$el.offset().top,i,e)},drop:function(t,e,s,r){i=this.context;var a=this.$el.outerWidth(),o=this.$el.outerHeight(),n=Math.max(a,o);s/=n;var c=new Float32Array([(2*t-a)/n,(o-2*e)/n]);i.viewport(0,0,this.resolution,this.resolution),i.bindFramebuffer(i.FRAMEBUFFER,this.framebuffers[0]),h(this.textures[1]),i.useProgram(this.dropProgram.id),i.uniform2fv(this.dropProgram.locations.center,c),i.uniform1f(this.dropProgram.locations.radius,s),i.uniform1f(this.dropProgram.locations.strength,r),this.drawQuad();var l=this.framebuffers[0];this.framebuffers[0]=this.framebuffers[1],this.framebuffers[1]=l,l=this.textures[0],this.textures[0]=this.textures[1],this.textures[1]=l,i.bindFramebuffer(i.FRAMEBUFFER,null)},destroy:function(){this.context.getExtension("WEBGL_lose_context").loseContext(),this.canvas.remove(),this.$el.off(".ripples"),this.$el.removeClass("jquery-ripples").removeData("ripples")},show:function(){this.$canvas.show(),this.$el.css("backgroundImage","none"),this.visible=!0},hide:function(){this.$canvas.hide(),this.$el.css("backgroundImage",""),this.visible=!1},pause:function(){this.running=!1},play:function(){this.running=!0},set:function(t,i){switch(t){case"interactive":this.interactive=i}}};var l=t.fn.faiRipples;t.fn.faiRipples=function(i){if(o){var e=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var s=t(this),r=s.data("ripples"),a=t.extend({},c.DEFAULTS,s.data(),"object"==_typeof(i)&&i);(r||"string"!=typeof i)&&(r?"string"==typeof i&&c.prototype[i].apply(r,e):s.data("ripples",r=new c(this,a)))})}console.log("Your browser does not support at least one of the following: WebGL, OES_texture_float extension, OES_texture_float_linear extension.")},t.fn.faiRipples.Constructor=c,t.fn.faiRipples.noConflict=function(){return t.fn.faiRipples=l,this}}(jQuery),function(t){function i(t,e){if(this===window)return new i(t,e);this.img=e;var s={opacity:1,blur:10,crop:[0,0,this.img.naturalWidth,this.img.naturalHeight],enableSizeChange:!0,parentElement:null,fps:30,fillStyle:"#8ED6FF",enableCollisions:!0,gravityThreshold:3,gravityAngle:Math.PI/2,gravityAngleVariance:0,reflectionScaledownFactor:5,reflectionDropMappingWidth:200,reflectionDropMappingHeight:200,width:this.img.clientWidth,height:this.img.clientHeight,position:"absolute",top:0,left:0,rainyEffect:0};for(var r in s)void 0===t[r]&&(t[r]=s[r]);this.options=t,this.drops=[],this.canvas=this.prepareCanvas(),this.prepareBackground(),this.prepareGlass(),this.reflection=this.REFLECTION_MINIATURE,this.trail=this.TRAIL_DROPS,this.gravity=this.GRAVITY_NON_LINEAR,this.collision=this.COLLISION_SIMPLE,this.setRequestAnimFrame(),this.beginTime=(new Date).getTime()}function e(t,i,e,s,r){this.x=Math.floor(i),this.y=Math.floor(e),this.r=Math.random()*r+s,this.rainyday=t,this.context=t.context,this.reflection=t.reflected}function s(){this.r=0,this.g=0,this.b=0,this.next=null}function r(t,i,e){this.resolution=e,this.xc=t,this.yc=i,this.matrix=new Array(t);for(var s=0;s<=t+5;s++){this.matrix[s]=new Array(i);for(var r=0;r<=i+5;++r)this.matrix[s][r]=new a(null)}}function a(t){this.drop=t,this.next=null}i.prototype.prepareCanvas=function(){var t=document.createElement("canvas");return t.style.position=this.options.position,t.style.top=this.options.top,t.style.left=this.options.left,t.className="rainyday-canvas",t.width=this.img.width,t.height=this.img.height,null==this.options.parentElement?this.img.parentElement.appendChild(t):this.options.parentElement.appendChild(t),this.options.enableSizeChange,t},i.prototype.setResizeHandler=function(){null!==window.onresize?window.setInterval(this.checkSize.bind(this),100):(window.onresize=this.checkSize.bind(this),window.onorientationchange=this.checkSize.bind(this))},i.prototype.checkSize=function(){var t=this.img.clientWidth,i=this.img.clientHeight,e=this.img.offsetLeft,s=this.img.offsetTop,r=this.canvas.width,a=this.canvas.height,o=this.canvas.offsetLeft,n=this.canvas.offsetTop;r===t&&a===i||(this.canvas.width=t,this.canvas.height=i,this.prepareBackground(),this.glass.width=this.canvas.width,this.glass.height=this.canvas.height,this.prepareReflections()),o===e&&n===s||(this.canvas.offsetLeft=e,this.canvas.offsetTop=s)},i.prototype.animateDrops=function(){this.addDropCallback&&this.addDropCallback();for(var t=0;t<Math.floor(this.drops.length*Math.random()*.4);++t){this.drops[t].animate()}this.drops.length&&window.requestAnimationFrame(this.animateDrops.bind(this))},i.prototype.setRequestAnimFrame=function(){var t=this.options.fps;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(i){window.setTimeout(i,1e3/t)}},i.prototype.prepareReflections=function(){this.reflected=document.createElement("canvas"),this.reflected.width=this.canvas.width/this.options.reflectionScaledownFactor,this.reflected.height=this.canvas.height/this.options.reflectionScaledownFactor,this.reflected.getContext("2d").drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.reflected.width,this.reflected.height)},i.prototype.prepareGlass=function(){this.glass=document.createElement("canvas"),this.glass.width=this.canvas.width,this.glass.height=this.canvas.height,this.context=this.glass.getContext("2d")},i.prototype.rain=function(t,i){var s=this;if(this.reflection!==this.REFLECTION_NONE&&this.prepareReflections(),this.presets=t,this.PRIVATE_GRAVITY_FORCE_FACTOR_Y=.001*this.options.fps/25,this.PRIVATE_GRAVITY_FORCE_FACTOR_X=(Math.PI/2-this.options.gravityAngle)*(.001*this.options.fps)/50,this.options.enableCollisions){for(var a=0,o=0;o<t.length;o++)t[o][0]+t[o][1]>a&&(a=Math.floor(t[o][0]+t[o][1]));if(a>0){var n=Math.ceil(this.canvas.width/a),h=Math.ceil(this.canvas.height/a);this.matrix=new r(n,h,a)}else this.options.enableCollisions=!1}for(o=0;o<t.length;o++)t[o][3]||(t[o][3]=-1);var c=0;this.addDropCallback=function(){var r=(new Date).getTime();if(!(r-c<i)){c=r;var a,o=this.canvas.getContext("2d");o.clearRect(0,0,this.canvas.width,this.canvas.height),o.drawImage(this.background,0,0,this.canvas.width,this.canvas.height);for(var n=0;n<t.length;n++)if(t[n][2]>1||-1===t[n][3]){if(0!==t[n][3]){t[n][3]--;for(var h=0;h<t[n][2];++h)this.putDrop(new e(this,Math.random()*this.canvas.width,Math.random()*this.canvas.height,t[n][0],t[n][1]))}}else if(Math.random()<t[n][2]){a=t[n];break}a&&this.putDrop(new e(this,Math.random()*this.canvas.width,Math.random()*this.canvas.height,a[0],a[1])),o.save(),o.globalAlpha=this.options.opacity,r-s.beginTime>2e4?(o.clearRect(this.glass,0,0,this.canvas.width,this.canvas.height),s.drops=[],s.beginTime=(new Date).getTime(),s.glass=null,s.prepareGlass(),1===s.options.rainyEffect?s.rain([[0,2,10],[3,3,.1]],33):0===s.options.rainyEffect&&s.rain([[3,2,2]],50)):o.drawImage(this.glass,0,0,this.canvas.width,this.canvas.height),o.restore()}}.bind(this),this.animateDrops()},i.prototype.putDrop=function(t){t.draw(),this.gravity&&t.r>this.options.gravityThreshold&&(this.options.enableCollisions&&this.matrix.update(t),this.drops.push(t))},i.prototype.clearDrop=function(t,i){var e=t.clear(i);if(e){var s=this.drops.indexOf(t);s>=0&&this.drops.splice(s,1)}return e},e.prototype.draw=function(){this.context.save(),this.context.beginPath();var t=this.r;if(this.r=.95*this.r,this.r<3)this.context.arc(this.x,this.y,this.r,0,2*Math.PI,!0),this.context.closePath();else if(this.colliding||this.yspeed>2){if(this.colliding){var i=this.colliding;this.r=1.001*(this.r>i.r?this.r:i.r),this.x+=i.x-this.x,this.colliding=null}var e=1+.1*this.yspeed;this.context.moveTo(this.x-this.r/e,this.y),this.context.bezierCurveTo(this.x-this.r,this.y-2*this.r,this.x+this.r,this.y-2*this.r,this.x+this.r/e,this.y),this.context.bezierCurveTo(this.x+this.r,this.y+e*this.r,this.x-this.r,this.y+e*this.r,this.x-this.r/e,this.y)}else this.context.arc(this.x,this.y,.9*this.r,0,2*Math.PI,!0),this.context.closePath();this.context.clip(),this.r=t,this.rainyday.reflection&&this.rainyday.reflection(this),this.context.restore()},e.prototype.clear=function(t){return this.context.clearRect(this.x-this.r-1,this.y-this.r-2,2*this.r+2,2*this.r+2),t?(this.terminate=!0,!0):this.y-this.r>this.rainyday.canvas.height||this.x-this.r>this.rainyday.canvas.width||this.x+this.r<0},e.prototype.animate=function(){if(this.terminate)return!1;var t=this.rainyday.gravity(this);if(!t&&this.rainyday.trail&&this.rainyday.trail(this),this.rainyday.options.enableCollisions){var i=this.rainyday.matrix.update(this,t);i&&this.rainyday.collision(this,i)}return!t||this.terminate},i.prototype.TRAIL_NONE=function(){},i.prototype.TRAIL_DROPS=function(t){(!t.trailY||t.y-t.trailY>=100*Math.random()*t.r)&&(t.trailY=t.y,this.putDrop(new e(this,t.x+(2*Math.random()-1)*Math.random(),t.y-t.r-5,Math.ceil(t.r/5),0)))},i.prototype.TRAIL_SMUDGE=function(t){var i=t.y-t.r-3,e=t.x-t.r/2+2*Math.random();i<0||e<0||this.context.drawImage(this.clearbackground,e,i,t.r,2,e,i,t.r,2)},i.prototype.GRAVITY_NONE=function(){return!0},i.prototype.GRAVITY_LINEAR=function(t){return!!this.clearDrop(t)||(t.yspeed?(t.yspeed+=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y*Math.floor(t.r),t.xspeed+=this.PRIVATE_GRAVITY_FORCE_FACTOR_X*Math.floor(t.r)):(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X),t.y+=t.yspeed,t.draw(),!1)},i.prototype.GRAVITY_NON_LINEAR=function(t){return!!this.clearDrop(t)||(t.collided?(t.collided=!1,t.seed=Math.floor(t.r*Math.random()*this.options.fps),t.skipping=!1,t.slowing=!1):(!t.seed||t.seed<0)&&(t.seed=Math.floor(t.r*Math.random()*this.options.fps),t.skipping=!1===t.skipping,t.slowing=!0),t.seed--,t.yspeed?t.slowing?(t.yspeed/=1.1,t.xspeed/=1.1,t.yspeed<this.PRIVATE_GRAVITY_FORCE_FACTOR_Y&&(t.slowing=!1)):t.skipping?(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X):(t.yspeed+=1*this.PRIVATE_GRAVITY_FORCE_FACTOR_Y*Math.floor(t.r),t.xspeed+=1*this.PRIVATE_GRAVITY_FORCE_FACTOR_X*Math.floor(t.r)):(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X),0!==this.options.gravityAngleVariance&&(t.xspeed+=(2*Math.random()-1)*t.yspeed*this.options.gravityAngleVariance),t.y+=t.yspeed,t.x+=t.xspeed,t.draw(),!1)},i.prototype.positiveMin=function(t,i){var e=0;return(e=t<i?t<=0?i:t:i<=0?t:i)<=0?1:e},i.prototype.REFLECTION_NONE=function(){this.context.fillStyle=this.options.fillStyle,this.context.fill()},i.prototype.REFLECTION_MINIATURE=function(t){var i=Math.max((t.x-this.options.reflectionDropMappingWidth)/this.options.reflectionScaledownFactor,0),e=Math.max((t.y-this.options.reflectionDropMappingHeight)/this.options.reflectionScaledownFactor,0),s=this.positiveMin(2*this.options.reflectionDropMappingWidth/this.options.reflectionScaledownFactor,this.reflected.width-i),r=this.positiveMin(2*this.options.reflectionDropMappingHeight/this.options.reflectionScaledownFactor,this.reflected.height-e),a=Math.max(t.x-1.1*t.r,0),o=Math.max(t.y-1.1*t.r,0);this.context.drawImage(this.reflected,i,e,s,r,a,o,2*t.r,2*t.r)},i.prototype.COLLISION_SIMPLE=function(t,i){for(var e,s,r,a=i;null!=a;){var o=a.drop;if(Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))<t.r+o.r){e=o;break}a=a.next}e&&(t.y>e.y?(s=t,r=e):(s=e,r=t),this.clearDrop(r),this.clearDrop(s,!0),this.matrix.remove(s),r.draw(),r.colliding=s,r.collided=!0)},i.prototype.prepareBackground=function(){this.background=document.createElement("canvas"),this.background.width=this.canvas.width,this.background.height=this.canvas.height,this.clearbackground=document.createElement("canvas"),this.clearbackground.width=this.canvas.width,this.clearbackground.height=this.canvas.height;var t=this.background.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),t.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.canvas.width,this.canvas.height),(t=this.clearbackground.getContext("2d")).clearRect(0,0,this.canvas.width,this.canvas.height),t.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.canvas.width,this.canvas.height),!isNaN(this.options.blur)&&this.options.blur>=1&&this.stackBlurCanvasRGB(this.canvas.width,this.canvas.height,this.options.blur)},i.prototype.stackBlurCanvasRGB=function(t,i,e){var r=[[0,9],[1,11],[2,12],[3,13],[5,14],[7,15],[11,16],[15,17],[22,18],[31,19],[45,20],[63,21],[90,22],[127,23],[181,24]];e|=0;var a=this.background.getContext("2d");if(0!==t&&0!==i){var o,n,h,c,l,d,p,u,f,g,m,v,x,y,w,R,E,b,T,M,A=a.getImageData(0,0,t,i),_=A.data,F=e+1,P=F*(F+1)/2,C=new s,k=new s,I=C;for(h=1;h<2*e+1;h++)I=I.next=new s,h===F&&(k=I);I.next=C;var L=null,S=null;p=d=0;for(var D,O=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259][e],X=0;X<r.length;++X)if(e<=r[X][0]){D=r[X-1][1];break}for(n=0;n<i;n++){for(y=w=R=u=f=g=0,m=F*(E=_[d]),v=F*(b=_[d+1]),x=F*(T=_[d+2]),u+=P*E,f+=P*b,g+=P*T,I=C,h=0;h<F;h++)I.r=E,I.g=b,I.b=T,I=I.next;for(h=1;h<F;h++)c=d+((t-1<h?t-1:h)<<2),u+=(I.r=E=_[c])*(M=F-h),f+=(I.g=b=_[c+1])*M,g+=(I.b=T=_[c+2])*M,y+=E,w+=b,R+=T,I=I.next;for(L=C,S=k,o=0;o<t;o++)_[d]=u*O>>D,_[d+1]=f*O>>D,_[d+2]=g*O>>D,u-=m,f-=v,g-=x,m-=L.r,v-=L.g,x-=L.b,c=p+((c=o+e+1)<t-1?c:t-1)<<2,u+=y+=L.r=_[c],f+=w+=L.g=_[c+1],g+=R+=L.b=_[c+2],L=L.next,m+=E=S.r,v+=b=S.g,x+=T=S.b,y-=E,w-=b,R-=T,S=S.next,d+=4;p+=t}for(o=0;o<t;o++){for(w=R=y=f=g=u=0,m=F*(E=_[d=o<<2]),v=F*(b=_[d+1]),x=F*(T=_[d+2]),u+=P*E,f+=P*b,g+=P*T,I=C,h=0;h<F;h++)I.r=E,I.g=b,I.b=T,I=I.next;for(l=t,h=1;h<F;h++)d=l+o<<2,u+=(I.r=E=_[d])*(M=F-h),f+=(I.g=b=_[d+1])*M,g+=(I.b=T=_[d+2])*M,y+=E,w+=b,R+=T,I=I.next,h<i-1&&(l+=t);for(d=o,L=C,S=k,n=0;n<i;n++)_[c=d<<2]=u*O>>D,_[c+1]=f*O>>D,_[c+2]=g*O>>D,u-=m,f-=v,g-=x,m-=L.r,v-=L.g,x-=L.b,c=o+((c=n+F)<i-1?c:i-1)*t<<2,u+=y+=L.r=_[c],f+=w+=L.g=_[c+1],g+=R+=L.b=_[c+2],L=L.next,m+=E=S.r,v+=b=S.g,x+=T=S.b,y-=E,w-=b,R-=T,S=S.next,d+=t}a.putImageData(A,0,0)}},r.prototype.update=function(t,i){if(t.gid){if(!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;if(this.matrix[t.gmx][t.gmy].remove(t),i)return null;if(t.gmx=Math.floor(t.x/this.resolution),t.gmy=Math.floor(t.y/this.resolution),!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;this.matrix[t.gmx][t.gmy].add(t);var e=this.collisions(t);if(e&&null!=e.next)return e.next}else{if(t.gid=Math.random().toString(36).substr(2,9),t.gmx=Math.floor(t.x/this.resolution),t.gmy=Math.floor(t.y/this.resolution),!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;this.matrix[t.gmx][t.gmy].add(t)}return null},r.prototype.collisions=function(t){var i=new a(null),e=i;return i=this.addAll(i,t.gmx-1,t.gmy+1),i=this.addAll(i,t.gmx,t.gmy+1),i=this.addAll(i,t.gmx+1,t.gmy+1),e},r.prototype.addAll=function(t,i,e){if(i>0&&e>0&&i<this.xc&&e<this.yc)for(var s=this.matrix[i][e];null!=s.next;)s=s.next,t.next=new a(s.drop),t=t.next;return t},r.prototype.remove=function(t){this.matrix[t.gmx][t.gmy].remove(t)},a.prototype.add=function(t){for(var i=this;null!=i.next;)i=i.next;i.next=new a(t)},a.prototype.remove=function(t){for(var i=this,e=null;null!=i.next;)e=i,(i=i.next).drop.gid===t.gid&&(e.next=i.next)},t.fn.extend({faiRainyDay:function(e){var s="function"==typeof document.createElement("canvas").getContext;e=e||{};s&&t(this).each(function(t,s){var r=new i(e,s);0===e.rainyEffect?r.rain([[3,2,2]],50):1===e.rainyEffect&&r.rain([[0,2,10],[3,3,.1]],33)})}})}(jQuery),function(t){var i,e,s,r,a,o=[],n=800,h=[],c=3,l=[],d=200;var p=function(){this.x=s*Math.random(),this.y=5e3*Math.random(),this.text=".",this.color="white"};function u(){for(var t=0;t<n;t++)o[t].getColor(),o[t].draw();clearTimeout(a),a=setTimeout(u,200)}p.prototype={constructor:p,getColor:function(){var t=Math.random();this.color=t<.5?"gray":"white"},init:function(){this.getColor()},draw:function(){i.beginPath(),i.arc(this.x,this.y,.05,0,2*Math.PI),i.strokeStyle=this.color,i.stroke(),i.closePath()}};var f=function(){this.x=-1,this.y=-1,this.length=-1,this.angle=30,this.width=-1,this.height=-1,this.speed=1,this.offset_x=-1,this.offset_y=-1,this.alpha=1,this.color1="",this.color2=""};function g(){for(var t=0;t<c;t++){var s=h[t];s.move(),s.y>e+100&&(i.clearRect(s.x,s.y-s.height,s.width,s.height),l[t]=0,h[t]=new f(t),h[t].init(t))}clearTimeout(r),r=setTimeout(g,10)}f.prototype={constructor:f,init:function(t){this.getPos(t),this.alpha=1;var i=80*Math.random()+180;this.length=Math.ceil(i),this.angle=30,i=Math.random()+.5,this.speed=Math.ceil(i);var e=Math.cos(3.14*this.angle/180),s=Math.sin(3.14*this.angle/180);this.width=this.length*e,this.height=this.length*s,this.offset_x=this.speed*e*3.5,this.offset_y=this.speed*s*3.5},countPos:function(){this.x=this.x-this.offset_x,this.y=this.y+this.offset_y},getPos:function(t){_this=this,function i(){if(_this.x=Math.random()*s,l.length)for(var e=0;e<l.length;e++)if(Math.abs(_this.x-l[e])<d)return i();l[t]=_this.x}(),this.y=.2*e},draw:function(){i.save(),i.beginPath(),i.lineWidth=2.5,i.globalAlpha=this.alpha;var t=i.createLinearGradient(this.x,this.y,this.x+this.width,this.y-this.height);t.addColorStop(0,"rgba(255, 255, 255, 1)"),t.addColorStop(1,"rgba(255, 255,255 , 0)"),this.alpha<0&&(this.alpha=-this.alpha),i.strokeStyle=t,i.moveTo(this.x,this.y),i.lineTo(this.x+this.width,this.y-this.height),i.closePath(),i.stroke(),i.restore()},move:function(){this.x,this.width,this.offset_x;var t=this.y-this.height;this.alpha-=.002,this.countPos(),this.alpha<=0?this.alpha=0:this.alpha>1&&(this.alpha=1),i.clearRect(this.x-this.offset_x,t,this.width+this.offset_x,this.height),this.draw()}},t.fn.extend({faiMeteor:function(r){var a="function"==typeof document.createElement("canvas").getContext;r=r||{};o=[],h=[],a&&t(this).each(function(a,l){!function(r,a){var o=t(r),n=document.createElement("canvas");o.append(n),n.width=a.width||window.innerWidth,n.height=a.height||window.innerHeight,n.className="meteor-canvas",e=n.height,s=n.width,(i=n.getContext("2d")).fillStyle="black",s/c<100&&(d=100)}(l,r);for(a=0;a<n;a++){var m=new p;m.init(),m.draw(),o.push(m)}for(a=0;a<c;a++){var v=new f(a);v.init(a),v.draw(),h.push(v)}u(),g()})}})}(jQuery),function(t){var i=function(t,i){return~~(Math.random()*(i-t+1)+t)},e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},s=function(i,e){this.canvas=document.createElement("canvas"),this.canvas.width=e.width||t(window).innerWidth(),this.canvas.height=e.height||t(window).innerHeight(),this.particles=[],this.partCount=150,this.fireworks=[],this.mx=this.canvas.width/2,this.my=this.canvas.height/2,this.currentHue=30,this.partSpeed=5,this.partSpeedVariance=10,this.partWind=50,this.partFriction=5,this.partGravity=1,this.hueMin=0,this.hueMax=360,this.fworkSpeed=4,this.fworkAccel=10,this.hueVariance=30,this.flickerDensity=25,this.showShockwave=!0,this.showTarget=!1,this.clearAlpha=25,t(i).append(this.canvas),this.canvas.className="fireworks-canvas",this.ctx=this.canvas.getContext("2d"),this.ctx.lineCap="round",this.ctx.lineJoin="round",this.lineWidth=1,this.bindEvents(),this.canvasLoop()};s.prototype={constructor:s,createParticles:function(t,e,s){for(var r=this.partCount;r--;){var a={x:t,y:e,coordLast:[{x:t,y:e},{x:t,y:e},{x:t,y:e}],angle:i(0,360),speed:i(this.partSpeed-this.partSpeedVariance<=0?1:this.partSpeed-this.partSpeedVariance,this.partSpeed+this.partSpeedVariance),friction:1-this.partFriction/100,gravity:this.partGravity/2,hue:i(s-this.hueVariance,s+this.hueVariance),brightness:i(50,80),alpha:i(40,100)/100,decay:i(10,50)/1e3,wind:(i(0,this.partWind)-this.partWind/2)/25,lineWidth:this.lineWidth};this.particles.push(a)}},updateParticles:function(){for(var t,i,e,s,r,a,o,n,h=this.particles.length;h--;){var c=this.particles[h],l=c.angle*Math.PI/180,d=Math.cos(l)*c.speed,p=Math.sin(l)*c.speed;c.speed*=c.friction,c.coordLast[2].x=c.coordLast[1].x,c.coordLast[2].y=c.coordLast[1].y,c.coordLast[1].x=c.coordLast[0].x,c.coordLast[1].y=c.coordLast[0].y,c.coordLast[0].x=c.x,c.coordLast[0].y=c.y,c.x+=d,c.y+=p,c.y+=c.gravity,c.angle+=c.wind,c.alpha-=c.decay,t=0,i=0,e=this.canvas.width,s=this.canvas.height,r=c.x-c.radius,a=c.y-c.radius,o=2*c.radius,n=2*c.radius,(t+e<r||r+o<t||i+s<a||a+n<i||c.alpha<.05)&&this.particles.splice(h,1)}},drawParticles:function(){for(var t=this.particles.length;t--;){var e=this.particles[t],s=i(1,3)-1;if(this.ctx.beginPath(),this.ctx.moveTo(Math.round(e.coordLast[s].x),Math.round(e.coordLast[s].y)),this.ctx.lineTo(Math.round(e.x),Math.round(e.y)),this.ctx.closePath(),this.ctx.strokeStyle="hsla("+e.hue+", 100%, "+e.brightness+"%, "+e.alpha+")",this.ctx.stroke(),this.flickerDensity>0){var r=50-this.flickerDensity;if(i(0,r)===r){this.ctx.beginPath(),this.ctx.arc(Math.round(e.x),Math.round(e.y),i(e.lineWidth,e.lineWidth+3)/2,0,2*Math.PI,!1),this.ctx.closePath();var a=i(50,100)/100;this.ctx.fillStyle="hsla("+e.hue+", 100%, "+e.brightness+"%, "+a+")",this.ctx.fill()}}}},createFireworks:function(t,e,s,r){var a={x:t,y:e,startX:t,startY:e,hitX:!1,hitY:!1,coordLast:[{x:t,y:e},{x:t,y:e},{x:t,y:e}],targetX:s,targetY:r,speed:this.fworkSpeed,angle:Math.atan2(r-e,s-t),shockwaveAngle:Math.atan2(r-e,s-t)+Math.PI/180*90,acceleration:this.fworkAccel/100,hue:this.currentHue,brightness:i(50,80),alpha:i(50,100)/100,lineWidth:this.lineWidth};this.fireworks.push(a)},updateFireworks:function(){for(var t=this.fireworks.length;t--;){var i=this.fireworks[t];this.ctx.lineWidth=i.lineWidth,vx=Math.cos(i.angle)*i.speed,vy=Math.sin(i.angle)*i.speed,i.speed*=1+i.acceleration,i.coordLast[2].x=i.coordLast[1].x,i.coordLast[2].y=i.coordLast[1].y,i.coordLast[1].x=i.coordLast[0].x,i.coordLast[1].y=i.coordLast[0].y,i.coordLast[0].x=i.x,i.coordLast[0].y=i.y,i.startX>=i.targetX?i.x+vx<=i.targetX?(i.x=i.targetX,i.hitX=!0):i.x+=vx:i.x+vx>=i.targetX?(i.x=i.targetX,i.hitX=!0):i.x+=vx,i.startY>=i.targetY?i.y+vy<=i.targetY?(i.y=i.targetY,i.hitY=!0):i.y+=vy:i.y+vy>=i.targetY?(i.y=i.targetY,i.hitY=!0):i.y+=vy,i.hitX&&i.hitY&&(this.createParticles(i.targetX,i.targetY,i.hue),this.fireworks.splice(t,1))}},drawFireworks:function(){var t=this.fireworks.length;for(this.ctx.globalCompositeOperation="lighter";t--;){var e=this.fireworks[t];this.ctx.lineWidth=e.lineWidth;var s=i(1,3)-1;this.ctx.beginPath(),this.ctx.moveTo(Math.round(e.coordLast[s].x),Math.round(e.coordLast[s].y)),this.ctx.lineTo(Math.round(e.x),Math.round(e.y)),this.ctx.closePath(),this.ctx.strokeStyle="hsla("+e.hue+", 100%, "+e.brightness+"%, "+e.alpha+")",this.ctx.stroke(),this.showTarget&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(Math.round(e.targetX),Math.round(e.targetY),i(1,8),0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.restore()),this.showShockwave&&(this.ctx.save(),this.ctx.translate(Math.round(e.x),Math.round(e.y)),this.ctx.rotate(e.shockwaveAngle),this.ctx.beginPath(),this.ctx.arc(0,0,e.speed/5*1,0,Math.PI,!0),this.ctx.strokeStyle="hsla("+e.hue+", 100%, "+e.brightness+"%, "+i(25,60)/100+")",this.ctx.lineWidth=e.lineWidth,this.ctx.stroke(),this.ctx.restore())}},bindEvents:function(){var t=this;t.clear(),e(function s(){t.mx=t.canvas.width*Math.random()-t.canvas.offsetLeft,t.my=t.canvas.height*Math.random()-t.canvas.offsetTop,t.currentHue=i(t.hueMin,t.hueMax),t.createFireworks(t.canvas.width/2,t.canvas.height,t.mx,t.my),setTimeout(function(){e(s.bind(t))},500)}.bind(t))},clear:function(){this.particles=[],this.fireworks=[],this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},canvasLoop:function(){e(this.canvasLoop.bind(this),this.canvas),this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle="rgba(0, 0, 0, "+this.clearAlpha/100+")",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.updateFireworks(),this.updateParticles(),this.drawFireworks(),this.drawParticles()}},t.fn.extend({faiFireworks:function(i){var e="function"==typeof document.createElement("canvas").getContext;i=i||{};e&&t(this).each(function(t,e){new s(e,i)})}})}(jQuery);